import{a as $}from"./chunk-NLDQSLKI.js";import{$ as H,Ac as M,Eb as E,Gb as r,Hb as x,Ib as m,Kb as D,Ma as o,T as I,Xa as w,Y as u,Z as y,_ as b,ec as C,hb as c,ib as p,ja as T,kb as k,lb as h,mb as S,nb as f,ob as i,pb as a,qb as _,ub as v,uc as F,wb as g,yb as s}from"./chunk-6JS7X5LE.js";var V=(e,n)=>n._id;function j(e,n){if(e&1&&(i(0,"div",3),r(1),a()),e&2){let t=s();o(),m(" ",t.error()," ")}}function L(e,n){e&1&&(i(0,"div",4),_(1,"div",6),a())}function B(e,n){e&1&&(i(0,"div",5),b(),i(1,"svg",7),_(2,"path",8),a(),H(),i(3,"p",9),r(4,"No tienes pagos registrados a\xFAn"),a(),i(5,"p",10),r(6," Los pagos que recibas aparecer\xE1n aqu\xED "),a()())}function A(e,n){if(e&1&&(i(0,"span"),r(1),a()),e&2){let t=s().$implicit,l=s(2);o(),m("Completado: ",l.formatDate(t.completed_at))}}function O(e,n){if(e&1&&(i(0,"span"),r(1),a()),e&2){let t=s().$implicit,l=s(2);o(),m("Procesado: ",l.formatDate(t.processed_at))}}function q(e,n){if(e&1&&(i(0,"span"),r(1),a()),e&2){let t=s().$implicit,l=s(2);o(),m("Creado: ",l.formatDate(t.created_by_admin_at))}}function G(e,n){if(e&1&&(i(0,"p",25),r(1),a()),e&2){let t=s().$implicit,l=s(2);o(),m(" Deducciones: -",l.formatCurrency(t.platform_deductions,t.currency)," ")}}function X(e,n){if(e&1&&(i(0,"div",34)(1,"span",35),r(2,"Deducciones de plataforma:"),a(),i(3,"span",44),r(4),a()()),e&2){let t=s(2).$implicit,l=s(2);o(4),m(" -",l.formatCurrency(t.platform_deductions,t.currency)," ")}}function R(e,n){if(e&1&&(i(0,"div",34)(1,"span",35),r(2,"Email PayPal:"),a(),i(3,"span",40),r(4),a()()),e&2){let t=s(3).$implicit;o(4),x(t.payment_details.paypal_email)}}function z(e,n){if(e&1&&(i(0,"div",34)(1,"span",35),r(2,"ID de transacci\xF3n:"),a(),i(3,"span",45),r(4),a()()),e&2){let t=s(3).$implicit;o(4),m(" ",t.payment_details.paypal_transaction_id," ")}}function U(e,n){if(e&1&&(i(0,"div",33),c(1,R,5,1,"div",34),c(2,z,5,1,"div",34),a()),e&2){let t=s(2).$implicit;o(),p(t.payment_details.paypal_email?1:-1),o(),p(t.payment_details.paypal_transaction_id?2:-1)}}function J(e,n){if(e&1&&(i(0,"div",41),r(1),a()),e&2){let t=s(2).$implicit;o(),m(" ",t.payment_details.other_details," ")}}function K(e,n){if(e&1&&(i(0,"div",43),_(1,"div",46),i(2,"div")(3,"p",47),r(4,"Pago creado por administrador"),a(),i(5,"p",48),r(6),a()()()),e&2){let t=s(2).$implicit,l=s(2);o(6),x(l.formatDate(t.created_by_admin_at))}}function Q(e,n){if(e&1&&(i(0,"div",43),_(1,"div",49),i(2,"div")(3,"p",47),r(4,"Pago procesado"),a(),i(5,"p",48),r(6),a()()()),e&2){let t=s(2).$implicit,l=s(2);o(6),x(l.formatDate(t.processed_at))}}function W(e,n){if(e&1&&(i(0,"div",43),_(1,"div",50),i(2,"div")(3,"p",47),r(4,"Pago completado"),a(),i(5,"p",48),r(6),a()()()),e&2){let t=s(2).$implicit,l=s(2);o(6),x(l.formatDate(t.completed_at))}}function Y(e,n){if(e&1&&(i(0,"div",42)(1,"h4",51),r(2,"Notas del Administrador"),a(),i(3,"p",52),r(4),a()()),e&2){let t=s(2).$implicit;o(4),m(" ",t.admin_notes," ")}}function Z(e,n){if(e&1&&(i(0,"div",30)(1,"div",31)(2,"div")(3,"h4",32),r(4,"Resumen del Pago"),a(),i(5,"div",33)(6,"div",34)(7,"span",35),r(8,"Total de ganancias:"),a(),i(9,"span",36),r(10),a()(),c(11,X,5,1,"div",34),i(12,"div",37)(13,"span",38),r(14,"Monto final:"),a(),i(15,"span",39),r(16),a()(),i(17,"div",34)(18,"span",35),r(19,"Ganancias incluidas:"),a(),i(20,"span",40),r(21),a()()()(),i(22,"div")(23,"h4",32),r(24,"Detalles del M\xE9todo de Pago"),a(),c(25,U,3,2,"div",33),c(26,J,2,1,"div",41),a()(),i(27,"div",42)(28,"h4",32),r(29,"Cronolog\xEDa"),a(),i(30,"div",33),c(31,K,7,1,"div",43),c(32,Q,7,1,"div",43),c(33,W,7,1,"div",43),a()(),c(34,Y,5,1,"div",42),a()),e&2){let t=s().$implicit,l=s(2);o(10),m(" ",l.formatCurrency(t.total_earnings,t.currency)," "),o(),p(t.platform_deductions>0?11:-1),o(5),m(" ",l.formatCurrency(t.final_amount,t.currency)," "),o(5),x(t.earnings_included.length),o(4),p(t.payment_method==="paypal"&&t.payment_details?25:-1),o(),p(t.payment_method==="other"&&(t.payment_details!=null&&t.payment_details.other_details)?26:-1),o(5),p(t.created_by_admin_at?31:-1),o(),p(t.processed_at?32:-1),o(),p(t.completed_at?33:-1),o(),p(t.admin_notes?34:-1)}}function tt(e,n){if(e&1){let t=v();i(0,"div",12)(1,"div",14),g("click",function(){let d=u(t).$implicit,P=s(2);return y(P.toggleExpand(d._id))}),i(2,"div",15)(3,"div",16)(4,"div",17)(5,"span",18),r(6),a(),i(7,"div")(8,"h3",19),r(9),a(),i(10,"p",20),r(11),a()()(),i(12,"div",21)(13,"span",22),r(14),a(),i(15,"span",20),c(16,A,2,1,"span")(17,O,2,1,"span")(18,q,2,1,"span"),a()()(),i(19,"div",23)(20,"p",24),r(21),a(),c(22,G,2,1,"p",25),i(23,"p",26),r(24),a()(),i(25,"div",27),b(),i(26,"svg",28),_(27,"path",29),a()()()(),c(28,Z,35,10,"div",30),a()}if(e&2){let t=n.$implicit,l=s(2);o(6),x(l.getPaymentMethodIcon(t.payment_method)),o(3),m(" ",l.getPaymentMethodText(t.payment_method)," "),o(2),m(" ID: #",t._id.slice(-8).toUpperCase()," "),o(2),f("ngClass",l.getStatusBadgeClass(t.status)),o(),m(" ",l.getStatusText(t.status)," "),o(2),p(t.completed_at?16:t.processed_at?17:18),o(5),m(" ",l.formatCurrency(t.final_amount,t.currency)," "),o(),p(t.platform_deductions>0?22:-1),o(2),m(" ",t.earnings_included.length," ganancias incluidas "),o(2),E("rotate-180",l.isExpanded(t._id)),o(2),p(l.isExpanded(t._id)?28:-1)}}function et(e,n){e&1&&(i(0,"span",55),r(1,"..."),a())}function nt(e,n){if(e&1){let t=v();i(0,"button",57),g("click",function(){u(t);let d=s().$implicit,P=s(3);return y(P.onPageChange(d))}),r(1),a()}if(e&2){let t=s().$implicit,l=s(3);E("bg-lime-500",t===l.currentPage())("text-slate-900",t===l.currentPage())("bg-slate-700",t!==l.currentPage())("text-slate-300",t!==l.currentPage()),o(),m(" ",t," ")}}function it(e,n){if(e&1&&c(0,et,2,0,"span",55)(1,nt,2,9,"button",56),e&2){let t=n.$implicit;p(t===-1?0:1)}}function at(e,n){if(e&1){let t=v();i(0,"div",13)(1,"div",20),r(2),a(),i(3,"div",53)(4,"button",54),g("click",function(){u(t);let d=s(2);return y(d.onPageChange(d.currentPage()-1))}),r(5," \u2190 Anterior "),a(),h(6,it,2,1,null,null,k),i(8,"button",54),g("click",function(){u(t);let d=s(2);return y(d.onPageChange(d.currentPage()+1))}),r(9," Siguiente \u2192 "),a()()()}if(e&2){let t=s(2);o(2),D(" P\xE1gina ",t.currentPage()," de ",t.totalPages()," (",t.totalItems()," pagos) "),o(2),f("disabled",t.currentPage()===1),o(2),S(t.getPageNumbers()),o(2),f("disabled",t.currentPage()===t.totalPages())}}function ot(e,n){if(e&1&&(i(0,"div",11),h(1,tt,29,12,"div",12,V),a(),c(3,at,10,5,"div",13)),e&2){let t=s();o(),S(t.payments()),o(2),p(t.totalPages()>1?3:-1)}}var N=class e{instructorPaymentService=I($);payments=this.instructorPaymentService.paymentHistory;isLoading=this.instructorPaymentService.isLoadingPaymentHistory;error=this.instructorPaymentService.paymentHistoryError;pagination=this.instructorPaymentService.paymentHistoryPagination;currentPage=C(()=>this.pagination()?.page||1);totalPages=C(()=>this.pagination()?.pages||1);totalItems=C(()=>this.pagination()?.total||0);limit=10;expandedPayment=T(null);hasPayments=C(()=>this.payments().length>0);ngOnInit(){this.loadPayments()}loadPayments(n=1){this.instructorPaymentService.setPaymentHistoryPage(n),this.instructorPaymentService.setPaymentHistoryLimit(this.limit)}toggleExpand(n){this.expandedPayment()===n?this.expandedPayment.set(null):this.expandedPayment.set(n)}isExpanded(n){return this.expandedPayment()===n}onPageChange(n){n<1||n>this.totalPages()||this.loadPayments(n)}getStatusBadgeClass(n){return{pending:"bg-yellow-500/10 text-yellow-300 border-yellow-500/30",processing:"bg-blue-500/10 text-blue-300 border-blue-500/30",completed:"bg-green-500/10 text-green-300 border-green-500/30",failed:"bg-red-500/10 text-red-300 border-red-500/30",cancelled:"bg-slate-500/10 text-slate-300 border-slate-500/30"}[n]||"bg-slate-500/10 text-slate-300 border-slate-500/30"}getStatusText(n){return{pending:"Pendiente",processing:"Procesando",completed:"Completado",failed:"Fallido",cancelled:"Cancelado"}[n]||n}getPaymentMethodIcon(n){return{paypal:"\u{1F4B3}",other:"\u{1F4B0}"}[n]||"\u{1F4B0}"}getPaymentMethodText(n){return{paypal:"PayPal",other:"Otro"}[n]||n}formatDate(n){return n?new Date(n).toLocaleDateString("es-MX",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}):"N/A"}formatCurrency(n,t="MXN"){return new Intl.NumberFormat("es-MX",{style:"currency",currency:t}).format(n)}getPageNumbers(){let n=[],t=this.totalPages(),l=this.currentPage();if(t<=7)for(let d=1;d<=t;d++)n.push(d);else if(l<=4){for(let d=1;d<=5;d++)n.push(d);n.push(-1),n.push(t)}else if(l>=t-3){n.push(1),n.push(-1);for(let d=t-4;d<=t;d++)n.push(d)}else{n.push(1),n.push(-1);for(let d=l-1;d<=l+1;d++)n.push(d);n.push(-1),n.push(t)}return n}static \u0275fac=function(t){return new(t||e)};static \u0275cmp=w({type:e,selectors:[["app-instructor-payment-history"]],decls:10,vars:2,consts:[[1,"space-y-6"],[1,"text-3xl","font-bold","text-slate-100"],[1,"mt-2","text-sm","text-slate-400"],[1,"bg-red-500/10","border","border-red-500/50","text-red-400","px-4","py-3","rounded-lg"],[1,"flex","justify-center","items-center","py-12"],[1,"bg-slate-800/50","rounded-lg","p-12","text-center"],[1,"animate-spin","rounded-full","h-12","w-12","border-b-2","border-lime-400"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-16","h-16","mx-auto","text-slate-600","mb-4"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"],[1,"text-slate-400","text-lg"],[1,"text-sm","text-slate-500","mt-2"],[1,"space-y-4"],[1,"bg-slate-800/50","rounded-lg","overflow-hidden","border","border-slate-700","hover:border-slate-600","transition-colors"],[1,"bg-slate-800/50","rounded-lg","px-6","py-4","flex","items-center","justify-between"],[1,"p-6","cursor-pointer",3,"click"],[1,"flex","items-start","justify-between"],[1,"flex-1"],[1,"flex","items-center","gap-3","mb-2"],[1,"text-2xl"],[1,"text-lg","font-semibold","text-slate-200"],[1,"text-sm","text-slate-400"],[1,"flex","items-center","gap-4","mt-3"],[1,"inline-flex","items-center","px-3","py-1","rounded-full","text-xs","font-medium","border",3,"ngClass"],[1,"text-right","ml-4"],[1,"text-3xl","font-bold","text-lime-400"],[1,"text-sm","text-slate-500","mt-1"],[1,"text-xs","text-slate-500","mt-1"],[1,"ml-4"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-6","h-6","text-slate-400","transition-transform"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M19 9l-7 7-7-7"],[1,"border-t","border-slate-700","p-6","bg-slate-900/30"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-6"],[1,"text-sm","font-semibold","text-slate-300","mb-3"],[1,"space-y-2"],[1,"flex","justify-between","text-sm"],[1,"text-slate-400"],[1,"text-slate-200","font-medium"],[1,"flex","justify-between","text-sm","pt-2","border-t","border-slate-700"],[1,"text-slate-300","font-semibold"],[1,"text-lime-400","font-bold"],[1,"text-slate-200"],[1,"text-sm","text-slate-300"],[1,"mt-6","pt-6","border-t","border-slate-700"],[1,"flex","items-start","text-sm"],[1,"text-red-400","font-medium"],[1,"text-blue-400","font-mono","text-xs"],[1,"w-2","h-2","bg-blue-400","rounded-full","mt-1.5","mr-3"],[1,"text-slate-300"],[1,"text-slate-500","text-xs"],[1,"w-2","h-2","bg-yellow-400","rounded-full","mt-1.5","mr-3"],[1,"w-2","h-2","bg-green-400","rounded-full","mt-1.5","mr-3"],[1,"text-sm","font-semibold","text-slate-300","mb-2"],[1,"text-sm","text-slate-400","bg-slate-800/50","p-3","rounded"],[1,"flex","gap-1"],[1,"px-3","py-1","rounded","bg-slate-700","text-slate-300","hover:bg-slate-600","disabled:opacity-50","disabled:cursor-not-allowed","transition-colors",3,"click","disabled"],[1,"px-3","py-1","text-slate-500"],[1,"px-3","py-1","rounded","hover:bg-slate-600","transition-colors",3,"bg-lime-500","text-slate-900","bg-slate-700","text-slate-300"],[1,"px-3","py-1","rounded","hover:bg-slate-600","transition-colors",3,"click"]],template:function(t,l){t&1&&(i(0,"div",0)(1,"div")(2,"h1",1),r(3,"Historial de Pagos"),a(),i(4,"p",2),r(5," Revisa todos los pagos que has recibido por tus ventas "),a()(),c(6,j,2,1,"div",3),c(7,L,2,0,"div",4)(8,B,7,0,"div",5)(9,ot,4,1),a()),t&2&&(o(6),p(l.error()?6:-1),o(),p(l.isLoading()?7:l.hasPayments()?9:8))},dependencies:[M,F],encapsulation:2})};export{N as a};
