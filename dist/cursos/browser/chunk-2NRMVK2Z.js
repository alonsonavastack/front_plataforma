import{a as M}from"./chunk-LT45JWYU.js";import{e as P,g as k}from"./chunk-VM3MHBTU.js";import{$ as b,Ac as w,Gb as r,Ib as y,Ma as s,T as f,Xa as h,Y as x,Z as v,_ as p,hb as m,ib as c,ja as g,rb as e,sb as i,tb as d,ub as E,vb as S,xb as _,yb as u}from"./chunk-6JS7X5LE.js";import{a as C}from"./chunk-I4MTPUBM.js";function D(t,n){t&1&&(e(0,"div",3),d(1,"div",13),i())}function T(t,n){if(t&1&&(e(0,"div",4),r(1),i()),t&2){let o,a=u();s(),y(" ",(o=a.error())==null?null:o.message," ")}}function L(t,n){t&1&&(e(0,"span",20),d(1,"span",24),r(2," Activo "),i())}function V(t,n){t&1&&(e(0,"span",21),r(1," Pendiente "),i())}function N(t,n){if(t&1){let o=E();e(0,"div",25)(1,"p",26),r(2,"Cuenta Conectada"),i(),e(3,"p",27),r(4,"Tu cuenta Stripe est\xE1 activa y lista para recibir pagos autom\xE1ticos."),i()(),e(5,"button",28),_("click",function(){x(o);let l=u(2);return v(l.openStripeDashboard())}),p(),e(6,"svg",29),d(7,"path",30),i(),r(8," Ver mi Dashboard de Stripe "),i()}}function j(t,n){t&1&&(d(0,"span",33),e(1,"span"),r(2,"Conectando..."),i())}function z(t,n){t&1&&(p(),e(0,"svg",34),d(1,"path",35)(2,"path",36),i(),b(),e(3,"span"),r(4,"Conectar con Stripe"),i())}function F(t,n){if(t&1){let o=E();e(0,"p",31),r(1," Conecta tu cuenta para recibir tus pagos autom\xE1ticamente. Funciona en M\xE9xico y m\xE1s de 46 pa\xEDses. "),i(),e(2,"button",32),_("click",function(){x(o);let l=u(2);return v(l.connectStripe())}),m(3,j,3,0)(4,z,5,0),i()}if(t&2){let o=u(2);s(2),S("disabled",o.isSaving()==="stripe"),s(),c(o.isSaving()==="stripe"?3:4)}}function H(t,n){if(t&1&&(e(0,"div",5),d(1,"div",14),e(2,"div",15)(3,"div",16),p(),e(4,"svg",17),d(5,"path",18),i()(),b(),e(6,"div")(7,"h3",19),r(8," Stripe "),m(9,L,3,0,"span",20)(10,V,2,0,"span",21),i(),e(11,"p",22),r(12,"Recibe pagos internacionales de forma autom\xE1tica"),i()()(),e(13,"div",23),m(14,N,9,0)(15,F,5,2),i()()),t&2){let o,a,l=u();s(9),c((o=l.config())!=null&&o.stripe_charges_enabled?9:(o=l.config())!=null&&o.stripe_account_id?10:-1),s(5),c((a=l.config())!=null&&a.stripe_charges_enabled?14:15)}}function R(t,n){t&1&&(e(0,"div",6)(1,"p",37),r(2,"No se pudo cargar la configuraci\xF3n."),i()())}var I=class t{instructorPaymentService=f(M);route=f(P);router=f(k);config=this.instructorPaymentService.paymentConfig;isLoading=this.instructorPaymentService.isLoadingPaymentConfig;isSaving=g("");error=g(null);success=g(null);showDeleteModal=g(!1);ngOnInit(){let n=this.router.url||"";if(n.includes("/instructor-payment-config")&&!n.includes("/dashboard")){let a=C({},this.route.snapshot.queryParams);a.section="instructor-payment-config",this.router.navigate(["/dashboard"],{queryParams:a,replaceUrl:!0});return}this.instructorPaymentService.reloadPaymentConfig()}connectStripe(){this.isSaving.set("stripe"),this.clearMessages(),this.instructorPaymentService.startStripeOnboarding().subscribe({next:n=>{n.success&&n.onboarding_url?window.location.href=n.onboarding_url:(this.error.set({section:"stripe",message:"No se pudo iniciar la conexi\xF3n con Stripe."}),this.isSaving.set(""))},error:n=>{this.error.set({section:"stripe",message:n.error?.message||"Error al conectar con Stripe."}),this.isSaving.set("")}})}openStripeDashboard(){this.instructorPaymentService.getStripeDashboardLink().subscribe({next:n=>{n.success&&n.dashboard_url&&window.open(n.dashboard_url,"_blank")},error:()=>{this.error.set({section:"stripe",message:"No se pudo abrir el dashboard de Stripe."})}})}cancelDelete(){this.showDeleteModal.set(!1)}executeDelete(){this.showDeleteModal.set(!1)}clearMessages(){this.error.set(null),this.success.set(null)}static \u0275fac=function(o){return new(o||t)};static \u0275cmp=h({type:t,selectors:[["app-instructor-payment-config"]],decls:19,vars:3,consts:[[1,"space-y-8"],[1,"text-3xl","font-bold","text-slate-100"],[1,"mt-2","text-sm","text-slate-400"],[1,"flex","justify-center","items-center","py-12"],[1,"bg-red-500/10","border","border-red-500/50","text-red-400","px-4","py-3","rounded-lg"],[1,"bg-slate-800/50","rounded-lg","p-6","border","border-slate-700","relative","overflow-hidden","group","hover:border-violet-500/30","transition-all"],[1,"text-center","py-12"],[1,"bg-blue-500/10","border","border-blue-500/30","rounded-lg","p-4"],[1,"flex","items-start"],["fill","currentColor","viewBox","0 0 20 20",1,"w-5","h-5","text-blue-400","mt-0.5","mr-3","flex-shrink-0"],["fill-rule","evenodd","d","M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z","clip-rule","evenodd"],[1,"text-sm","font-medium","text-blue-300","mb-1"],[1,"text-sm","text-blue-200/70"],[1,"animate-spin","rounded-full","h-12","w-12","border-b-2","border-lime-400"],[1,"absolute","-right-6","-top-6","w-24","h-24","bg-violet-600/10","rounded-full","group-hover:bg-violet-600/20","transition-all"],[1,"flex","items-center","space-x-4","mb-6","relative","z-10"],[1,"bg-violet-600/20","p-3","rounded-xl","border","border-violet-500/20"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"h-8","w-8","text-violet-400"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M3 10h18M7 15h1m4 0h1m-7 4h12a3 3 0 003-3V8a3 3 0 00-3-3H6a3 3 0 00-3 3v8a3 3 0 003 3z"],[1,"text-xl","font-bold","text-slate-100","flex","items-center","gap-2"],[1,"inline-flex","items-center","px-2","py-0.5","rounded","text-xs","font-semibold","bg-green-500/10","text-green-400","border","border-green-500/20"],[1,"inline-flex","items-center","px-2","py-0.5","rounded","text-xs","font-semibold","bg-yellow-500/10","text-yellow-400","border","border-yellow-500/20"],[1,"text-sm","text-slate-400"],[1,"relative","z-10"],[1,"w-1.5","h-1.5","rounded-full","bg-green-400","mr-1.5","animate-pulse"],[1,"bg-slate-900/50","rounded-xl","p-5","mb-5","border","border-slate-700/50"],[1,"text-xs","font-semibold","text-slate-400","uppercase","tracking-wider","mb-2"],[1,"text-sm","text-slate-300"],[1,"w-full","py-2.5","px-4","bg-violet-600/20","hover:bg-violet-600/30","text-violet-300","rounded-lg","transition-all","flex","justify-center","items-center","gap-2","border","border-violet-500/30",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"],[1,"text-sm","text-slate-400","mb-4","bg-slate-900/50","p-3","rounded-lg","border","border-slate-700/50"],["type","button",1,"w-full","bg-violet-600","hover:bg-violet-500","text-white","font-bold","py-3","px-4","rounded-lg","transition-all","shadow-lg","flex","justify-center","items-center","gap-2","disabled:opacity-50","disabled:cursor-not-allowed",3,"click","disabled"],[1,"inline-block","w-4","h-4","border-2","border-white/30","border-t-white","rounded-full","animate-spin"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M14.828 14.828a4 4 0 015.656 0l4 4a4 4 0 01-5.656 5.656l-1.102-1.101"],[1,"text-slate-400"]],template:function(o,a){if(o&1&&(e(0,"div",0)(1,"div")(2,"h1",1),r(3,"Configuraci\xF3n de Pagos"),i(),e(4,"p",2),r(5," Administra c\xF3mo quieres recibir tus ganancias. "),i()(),m(6,D,2,0,"div",3),m(7,T,2,1,"div",4),m(8,H,16,2,"div",5)(9,R,3,0,"div",6),e(10,"div",7)(11,"div",8),p(),e(12,"svg",9),d(13,"path",10),i(),b(),e(14,"div")(15,"h3",11),r(16," Seguridad de tus datos "),i(),e(17,"p",12),r(18," Todos tus datos bancarios est\xE1n encriptados con AES-256. Tu informaci\xF3n est\xE1 segura y solo ser\xE1 usada para procesar tus pagos. "),i()()()()()),o&2){let l;s(6),c(a.isLoading()?6:-1),s(),c(((l=a.error())==null?null:l.section)==="load"?7:-1),s(),c(!a.isLoading()&&a.config()?8:!a.isLoading()&&!a.config()?9:-1)}},dependencies:[w],encapsulation:2})};export{I as a};
