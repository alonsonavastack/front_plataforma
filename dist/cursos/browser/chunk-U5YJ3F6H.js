import{b as F,c as G}from"./chunk-WNHRWCIH.js";import{a as C}from"./chunk-6Z75774O.js";import{a as R,c as B}from"./chunk-UD4Q7ATB.js";import{a as $}from"./chunk-7XI35AXC.js";import{a as z}from"./chunk-WQ6NTL5W.js";import{b as N}from"./chunk-EU5OEAP5.js";import{e as A,f as O}from"./chunk-UKUKXRH6.js";import{$ as b,Ab as I,Bb as j,Gb as l,Ha as L,Hb as T,Ib as w,Jb as D,Ma as s,T as f,Xa as H,Y as h,Z as v,_ as u,ec as y,fb as P,hb as p,ib as g,ja as E,ka as M,nb as S,ob as n,pb as r,qb as m,ub as k,wb as x,yb as d,zb as V}from"./chunk-6JS7X5LE.js";var U=["headerElement"];function W(o,t){if(o&1){let e=k();n(0,"img",29),x("error",function(a){return h(e),v(a.target.src="")}),r()}if(o&2){let e=d();S("src",e.siteLogo(),L)("alt",e.siteName()+" logo")}}function q(o,t){if(o&1&&(n(0,"div",5),l(1),r()),o&2){let e=d();s(),w(" ",e.siteName().charAt(0).toUpperCase()," ")}}function J(o,t){if(o&1&&(n(0,"span",32),l(1),r()),o&2){let e=d(2);s(),w(" ",e.totalPendingReviews()," ")}}function K(o,t){if(o&1&&(n(0,"a",12),u(),n(1,"svg",30),m(2,"path",31),r(),p(3,J,2,1,"span",32),r()),o&2){let e=d();s(3),g(e.totalPendingReviews()>0?3:-1)}}function X(o,t){if(o&1&&(n(0,"a",13),u(),n(1,"svg",33),m(2,"path",34),r(),b(),n(3,"span",35),l(4),r()()),o&2){let e=d();s(4),w("$",e.walletService.balance()||0)}}function Y(o,t){o&1&&(n(0,"div",14)(1,"a",36)(2,"span",37),u(),n(3,"svg",38),m(4,"path",39),r(),l(5," Ingresar "),r()(),b(),n(6,"a",40)(7,"span",37),u(),n(8,"svg",38),m(9,"path",41),r(),l(10," Crear cuenta "),r()()())}function Z(o,t){if(o&1){let e=k();n(0,"a",61),x("click",function(){h(e);let a=d(3);return v(a.isProfileMenuOpen.set(!1))}),u(),n(1,"svg",38),m(2,"path",62),r(),l(3," Dashboard "),r()}}function ee(o,t){if(o&1){let e=k();n(0,"div",47)(1,"div",48)(2,"p",49),l(3),r(),n(4,"p",50),l(5),r(),n(6,"span",51),l(7),r()(),n(8,"div",52)(9,"a",53),x("click",function(){h(e);let a=d(2);return v(a.isProfileMenuOpen.set(!1))}),u(),n(10,"svg",38),m(11,"path",54),r(),l(12," Mi Panel "),r(),b(),n(13,"a",55),x("click",function(){h(e);let a=d(2);return v(a.isProfileMenuOpen.set(!1))}),u(),n(14,"svg",38),m(15,"path",56),r(),l(16," Ver Sitio "),r(),p(17,Z,4,0,"a",57),r(),b(),n(18,"div",58)(19,"button",59),x("click",function(){h(e);let a=d(2);return v(a.logout())}),u(),n(20,"svg",38),m(21,"path",60),r(),l(22," Cerrar Sesi\xF3n "),r()()()}if(o&2){let e,i,a,c,_=d(2);s(3),D("",(e=_.authService.user())==null?null:e.name," ",(e=_.authService.user())==null?null:e.surname," "),s(2),T((i=_.authService.user())==null?null:i.email),s(2),w(" ",(a=_.authService.user())==null?null:a.rol," "),s(2),S("routerLink",_.getProfileLink()),s(8),g(((c=_.authService.user())==null?null:c.rol)==="admin"||((c=_.authService.user())==null?null:c.rol)==="instructor"?17:-1)}}function te(o,t){if(o&1){let e=k();n(0,"div",15)(1,"button",42),x("click",function(a){h(e);let c=d();return v(c.toggleProfileMenu(a))}),n(2,"span",43),l(3),r(),n(4,"div",44),m(5,"img",45)(6,"div",46),r()(),p(7,ee,23,6,"div",47),r()}if(o&2){let e,i=d();s(),P("data-menu-open",i.isProfileMenuOpen()),s(2),w("Hola, ",(e=i.authService.user())==null?null:e.name),s(2),S("src",i.authService.currentUserAvatar(),L),s(2),g(i.isProfileMenuOpen()?7:-1)}}function ie(o,t){o&1&&(n(0,"button",16),u(),n(1,"svg",63),m(2,"path",64),r(),b(),n(3,"span",22),l(4,"Abrir men\xFA principal"),r()())}function ne(o,t){o&1&&(n(0,"li")(1,"a",65)(2,"span",26),l(3,"Dashboard"),r()()())}function re(o,t){o&1&&(n(0,"div",28)(1,"a",66),l(2,"Ingresar"),r(),n(3,"a",67),l(4,"Crear cuenta"),r()())}function oe(o,t){if(o&1){let e=k();n(0,"div",28)(1,"a",68),x("click",function(){h(e);let a=d();return v(a.isProfileMenuOpen.set(!1))}),l(2,"Mi Panel"),r(),n(3,"button",69),x("click",function(){h(e);let a=d();return v(a.logout())}),l(4," Cerrar Sesi\xF3n "),r()()}if(o&2){let e=d();s(),S("routerLink",e.getProfileLink())}}var Q=class o{authService=f(N);walletService=f(z);router=f(A);animate=f(R);systemConfigService=f($);coursesService=f(F);projectService=f(G);pendingCoursesCount=E(0);pendingProjectsCount=E(0);totalPendingReviews=y(()=>this.pendingCoursesCount()+this.pendingProjectsCount());headerEl;siteName=y(()=>this.systemConfigService.config()?.siteName||"Dev-Sharks");siteLogo=y(()=>{let t=this.systemConfigService.config()?.logo;return t?`${C.url}system-config/logo/${t}`:null});constructor(){M(()=>{this.authService.isLoggedIn()&&(this.walletService.loadWallet(),(this.authService.user()?.rol==="admin"||this.authService.user()?.rol==="instructor")&&this.fetchPendingReviews())}),M(()=>{})}fetchPendingReviews(){this.coursesService.getCoursesAdmin(1).subscribe({next:t=>{this.pendingCoursesCount.set(t.courses.length)},error:()=>this.pendingCoursesCount.set(0)}),this.projectService.getProjectsAdmin(1).subscribe({next:t=>{this.pendingProjectsCount.set(t.projects.length)},error:()=>this.pendingProjectsCount.set(0)})}boundHandleDocumentClick=this.handleDocumentClick.bind(this);ngAfterViewInit(){this.headerEl&&this.animate.animateFadeInDashboard(this.headerEl.nativeElement),this.isOnAuthPage()||this.safeInitFlowbite();let t=document.getElementById("drawer-navigation");t&&t.classList.contains("transform-none")&&(t.classList.remove("transform-none"),t.classList.add("-translate-x-full")),document.addEventListener("click",this.boundHandleDocumentClick)}safeInitFlowbite(t=0){setTimeout(()=>{try{if(!document.getElementById("drawer-navigation")){t<3&&this.safeInitFlowbite(t+1);return}B()}catch{t<3&&this.safeInitFlowbite(t+1)}},t===0?100:300)}ngOnDestroy(){document.querySelector("[drawer-backdrop]")?.remove();let e=document.getElementById("drawer-navigation");e&&(e.classList.remove("transform-none"),e.classList.add("-translate-x-full")),document.removeEventListener("click",this.boundHandleDocumentClick)}isProfileMenuOpen=E(!1);handleDocumentClick(t){if(!this.isProfileMenuOpen())return;let e=t.target,i=e.closest("[data-menu-open]")!==null,a=e.closest("[data-menu-dropdown]")!==null;!i&&!a&&this.isProfileMenuOpen.set(!1)}toggleProfileMenu(t){t&&(t.stopPropagation(),t.preventDefault()),this.isProfileMenuOpen.update(e=>!e)}logout(){this.authService.logout(),this.isProfileMenuOpen.set(!1)}isOnAuthPage=y(()=>{let t=this.router.url;return t.includes("/login")||t.includes("/register")});getCartItemImage(t){let e=t.product_type,i=t.product?.imagen;if(!i)return"https://images.unsplash.com/photo-1516321318423-f06f85e504b3?w=800";let a=String(i).trim();return/^https?:\/\//i.test(a)?a:e==="project"?`${C.images.project}${a}`:`${C.images.course}${a}`}buildImage(t,e){if(!t)return"https://images.unsplash.com/photo-1516321318423-f06f85e504b3?w=800";let i=String(t).trim();return/^https?:\/\//i.test(i)?i:i.startsWith("/api/")?`${C.url.replace("/api/","")}${i}`:e==="project"?`${C.images.project}${i}`:`${C.images.course}${i}`}getProfileLink(){let t=this.authService.user()?.rol;return t==="admin"?"/profile-admin":t==="instructor"?"/profile-instructor":"/profile-student"}goToCheckout(){this.router.navigate(["/checkout"])}static \u0275fac=function(e){return new(e||o)};static \u0275cmp=H({type:o,selectors:[["app-header"]],viewQuery:function(e,i){if(e&1&&V(U,5),e&2){let a;I(a=j())&&(i.headerEl=a.first)}},decls:41,vars:8,consts:[["headerElement",""],[1,"sticky","top-0","z-[60]","w-full","backdrop-blur-xl","supports-[backdrop-filter]:bg-slate-950/90","bg-slate-950/80","border-b","border-white/5","shadow-lg","shadow-black/10"],[1,"max-w-7xl","mx-auto","px-4","sm:px-6","lg:px-8","h-16","flex","items-center","justify-between"],["routerLink","/",1,"inline-flex","items-center","gap-3","group"],[1,"h-10","w-10","rounded-xl","object-cover","ring-2","ring-lime-400/30","group-hover:ring-lime-400/60","transition-all","duration-300","shadow-lg","shadow-lime-500/20",3,"src","alt"],[1,"h-10","w-10","rounded-xl","bg-gradient-to-br","from-lime-400","via-emerald-400","to-cyan-400","ring-2","ring-lime-400/30","group-hover:ring-lime-400/60","grid","place-items-center","text-slate-900","font-black","transition-all","duration-300","shadow-lg","shadow-lime-500/30","group-hover:shadow-lime-500/50"],[1,"flex","flex-col"],[1,"text-lg","font-bold","tracking-tight","text-white","group-hover:text-lime-300","transition-colors","duration-200"],[1,"text-xs","text-slate-400","font-medium"],[1,"hidden","lg:flex","items-center","gap-6","text-sm","text-slate-300"],["routerLink","/instructors","routerLinkActive","text-lime-400 font-medium",1,"hover:text-white","transition-colors"],[1,"flex","items-center","gap-3"],["routerLink","/dashboard","title","Revisiones Pendientes",1,"relative","p-2","rounded-xl","text-slate-400","hover:text-white","hover:bg-white/5","transition-colors","duration-200","group"],["routerLink","/wallet",1,"relative","flex","items-center","gap-2","px-3","py-2","rounded-xl","border","border-white/10","hover:border-lime-400/50","hover:bg-lime-400/5","text-slate-400","hover:text-lime-300","transition-all","duration-200","group"],[1,"hidden","lg:flex","items-center","gap-2"],[1,"hidden","lg:block","relative"],["type","button","data-drawer-target","drawer-navigation","data-drawer-show","drawer-navigation","aria-controls","drawer-navigation",1,"lg:hidden","p-2.5","rounded-xl","border","border-white/10","hover:border-lime-400/50","hover:bg-lime-400/5","text-slate-400","hover:text-lime-300","transition-all","duration-200"],["id","drawer-navigation","tabindex","-1","aria-labelledby","drawer-navigation-label",1,"fixed","top-0","left-0","z-[10100]","h-screen","p-4","overflow-y-auto","transition-transform","-translate-x-full","bg-slate-900","w-80"],["id","drawer-navigation-label",1,"text-base","font-semibold","text-gray-400","uppercase"],["type","button","data-drawer-hide","drawer-navigation","aria-controls","drawer-navigation",1,"text-gray-400","bg-transparent","hover:bg-gray-700","hover:text-white","rounded-lg","text-sm","w-8","h-8","absolute","top-2.5","end-2.5","inline-flex","items-center","justify-center"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 14 14",1,"w-3","h-3"],["stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","m1 1 6 6m0 0 6 6M7 7l6-6M7 7l-6 6"],[1,"sr-only"],[1,"py-4","overflow-y-auto"],[1,"space-y-2","font-medium"],["routerLink","/",1,"flex","items-center","p-2","text-slate-200","rounded-lg","hover:bg-gray-700","group"],[1,"ms-3"],["routerLink","/instructors",1,"flex","items-center","p-2","text-slate-200","rounded-lg","hover:bg-gray-700","group"],[1,"pt-4","mt-4","space-y-2","border-t","border-gray-700"],[1,"h-10","w-10","rounded-xl","object-cover","ring-2","ring-lime-400/30","group-hover:ring-lime-400/60","transition-all","duration-300","shadow-lg","shadow-lime-500/20",3,"error","src","alt"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-6","h-6","group-hover:scale-110","transition-transform","duration-200"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01"],[1,"absolute","top-1.5","right-1.5","flex","h-4","w-4","items-center","justify-center","rounded-full","bg-red-500","text-[10px]","font-bold","text-white","ring-2","ring-slate-950","animate-pulse"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","group-hover:scale-110","transition-transform","duration-200"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M17 9V7a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2m2 4h10a2 2 0 002-2v-6a2 2 0 00-2-2H9a2 2 0 00-2 2v6a2 2 0 002 2zm7-5a2 2 0 11-4 0 2 2 0 014 0z"],[1,"text-sm","font-semibold","text-lime-400"],["routerLink","/login",1,"relative","px-5","py-2.5","rounded-xl","border","border-lime-400/30","bg-gradient-to-b","from-lime-400/10","to-emerald-400/5","text-white","font-medium","hover:border-lime-400/60","hover:from-lime-400/20","hover:to-emerald-400/10","hover:shadow-lg","hover:shadow-lime-500/20","transition-all","duration-200","group"],[1,"relative","z-10","flex","items-center","gap-2"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M11 16l-4-4m0 0l4-4m-4 4h14m-5 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h7a3 3 0 013 3v1"],["routerLink","/register",1,"relative","px-5","py-2.5","rounded-xl","border","border-yellow-400/30","bg-gradient-to-b","from-yellow-400/10","to-amber-400/5","text-white","font-semibold","hover:border-yellow-400/60","hover:from-yellow-400/20","hover:to-amber-400/10","hover:shadow-lg","hover:shadow-yellow-500/20","transition-all","duration-200","group"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M18 9v3m0 0v3m0-3h3m-3 0h-3m-2-5a4 4 0 11-8 0 4 4 0 018 0zM3 20a6 6 0 0112 0v1H3v-1z"],["type","button",1,"flex","items-center","gap-3","px-3","py-2","rounded-xl","border","border-white/10","hover:border-lime-400/50","hover:bg-white/5","transition-all","duration-200","group","relative","z-[10001]",3,"click"],[1,"text-sm","font-medium","text-slate-200","group-hover:text-lime-300","transition-colors","duration-200"],[1,"relative"],["alt","Avatar",1,"w-9","h-9","rounded-full","object-cover","ring-2","ring-lime-400/30","group-hover:ring-lime-400/60","transition-all","duration-200",3,"src"],[1,"absolute","-bottom-0.5","-right-0.5","w-3","h-3","bg-green-500","border-2","border-slate-950","rounded-full"],["data-menu-dropdown","",1,"absolute","top-full","right-0","mt-3","w-64","bg-slate-800/95","backdrop-blur-xl","rounded-xl","shadow-2xl","ring-1","ring-white/10","py-2","z-[10000]","border","border-white/5"],[1,"px-4","py-3","border-b","border-white/10"],[1,"text-sm","font-semibold","text-white"],[1,"text-xs","text-slate-400","truncate"],[1,"inline-block","mt-2","px-2","py-1","text-xs","font-semibold","rounded-full","bg-lime-500/10","text-lime-400","border","border-lime-500/30","capitalize"],[1,"py-2"],[1,"flex","items-center","gap-3","px-4","py-2.5","text-sm","text-slate-300","hover:bg-slate-700/50","hover:text-lime-300","transition-colors","duration-200",3,"click","routerLink"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"],["routerLink","/",1,"flex","items-center","gap-3","px-4","py-2.5","text-sm","text-slate-300","hover:bg-slate-700/50","hover:text-lime-300","transition-colors","duration-200",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"],["routerLink","/dashboard",1,"flex","items-center","gap-3","px-4","py-2.5","text-sm","text-slate-300","hover:bg-slate-700/50","hover:text-lime-300","transition-colors","duration-200"],[1,"border-t","border-white/10","pt-2"],[1,"w-full","flex","items-center","gap-3","px-4","py-2.5","text-sm","text-red-400","font-medium","hover:bg-red-500/10","transition-colors","duration-200",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"],["routerLink","/dashboard",1,"flex","items-center","gap-3","px-4","py-2.5","text-sm","text-slate-300","hover:bg-slate-700/50","hover:text-lime-300","transition-colors","duration-200",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 17 14",1,"w-5","h-5"],["stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M1 1h15M1 7h15M1 13h15"],["routerLink","/dashboard",1,"flex","items-center","p-2","text-slate-200","rounded-lg","hover:bg-gray-700","group"],["routerLink","/login",1,"flex","items-center","p-2","text-slate-200","rounded-lg","hover:bg-gray-700","group"],["routerLink","/register",1,"flex","items-center","p-2","text-slate-200","rounded-lg","hover:bg-gray-700","group"],[1,"block","px-4","py-2","text-sm","text-slate-300","hover:bg-slate-700/80","hover:text-lime-300",3,"click","routerLink"],[1,"w-full","text-left","block","px-4","py-2","text-sm","text-red-400","font-medium","hover:bg-slate-700/80",3,"click"]],template:function(e,i){if(e&1&&(n(0,"header",1,0)(2,"div",2)(3,"a",3),p(4,W,1,2,"img",4)(5,q,2,1,"div",5),n(6,"div",6)(7,"span",7),l(8),r(),n(9,"span",8),l(10,"Plataforma de Cursos"),r()()(),n(11,"nav",9)(12,"a",10),l(13,"Instructores"),r()(),n(14,"div",11),p(15,K,4,1,"a",12),p(16,X,5,1,"a",13),p(17,Y,11,0,"div",14)(18,te,8,4,"div",15),r(),p(19,ie,5,0,"button",16),r()(),n(20,"div",17)(21,"h5",18),l(22,"Men\xFA"),r(),n(23,"button",19),u(),n(24,"svg",20),m(25,"path",21),r(),b(),n(26,"span",22),l(27,"Cerrar men\xFA"),r()(),n(28,"div",23)(29,"ul",24)(30,"li")(31,"a",25)(32,"span",26),l(33,"Inicio"),r()()(),n(34,"li")(35,"a",27)(36,"span",26),l(37,"Instructores"),r()()(),p(38,ne,4,0,"li"),r(),p(39,re,5,0,"div",28)(40,oe,5,1,"div",28),r()()),e&2){let a,c;s(4),g(i.siteLogo()?4:5),s(4),w(" ",i.siteName()," "),s(7),g(!i.isOnAuthPage()&&(((a=i.authService.user())==null?null:a.rol)==="admin"||((a=i.authService.user())==null?null:a.rol)==="instructor")?15:-1),s(),g(!i.isOnAuthPage()&&i.authService.isLoggedIn()?16:-1),s(),g(!i.authService.isLoggedIn()&&!i.isOnAuthPage()?17:i.authService.isLoggedIn()?18:-1),s(2),g(i.isOnAuthPage()?-1:19),s(19),g(((c=i.authService.user())==null?null:c.rol)==="admin"||((c=i.authService.user())==null?null:c.rol)==="instructor"?38:-1),s(),g(!i.authService.isLoggedIn()&&!i.isOnAuthPage()?39:i.authService.isLoggedIn()?40:-1)}},dependencies:[O],encapsulation:2})};export{Q as a};
