import{a as z}from"./chunk-TCGJFX72.js";import{a as te}from"./chunk-UBIS7CDP.js";import{d as O,e as $,f as U,g as X,h as R,j as q,n as J,o as K,p as Q,q as W,r as Y,w as Z,x as ee}from"./chunk-SDJWNAN2.js";import{a as B}from"./chunk-XM5I3GUE.js";import{$ as h,Cb as H,Fb as G,Gb as a,Ha as T,Hb as w,Ib as C,Jb as V,Ma as r,T as k,Xa as L,Y as g,Z as f,_ as x,ec as E,hb as m,ib as c,ja as b,lb as N,mb as j,nb as S,ob as e,pb as n,qb as p,ub as P,wb as y,yb as d}from"./chunk-6JS7X5LE.js";var ie=(i,o)=>o._id;function oe(i,o){i&1&&(e(0,"div",16),p(1,"div",22),n())}function ae(i,o){if(i&1&&(e(0,"div",17),a(1),n()),i&2){let t=d();r(),C(" ",t.success()," ")}}function le(i,o){if(i&1&&(e(0,"div",18),a(1),n()),i&2){let t=d();r(),C(" ",t.error()," ")}}function re(i,o){if(i&1&&a(0),i&2){let t=d().$implicit;C(" ",t.payment_details.paypal_transaction_id," ")}}function se(i,o){i&1&&a(0," N/A ")}function de(i,o){if(i&1){let t=P();e(0,"button",44),y("click",function(){g(t);let s=d().$implicit,u=d(2);return f(u.viewPaymentDetails(s))}),x(),e(1,"svg",45),p(2,"path",46)(3,"path",47),n(),a(4," Ver Detalles "),n()}}function me(i,o){if(i&1){let t=P();e(0,"button",48),y("click",function(){g(t);let s=d().$implicit,u=d(2);return f(u.openCompleteModal(s._id))}),x(),e(1,"svg",45),p(2,"path",49),n(),a(3," Completar "),n()}}function ce(i,o){i&1&&(e(0,"span",43),a(1,"Finalizado"),n())}function pe(i,o){if(i&1&&(e(0,"tr",29)(1,"td",30)(2,"div",31),p(3,"img",32),e(4,"div",33)(5,"div",34),a(6),n(),e(7,"div",35),a(8),n()()()(),e(9,"td",36),a(10),n(),e(11,"td",37),a(12),n(),e(13,"td",38),a(14),n(),e(15,"td",30)(16,"span"),a(17),n()(),e(18,"td",39),m(19,re,1,1)(20,se,1,0),n(),e(21,"td",40),m(22,de,5,0,"button",41),m(23,me,4,0,"button",42),m(24,ce,2,0,"span",43),n()()),i&2){let t=o.$implicit,l=d(2);r(3),S("src",l.getInstructorAvatar(t.instructor),T)("alt",t.instructor.name),r(3),V("",t.instructor.name," ",t.instructor.surname),r(2),w(t.instructor.email),r(2),C(" ",l.formatDate(t.created_by_admin_at||t.createdAt||"")),r(2),C(" ",l.formatCurrency(t.final_amount)),r(2),w(t.payment_method),r(2),G("inline-flex items-center px-3 py-1 rounded-full text-xs font-medium "+l.getStatusBadgeClass(t.status)),r(),C(" ",l.getStatusLabel(t.status)," "),r(2),c(t.payment_method==="paypal"&&(t.payment_details!=null&&t.payment_details.paypal_transaction_id)?19:20),r(3),c(t.status==="pending"?22:-1),r(),c(t.status==="processing"?23:-1),r(),c(t.status==="completed"?24:-1)}}function ue(i,o){if(i&1&&(e(0,"div",19)(1,"div",23)(2,"table",24)(3,"thead",25)(4,"tr")(5,"th",26),a(6,"Instructor"),n(),e(7,"th",26),a(8,"Fecha de Creaci\xF3n"),n(),e(9,"th",26),a(10,"Monto"),n(),e(11,"th",26),a(12,"M\xE9todo"),n(),e(13,"th",26),a(14,"Estado"),n(),e(15,"th",26),a(16,"ID Transacci\xF3n"),n(),e(17,"th",27),a(18,"Acciones"),n()()(),e(19,"tbody",28),N(20,pe,25,15,"tr",29,ie),n()()()()),i&2){let t=d();r(20),j(t.payments())}}function xe(i,o){i&1&&(e(0,"div",20),x(),e(1,"svg",50),p(2,"path",51),n(),h(),e(3,"h3",52),a(4,"No hay pagos"),n(),e(5,"p",53),a(6,"No se encontraron pagos con los filtros aplicados."),n()())}function _e(i,o){if(i&1&&(e(0,"div",67)(1,"span",35),a(2,"Deducciones:"),n(),e(3,"span",85),a(4),n()()),i&2){let t,l=d(2);r(4),C("-",l.formatCurrency((t=l.selectedPayment())==null?null:t.platform_deductions))}}function ye(i,o){i&1&&(e(0,"div",79),p(1,"div",86),e(2,"span",35),a(3,"Desencriptando datos de pago..."),n()())}function ge(i,o){i&1&&(e(0,"div",87),x(),e(1,"svg",100),p(2,"path",101),n(),h(),e(3,"span",102),a(4,"\u2B50 M\xE9todo Preferido por el Instructor"),n()())}function fe(i,o){i&1&&(e(0,"div",89),x(),e(1,"svg",103),p(2,"path",104),n()())}function he(i,o){i&1&&(e(0,"div",90),x(),e(1,"svg",105),p(2,"path",106),n()())}function ve(i,o){if(i&1&&(e(0,"div",109)(1,"div",116),a(2,"ID de Comerciante PayPal"),n(),e(3,"div",117),a(4),n()()),i&2){let t,l=d(4);r(4),C(" ",(t=l.selectedPaymentMethod())==null||t.paymentDetails==null?null:t.paymentDetails.paypal_merchant_id," ")}}function be(i,o){if(i&1){let t=P();e(0,"div",93)(1,"div",107),x(),e(2,"svg",74),p(3,"path",108),n(),a(4," Datos completos disponibles "),n(),h(),e(5,"div",109)(6,"div",110),x(),e(7,"svg",111),p(8,"path",112),n(),a(9," Email de PayPal "),n(),h(),e(10,"div",113),a(11),n(),e(12,"button",114),y("click",function(){let s;g(t);let u=d(3);return f(u.copyToClipboard((s=u.selectedPaymentMethod())==null||s.paymentDetails==null?null:s.paymentDetails.paypal_email))}),x(),e(13,"svg",74),p(14,"path",115),n(),a(15," Copiar Email "),n()(),m(16,ve,5,1,"div",109),n()}if(i&2){let t,l,s=d(3);r(11),C(" ",((t=s.selectedPaymentMethod())==null||t.paymentDetails==null?null:t.paymentDetails.paypal_email)||"No disponible"," "),r(5),c(!((l=s.selectedPaymentMethod())==null||l.paymentDetails==null)&&l.paymentDetails.paypal_merchant_id?16:-1)}}function Ce(i,o){if(i&1&&(e(0,"div",80),m(1,ge,5,0,"div",87),e(2,"div",88),m(3,fe,3,0,"div",89)(4,he,3,0,"div",90),e(5,"div")(6,"span",91),a(7),n(),e(8,"div",92),a(9,"Sistema de pago configurado"),n()()(),m(10,be,17,2,"div",93),e(11,"div",94),x(),e(12,"svg",95),p(13,"path",96),n(),h(),e(14,"div",97)(15,"p",98),a(16,"\u26A0\uFE0F Informaci\xF3n Sensible"),n(),e(17,"p",99),a(18,"Estos datos son confidenciales y est\xE1n desencriptados temporalmente para facilitar el procesamiento del pago."),n()()()()),i&2){let t,l,s,u,v=d(2);r(),c((t=v.selectedPaymentMethod())!=null&&t.preferredMethod?1:-1),r(2),c(((l=v.selectedPaymentMethod())==null?null:l.paymentMethod)==="paypal"?3:4),r(4),w(v.getPaymentMethodLabel(((s=v.selectedPaymentMethod())==null?null:s.paymentMethod)||"other")),r(3),c(((u=v.selectedPaymentMethod())==null?null:u.paymentMethod)==="paypal"&&((u=v.selectedPaymentMethod())!=null&&u.paymentDetails)?10:-1)}}function Pe(i,o){i&1&&(e(0,"div",81),x(),e(1,"svg",50),p(2,"path",118),n(),h(),e(3,"p",5),a(4,"No hay datos de pago configurados"),n()())}function Se(i,o){if(i&1&&(e(0,"div",61)(1,"h4",119),a(2,"Notas"),n(),e(3,"p",35),a(4),n()()),i&2){let t,l=d(2);r(4),w((t=l.selectedPayment())==null?null:t.admin_notes)}}function we(i,o){if(i&1){let t=P();e(0,"div",122)(1,"div",123),a(2,"\u{1F3AB} ID de Transacci\xF3n PayPal"),n(),e(3,"div",124),a(4),n(),e(5,"button",125),y("click",function(){let s;g(t);let u=d(3);return f(u.copyToClipboard((s=u.selectedPayment())==null||s.payment_details==null?null:s.payment_details.paypal_transaction_id))}),x(),e(6,"svg",111),p(7,"path",115),n(),a(8," Copiar ID "),n()()}if(i&2){let t,l=d(3);r(4),C(" ",(t=l.selectedPayment())==null||t.payment_details==null?null:t.payment_details.paypal_transaction_id," ")}}function Ee(i,o){if(i&1&&(e(0,"div",61)(1,"h4",76),x(),e(2,"svg",120),p(3,"path",51),n(),a(4," Informaci\xF3n de la Transacci\xF3n "),n(),h(),e(5,"div",121),m(6,we,9,1,"div",122),n()()),i&2){let t,l=d(2);r(6),c(!((t=l.selectedPayment())==null||t.payment_details==null)&&t.payment_details.paypal_transaction_id?6:-1)}}function Me(i,o){if(i&1){let t=P();e(0,"button",126),y("click",function(){g(t);let s=d(2);return f(s.openProcessModalFromDetails())}),x(),e(1,"svg",127),p(2,"path",128),n(),a(3," Procesar Pago "),n()}}function ke(i,o){if(i&1){let t=P();e(0,"div",21)(1,"div",54)(2,"div",55)(3,"h3",56),a(4,"Detalles del Pago"),n(),e(5,"button",57),y("click",function(){g(t);let s=d();return f(s.closeModals())}),x(),e(6,"svg",58),p(7,"path",59),n()()(),h(),e(8,"div",60)(9,"div",61)(10,"h4",62),a(11,"Instructor"),n(),e(12,"div",63),p(13,"img",64),e(14,"div")(15,"div",65),a(16),n(),e(17,"div",35),a(18),n()()()(),e(19,"div",61)(20,"h4",62),a(21,"Montos"),n(),e(22,"div",66)(23,"div",67)(24,"span",35),a(25,"Total Ganancias:"),n(),e(26,"span",68),a(27),n()(),m(28,_e,5,1,"div",67),e(29,"div",69)(30,"span",70),a(31,"Monto Final:"),n(),e(32,"div",71)(33,"span",72),a(34),n(),e(35,"button",73),y("click",function(){let s;g(t);let u=d();return f(u.copyAmount((s=u.selectedPayment())==null?null:s.final_amount))}),x(),e(36,"svg",74),p(37,"path",75),n()()()()()(),h(),e(38,"div",61)(39,"h4",76),x(),e(40,"svg",77),p(41,"path",78),n(),a(42," \u{1F513} Detalles de M\xE9todo de Pago Desencriptados "),n(),m(43,ye,4,0,"div",79)(44,Ce,19,4,"div",80)(45,Pe,5,0,"div",81),n(),m(46,Se,5,1,"div",61),m(47,Ee,7,1,"div",61),n(),h(),e(48,"div",82)(49,"button",83),y("click",function(){g(t);let s=d();return f(s.closeModals())}),a(50," Cerrar "),n(),m(51,Me,4,0,"button",84),n()()()}if(i&2){let t,l,s,u,v,A,D,I,M,F,_=d();r(13),S("src",_.getInstructorAvatar((t=_.selectedPayment())==null?null:t.instructor),T)("alt",(l=_.selectedPayment())==null||l.instructor==null?null:l.instructor.name),r(3),V("",(s=_.selectedPayment())==null||s.instructor==null?null:s.instructor.name," ",(s=_.selectedPayment())==null||s.instructor==null?null:s.instructor.surname),r(2),w((u=_.selectedPayment())==null||u.instructor==null?null:u.instructor.email),r(9),w(_.formatCurrency((v=_.selectedPayment())==null?null:v.total_earnings)),r(),c(((A=_.selectedPayment())==null?null:A.platform_deductions)>0?28:-1),r(6),w(_.formatCurrency((D=_.selectedPayment())==null?null:D.final_amount)),r(9),c(_.isLoadingPaymentMethod()?43:_.selectedPaymentMethod()?44:45),r(3),c((I=_.selectedPayment())!=null&&I.admin_notes?46:-1),r(),c(!((M=_.selectedPayment())==null||M.payment_details==null)&&M.payment_details.paypal_transaction_id?47:-1),r(4),c(((F=_.selectedPayment())==null?null:F.status)==="pending"?51:-1)}}function Te(i,o){i&1&&(e(0,"span"),a(1,"Procesando..."),n())}function He(i,o){i&1&&(e(0,"span"),a(1,"Procesar Pago"),n())}function Ve(i,o){if(i&1){let t=P();e(0,"div",21)(1,"div",129)(2,"h3",130),a(3,"Procesar Pago"),n(),e(4,"p",131),a(5,' Marca este pago como "En Proceso" e ingresa el ID de transacci\xF3n (opcional). '),n(),e(6,"form",132,0),y("ngSubmit",function(){g(t);let s=H(13),u=H(18),v=d();return f(v.processPayment(s.value,u.value))}),e(8,"div",80)(9,"div")(10,"label",8),a(11," ID de Transacci\xF3n / Referencia (Opcional) "),n(),p(12,"input",133,1),n(),e(14,"div")(15,"label",8),a(16," URL del Comprobante (Opcional) "),n(),p(17,"input",134,2),n()(),e(19,"div",135)(20,"button",136),y("click",function(){g(t);let s=d();return f(s.closeModals())}),a(21," Cancelar "),n(),e(22,"button",137),m(23,Te,2,0,"span")(24,He,2,0,"span"),n()()()()()}if(i&2){let t=d();r(20),S("disabled",t.isProcessing()),r(2),S("disabled",t.isProcessing()),r(),c(t.isProcessing()?23:24)}}function Ae(i,o){i&1&&(e(0,"span"),a(1,"Completando..."),n())}function De(i,o){i&1&&(e(0,"span"),a(1,"Completar Pago"),n())}function Ie(i,o){if(i&1){let t=P();e(0,"div",21)(1,"div",129)(2,"div",138)(3,"div",139),x(),e(4,"svg",140),p(5,"path",108),n()(),h(),e(6,"div",141)(7,"h3",142),a(8," Completar Pago "),n(),e(9,"div",5)(10,"p"),a(11,"\xBFEst\xE1s seguro de que deseas marcar este pago como completado?"),n(),e(12,"p",143),a(13,"Esta acci\xF3n indica que el instructor ya recibi\xF3 el dinero."),n()()()(),e(14,"div",135)(15,"button",144),y("click",function(){g(t);let s=d();return f(s.closeModals())}),a(16," Cancelar "),n(),e(17,"button",145),y("click",function(){g(t);let s=d();return f(s.completePayment())}),m(18,Ae,2,0,"span")(19,De,2,0,"span"),n()()()()}if(i&2){let t=d();r(15),S("disabled",t.isProcessing()),r(2),S("disabled",t.isProcessing()),r(),c(t.isProcessing()?18:19)}}var ne=class i{adminPaymentService=k(te);toast=k(z);payments=this.adminPaymentService.paymentsHistory;isLoading=this.adminPaymentService.isLoadingPaymentsHistory;loadError=this.adminPaymentService.paymentsHistoryError;actionError=b(null);error=E(()=>this.loadError()||this.actionError());success=b(null);pagination=this.adminPaymentService.paymentsPagination;currentPage=E(()=>this.pagination()?.page||1);totalPages=E(()=>this.pagination()?.pages||1);showProcessModal=b(!1);showCompleteModal=b(!1);showDetailsModal=b(!1);selectedPaymentId=b(null);selectedPayment=b(null);selectedPaymentMethod=b(null);isProcessing=b(!1);isLoadingPaymentMethod=b(!1);Math=Math;filterForm=new U({status:new R("all")});ngOnInit(){this.loadPayments()}loadPayments(o=1){let t=this.filterForm.value,l={page:o,limit:20};t.status&&t.status!=="all"&&(l.status=t.status),this.adminPaymentService.loadPaymentsHistory(l).subscribe({error:s=>this.actionError.set(s?.error?.message||"Error al cargar historial de pagos")})}onFilterChange(){this.loadPayments(1)}onPageChange(o){o>=1&&o<=this.totalPages()&&this.loadPayments(o)}viewPaymentDetails(o){this.selectedPayment.set(o),this.showDetailsModal.set(!0),this.loadInstructorPaymentMethodFull(o.instructor._id)}loadInstructorPaymentMethodFull(o){this.isLoadingPaymentMethod.set(!0),this.selectedPaymentMethod.set(null),this.actionError.set(null),this.adminPaymentService.getInstructorPaymentMethodFull(o).subscribe({next:t=>{t.success&&t.data&&this.selectedPaymentMethod.set(t.data),this.isLoadingPaymentMethod.set(!1)},error:t=>{this.actionError.set(t.error?.message||"Error al cargar m\xE9todo de pago"),this.isLoadingPaymentMethod.set(!1)}})}openProcessModal(o){this.selectedPaymentId.set(o),this.showDetailsModal.set(!1),this.showProcessModal.set(!0)}openProcessModalFromDetails(){let o=this.selectedPayment();o&&(this.selectedPaymentId.set(o._id),this.showDetailsModal.set(!1),this.showProcessModal.set(!0))}openCompleteModal(o){this.selectedPaymentId.set(o),this.showCompleteModal.set(!0)}closeModals(){this.showProcessModal.set(!1),this.showCompleteModal.set(!1),this.showDetailsModal.set(!1),this.selectedPaymentId.set(null),this.selectedPayment.set(null),this.selectedPaymentMethod.set(null),this.actionError.set(null)}processPayment(o,t){let l=this.selectedPaymentId();l&&(this.isProcessing.set(!0),this.actionError.set(null),this.adminPaymentService.processPayment(l,{transaction_id:o,receipt_url:t}).subscribe({next:s=>{s.success&&(this.success.set('Pago marcado como "En Proceso" exitosamente'),this.loadPayments(this.currentPage()),this.closeModals(),setTimeout(()=>this.success.set(null),3e3)),this.isProcessing.set(!1)},error:s=>{this.actionError.set(s.error?.message||"Error al procesar el pago"),this.isProcessing.set(!1)}}))}completePayment(){let o=this.selectedPaymentId();o&&(this.isProcessing.set(!0),this.actionError.set(null),this.adminPaymentService.completePayment(o).subscribe({next:t=>{t.success&&(this.success.set("Pago completado exitosamente"),this.loadPayments(this.currentPage()),this.closeModals(),setTimeout(()=>this.success.set(null),3e3)),this.isProcessing.set(!1)},error:t=>{this.actionError.set(t.error?.message||"Error al completar el pago"),this.isProcessing.set(!1)}}))}formatCurrency(o){return new Intl.NumberFormat("es-MX",{style:"currency",currency:"MXN"}).format(o)}formatDate(o){return new Date(o).toLocaleDateString("es-MX",{year:"numeric",month:"short",day:"numeric"})}async copyAmount(o){let t=typeof o=="number"?o.toFixed(2):"0.00";try{await navigator.clipboard.writeText(t),this.toast.success("Monto copiado",`${t} MXN`)}catch(l){console.error("\u274C [AdminPaymentHistory.copyAmount] Error copiando al portapapeles:",l),this.toast.error("No se pudo copiar","Tu navegador no permite el portapapeles")}}getStatusBadgeClass(o){return{pending:"bg-yellow-500/20 text-yellow-300",processing:"bg-blue-500/20 text-blue-300",completed:"bg-green-500/20 text-green-300",failed:"bg-red-500/20 text-red-300",cancelled:"bg-slate-500/20 text-slate-300"}[o]||"bg-slate-500/20 text-slate-300"}getStatusLabel(o){return{pending:"Pendiente",processing:"Procesando",completed:"Completado",failed:"Fallido",cancelled:"Cancelado"}[o]||o}getInstructorAvatar(o){return o?.avatar?`${B.images.user}${o.avatar}`:"https://i.pravatar.cc/128"}getPaymentMethodLabel(o){return{paypal:"PayPal",other:"Otro"}[o]||o}copyToClipboard(o){navigator.clipboard&&navigator.clipboard.writeText(o).then(()=>{this.success.set("Copiado al portapapeles"),setTimeout(()=>this.success.set(null),2e3)})}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=L({type:i,selectors:[["app-admin-payment-history"]],decls:32,vars:9,consts:[["processForm","ngForm"],["transactionId",""],["receiptUrl",""],[1,"space-y-8"],[1,"text-3xl","font-bold","text-slate-100"],[1,"mt-2","text-sm","text-slate-400"],[1,"bg-slate-800/50","rounded-lg","p-6"],[1,"grid","grid-cols-1","md:grid-cols-3","gap-4",3,"formGroup"],[1,"block","text-sm","font-medium","text-slate-300","mb-2"],["formControlName","status",1,"w-full","px-4","py-2","border","border-slate-600","bg-slate-700","text-white","rounded-lg","focus:ring-2","focus:ring-lime-400",3,"change"],["value","all"],["value","pending"],["value","processing"],["value","completed"],["value","failed"],["value","cancelled"],[1,"flex","justify-center","items-center","py-12"],[1,"bg-green-500/10","border","border-green-500/20","text-green-300","px-4","py-3","rounded-lg","text-sm"],[1,"bg-red-500/10","border","border-red-500/20","text-red-300","px-4","py-3","rounded-lg","text-sm"],[1,"bg-slate-800/50","rounded-lg","shadow-md","overflow-hidden"],[1,"bg-slate-800/50","rounded-lg","p-12","text-center"],[1,"fixed","inset-0","bg-black/50","backdrop-blur-sm","flex","items-center","justify-center","z-50","p-4"],[1,"animate-spin","rounded-full","h-12","w-12","border-b-2","border-lime-400"],[1,"overflow-x-auto"],[1,"min-w-full","divide-y","divide-slate-700"],[1,"bg-slate-800"],[1,"px-6","py-3","text-left","text-xs","font-medium","text-slate-400","uppercase"],[1,"px-6","py-3","text-right","text-xs","font-medium","text-slate-400","uppercase"],[1,"bg-slate-800/50","divide-y","divide-slate-700"],[1,"hover:bg-slate-700/50","transition-colors"],[1,"px-6","py-4","whitespace-nowrap"],[1,"flex","items-center"],[1,"h-10","w-10","rounded-full","object-cover","border-2","border-slate-600",3,"src","alt"],[1,"ml-4"],[1,"text-sm","font-medium","text-slate-200"],[1,"text-sm","text-slate-400"],[1,"h-px","w-px","whitespace-nowrap","px-6","py-3","text-sm","text-slate-400"],[1,"px-6","py-4","whitespace-nowrap","text-sm","font-semibold","text-lime-400"],[1,"px-6","py-4","whitespace-nowrap","text-sm","text-slate-300"],[1,"px-6","py-4","whitespace-nowrap","text-sm","text-slate-500","font-mono"],[1,"px-6","py-4","whitespace-nowrap","text-right","text-sm","font-medium"],[1,"inline-flex","items-center","px-3","py-1.5","bg-sky-600","text-white","text-xs","font-medium","rounded-lg","hover:bg-sky-700","transition-colors"],[1,"inline-flex","items-center","px-3","py-1.5","bg-green-600","text-white","text-xs","font-medium","rounded-lg","hover:bg-green-700","transition-colors"],[1,"text-xs","text-slate-500"],[1,"inline-flex","items-center","px-3","py-1.5","bg-sky-600","text-white","text-xs","font-medium","rounded-lg","hover:bg-sky-700","transition-colors",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","mr-1"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M15 12a3 3 0 11-6 0 3 3 0 016 0z"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"],[1,"inline-flex","items-center","px-3","py-1.5","bg-green-600","text-white","text-xs","font-medium","rounded-lg","hover:bg-green-700","transition-colors",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M5 13l4 4L19 7"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"mx-auto","h-12","w-12","text-slate-500"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"],[1,"mt-2","text-sm","font-medium","text-slate-200"],[1,"mt-1","text-sm","text-slate-400"],[1,"bg-slate-800","rounded-lg","shadow-xl","max-w-2xl","w-full","max-h-[90vh]","overflow-y-auto"],[1,"sticky","top-0","bg-slate-800","border-b","border-slate-700","px-6","py-4","flex","items-center","justify-between"],[1,"text-xl","font-semibold","text-slate-100"],[1,"text-slate-400","hover:text-slate-200",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-6","h-6"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M6 18L18 6M6 6l12 12"],[1,"p-6","space-y-6"],[1,"bg-slate-900/50","rounded-lg","p-4"],[1,"text-sm","font-medium","text-slate-300","mb-3"],[1,"flex","items-center","gap-4"],[1,"h-12","w-12","rounded-full","object-cover","border-2","border-slate-600",3,"src","alt"],[1,"text-base","font-medium","text-slate-100"],[1,"space-y-2"],[1,"flex","justify-between"],[1,"text-sm","font-medium","text-slate-100"],[1,"flex","justify-between","pt-2","border-t","border-slate-700","items-center","gap-2"],[1,"text-base","font-medium","text-slate-200"],[1,"flex","items-center","gap-2"],[1,"text-base","font-bold","text-lime-400"],["title","Copiar monto",1,"inline-flex","items-center","justify-center","p-1","rounded-md","bg-slate-700/30","hover:bg-slate-700/50","text-slate-200",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M8 7V3a1 1 0 011-1h8a1 1 0 011 1v8a1 1 0 01-1 1h-4m-6 8H5a2 2 0 01-2-2V9a2 2 0 012-2h6m4 10v2m0-6v2"],[1,"text-sm","font-medium","text-slate-300","mb-3","flex","items-center","gap-2"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","text-lime-400"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"],[1,"flex","flex-col","items-center","justify-center","py-8","gap-3"],[1,"space-y-4"],[1,"text-center","py-6"],[1,"sticky","bottom-0","bg-slate-800","border-t","border-slate-700","px-6","py-4","flex","gap-3"],[1,"flex-1","px-4","py-2","bg-slate-700","text-slate-300","rounded-lg","hover:bg-slate-600","font-medium","transition-colors",3,"click"],[1,"flex-1","px-4","py-2","bg-blue-600","text-white","rounded-lg","hover:bg-blue-700","font-medium","transition-colors","flex","items-center","justify-center","gap-2"],[1,"text-sm","font-medium","text-red-400"],[1,"animate-spin","rounded-full","h-10","w-10","border-b-2","border-lime-400"],[1,"bg-lime-500/10","border","border-lime-500/30","rounded-lg","p-3","flex","items-center","gap-2"],[1,"flex","items-center","gap-3"],[1,"h-12","w-12","bg-blue-600","rounded-lg","flex","items-center","justify-center","shadow-lg"],[1,"h-12","w-12","bg-emerald-600","rounded-lg","flex","items-center","justify-center","shadow-lg"],[1,"text-lg","font-semibold","text-slate-100"],[1,"text-xs","text-slate-400"],[1,"bg-blue-900/20","border-2","border-blue-500/40","rounded-xl","p-4","space-y-3"],[1,"bg-orange-900/20","border","border-orange-500/30","rounded-lg","p-3","flex","items-start","gap-2"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","text-orange-400","flex-shrink-0","mt-0.5"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"],[1,"text-xs","text-orange-300"],[1,"font-medium"],[1,"mt-1","text-orange-300/80"],["fill","currentColor","viewBox","0 0 20 20",1,"w-4","h-4","text-lime-400"],["d","M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"],[1,"text-xs","font-medium","text-lime-300"],["fill","currentColor","viewBox","0 0 24 24",1,"h-7","w-7","text-white"],["d","M20.067 8.478c.492.88.556 2.014.3 3.327-.74 3.806-3.276 5.12-6.514 5.12h-.5a.805.805 0 00-.794.68l-.04.22-.63 3.993-.028.15a.804.804 0 01-.794.68H7.722a.483.483 0 01-.477-.558L9.344 7.5h4.831c1.403 0 2.632.114 3.612.339 1.14.262 1.963.681 2.28 1.639z"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"h-7","w-7","text-white"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M3 10h18M7 15h1m4 0h1m-7 4h12a3 3 0 003-3V8a3 3 0 00-3-3H6a3 3 0 00-3 3v8a3 3 0 003 3z"],[1,"flex","items-center","gap-2","text-blue-300","text-sm","font-medium","mb-3"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"],[1,"bg-slate-800/70","rounded-lg","p-4","border","border-blue-500/20"],[1,"text-xs","text-slate-400","mb-2","flex","items-center","gap-1"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-3","h-3"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"],[1,"text-base","font-mono","font-bold","text-blue-200","bg-blue-950/50","px-3","py-2","rounded-lg","break-all"],[1,"mt-3","w-full","px-3","py-2","bg-blue-600/80","hover:bg-blue-600","text-white","text-xs","font-medium","rounded-lg","transition-colors","flex","items-center","justify-center","gap-2",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"],[1,"text-xs","text-slate-400","mb-2"],[1,"text-sm","font-mono","text-blue-200","bg-blue-950/50","px-3","py-2","rounded-lg","break-all"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"],[1,"text-sm","font-medium","text-slate-300","mb-2"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","text-sky-400"],[1,"space-y-3"],[1,"bg-slate-800/70","rounded-lg","p-3","border","border-sky-500/20"],[1,"text-xs","text-slate-400","mb-1"],[1,"text-sm","font-mono","text-sky-200","bg-sky-950/30","px-3","py-2","rounded","break-all"],[1,"mt-2","text-xs","text-sky-400","hover:text-sky-300","flex","items-center","gap-1",3,"click"],[1,"flex-1","px-4","py-2","bg-blue-600","text-white","rounded-lg","hover:bg-blue-700","font-medium","transition-colors","flex","items-center","justify-center","gap-2",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"],[1,"bg-slate-800","rounded-lg","shadow-xl","max-w-md","w-full","p-6","border","border-slate-700"],[1,"text-xl","font-semibold","text-slate-100","mb-4"],[1,"text-sm","text-slate-400","mb-4"],[3,"ngSubmit"],["type","text","placeholder","TXN123456 o referencia",1,"w-full","px-4","py-2","border","border-slate-600","bg-slate-700","text-white","rounded-lg","focus:ring-2","focus:ring-blue-400","focus:outline-none"],["type","url","placeholder","https://...",1,"w-full","px-4","py-2","border","border-slate-600","bg-slate-700","text-white","rounded-lg","focus:ring-2","focus:ring-blue-400","focus:outline-none"],[1,"flex","gap-3","mt-6"],["type","button",1,"flex-1","px-4","py-2","bg-slate-700","text-slate-300","rounded-lg","hover:bg-slate-600","font-medium","transition-colors","disabled:opacity-50",3,"click","disabled"],["type","submit",1,"flex-1","px-4","py-2","bg-blue-600","text-white","rounded-lg","hover:bg-blue-700","font-medium","transition-colors","disabled:opacity-50",3,"disabled"],[1,"flex","items-start","mb-4"],[1,"flex-shrink-0"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"h-6","w-6","text-green-400"],[1,"ml-3","flex-1"],[1,"text-lg","font-medium","text-slate-100"],[1,"mt-2","font-medium","text-slate-300"],[1,"flex-1","px-4","py-2","bg-slate-700","text-slate-300","rounded-lg","hover:bg-slate-600","font-medium","transition-colors","disabled:opacity-50",3,"click","disabled"],[1,"flex-1","px-4","py-2","bg-green-600","text-white","rounded-lg","hover:bg-green-700","font-medium","transition-colors","disabled:opacity-50",3,"click","disabled"]],template:function(t,l){t&1&&(e(0,"div",3)(1,"div")(2,"h1",4),a(3,"Historial de Pagos"),n(),e(4,"p",5),a(5,"Revisa todos los pagos procesados en la plataforma."),n()(),e(6,"div",6)(7,"form",7)(8,"div")(9,"label",8),a(10,"Estado del Pago"),n(),e(11,"select",9),y("change",function(){return l.onFilterChange()}),e(12,"option",10),a(13,"Todos"),n(),e(14,"option",11),a(15,"Pendiente"),n(),e(16,"option",12),a(17,"Procesando"),n(),e(18,"option",13),a(19,"Completado"),n(),e(20,"option",14),a(21,"Fallido"),n(),e(22,"option",15),a(23,"Cancelado"),n()()()()(),m(24,oe,2,0,"div",16),m(25,ae,2,1,"div",17),m(26,le,2,1,"div",18),m(27,ue,22,0,"div",19),m(28,xe,7,0,"div",20),m(29,ke,52,12,"div",21),m(30,Ve,25,3,"div",21),m(31,Ie,20,3,"div",21),n()),t&2&&(r(7),S("formGroup",l.filterForm),r(17),c(l.isLoading()?24:-1),r(),c(l.success()?25:-1),r(),c(l.error()?26:-1),r(),c(!l.isLoading()&&l.payments().length>0?27:-1),r(),c(!l.isLoading()&&l.payments().length===0?28:-1),r(),c(l.showDetailsModal()&&l.selectedPayment()?29:-1),r(),c(l.showProcessModal()?30:-1),r(),c(l.showCompleteModal()?31:-1))},dependencies:[ee,q,W,Y,Q,O,$,K,J,Z,X],encapsulation:2})};export{ne as a};
