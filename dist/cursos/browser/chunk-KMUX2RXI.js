import{a as H}from"./chunk-KBA3WCNC.js";import{a as G}from"./chunk-RHIE2QCX.js";import{a as ee}from"./chunk-6Z75774O.js";import{a as B}from"./chunk-OSP47CNG.js";import{b as A}from"./chunk-EU5OEAP5.js";import{f as I}from"./chunk-UKUKXRH6.js";import{a as L}from"./chunk-TCGJFX72.js";import{b as te,d as ie,i as ne,w as oe}from"./chunk-SDJWNAN2.js";import{a as F}from"./chunk-J56UX4WA.js";import{$ as _,Ac as z,Eb as E,Gb as s,Ha as V,Hb as k,Ib as v,Jb as q,Jc as Z,Lb as $,Ma as a,Mb as J,Nb as K,T as b,Ub as Q,Vb as M,Xa as T,Y as f,Z as g,_ as u,_b as S,ac as j,ea as U,ec as x,hb as m,hc as N,ib as p,ic as D,ja as P,kb as R,lb as X,mb as W,nb as w,ob as n,pb as o,qb as l,ub as y,wb as C,wc as Y,yb as d}from"./chunk-6JS7X5LE.js";var ae=t=>["/course-detail",t],ce=()=>[1,2,3,4,5];function me(t,i){t&1&&(n(0,"div",1),u(),n(1,"svg",22),l(2,"path",23),o(),s(3," Comprado "),o())}function pe(t,i){if(t&1&&(n(0,"div",6)(1,"div",24),l(2,"div",25),n(3,"div",26),u(),n(4,"svg",27),l(5,"path",28),o(),s(6),o()()()),t&2){let e=d();a(6),v(" -",e.discountPct(),"% ")}}function ue(t,i){if(t&1&&(n(0,"div",7)(1,"span",29),u(),n(2,"svg",30),l(3,"path",31),o(),s(4),o()()),t&2){let e=d();a(4),v(" ",e.category()," ")}}function xe(t,i){if(t&1&&(n(0,"div",11),u(),n(1,"svg",32),l(2,"path",33),o(),_(),n(3,"span",34),s(4),o()()),t&2){let e=d();a(4),k(e.instructor())}}function ve(t,i){t&1&&(u(),n(0,"svg",38),l(1,"path",41),o())}function fe(t,i){t&1&&(n(0,"div",39),u(),n(1,"svg",42),l(2,"path",41),o(),n(3,"svg",43),l(4,"path",41),o()())}function ge(t,i){t&1&&(u(),n(0,"svg",40),l(1,"path",41),o())}function Ce(t,i){if(t&1&&m(0,ve,2,0,":svg:svg",38)(1,fe,5,0,"div",39)(2,ge,2,0,":svg:svg",40),t&2){let e=i.$implicit,r=d(2);p(e<=r.Math.floor(+r.rating())?0:e===r.Math.ceil(+r.rating())&&+r.rating()%1!==0?1:2)}}function he(t,i){if(t&1&&(n(0,"span",44),s(1,"\u2022"),o(),n(2,"span",45),s(3),o()),t&2){let e=d(2);a(3),v("(",e.reviews(),")")}}function _e(t,i){if(t&1&&(n(0,"div",12)(1,"div",35),X(2,Ce,3,1,null,null,R),o(),n(4,"div",36)(5,"span",37),s(6),o(),m(7,he,4,1),o()()),t&2){let e=d();a(2),W(Q(2,ce)),a(4),k(e.rating()),a(),p(e.reviews()>0?7:-1)}}function be(t,i){t&1&&(n(0,"span",16),s(1," \u{1F381} GRATUITO "),o())}function we(t,i){if(t&1&&(n(0,"span",47),s(1),S(2,"mxnCurrency"),o()),t&2){let e=d(2);a(),v(" ",j(2,1,e.priceOriginal(),e.currencyService.selectedCurrencyCode())," MXN ")}}function ye(t,i){if(t&1&&(n(0,"div",17)(1,"span",46),s(2),S(3,"mxnCurrency"),o(),m(4,we,3,4,"span",47),o()),t&2){let e=d();a(2),v(" ",j(3,2,e.priceCurrent(),e.currencyService.selectedCurrencyCode())," MXN "),a(2),p(e.hasDiscount()?4:-1)}}function Se(t,i){if(t&1&&(n(0,"a",19)(1,"span",48),u(),n(2,"svg",49),l(3,"path",50),o(),s(4," Ver Curso "),o(),_(),l(5,"div",51),o()),t&2){let e=d();w("routerLink",M(1,ae,e.slug()))}}function je(t,i){if(t&1){let e=y();n(0,"button",52),C("click",function(){f(e);let c=d();return g(c.buyNow())}),u(),n(1,"svg",53),l(2,"path",54),o(),_(),n(3,"div",55)(4,"span",56),s(5),S(6,"mxnCurrency"),o()(),l(7,"div",57),o()}if(t&2){let e=d();a(5),v("Comprar - ",j(6,1,e.price(),e.currencyService.selectedCurrencyCode())," MXN")}}var re=class t{buyNowClick=N();Math=Math;course=D.required();purchasesService=b(B);authService=b(A);toast=b(L);currencyService=b(G);galeria=ee.images.course;buildImage(i){if(!i)return"https://picsum.photos/seed/course-card/640/360";let e=String(i).trim();return/^https?:\/\//i.test(e)?e:(this.galeria.endsWith("/")?this.galeria:this.galeria+"/")+encodeURIComponent(e)}title=x(()=>this.course()?.title??"");slug=x(()=>this.course()?.slug??"");courseId=x(()=>this.course()?._id??"");isLink=x(()=>!!this.slug());coverUrl=x(()=>{let e=this.course().imagen||null;return this.buildImage(e)});category=x(()=>{let i=this.course().categorie;return typeof i=="string"?void 0:i?.title??void 0});instructor=x(()=>{let i=this.course().user;return(i&&typeof i=="object"?[i.name,i.surname].filter(Boolean).join(" "):"")||void 0});priceOriginal=x(()=>Number(this.course().price_mxn??0));priceCurrent=x(()=>Number(this.course().final_price_mxn??this.priceOriginal()));hasDiscount=x(()=>!!this.course().discount_active&&this.priceCurrent()<this.priceOriginal());discountPct=x(()=>{let i=this.priceOriginal(),e=this.priceCurrent();return!i||!(e<i)?null:Math.round((1-e/i)*100)});rating=x(()=>String(this.course().AVG_RATING??""));reviews=x(()=>Number(this.course().N_REVIEWS??0));isPurchased=x(()=>{let i=this.courseId();return i?this.purchasesService.isPurchased(i):!1});price=x(()=>this.priceCurrent());buyNow(){if(!(!this.courseId()||this.isPurchased())){if(!this.authService.isLoggedIn()){this.toast.error("Debes iniciar sesi\xF3n para comprar");return}this.buyNowClick.emit(this.course())}}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=T({type:t,selectors:[["course-card"]],inputs:{course:[1,"course"]},outputs:{buyNowClick:"buyNowClick"},decls:23,vars:15,consts:[[1,"group","relative","h-full","flex","flex-col","overflow-hidden","rounded-2xl","border","border-white/10","bg-gradient-to-br","from-slate-900/90","to-slate-800/90","backdrop-blur-sm","transition-all","duration-300","hover:border-lime-400/40","hover:shadow-xl","hover:shadow-lime-500/10","hover:-translate-y-1"],[1,"absolute","top-3","left-3","z-20","px-3","py-1.5","rounded-xl","text-xs","font-bold","bg-gradient-to-r","from-emerald-500","to-teal-500","text-white","shadow-lg","flex","items-center","gap-1.5","backdrop-blur-sm"],[1,"relative","overflow-hidden"],[1,"absolute","inset-0","bg-gradient-to-t","from-slate-900","via-slate-900/20","to-transparent","opacity-60","z-10","group-hover:opacity-40","transition-opacity","duration-300"],[1,"aspect-video","overflow-hidden"],["loading","lazy","decoding","async",1,"w-full","h-full","object-cover","transition-transform","duration-500","group-hover:scale-110",3,"src","alt"],[1,"absolute","top-3","right-3","z-20"],[1,"absolute","bottom-3","left-3","z-20"],[1,"flex-1","flex","flex-col","p-5","space-y-3"],[1,"block","group/title",3,"routerLink"],[1,"text-base","font-bold","text-white","leading-tight","line-clamp-2","group-hover/title:text-lime-300","transition-colors","duration-200"],[1,"flex","items-center","gap-2","text-xs","text-white/60"],[1,"flex","items-center","gap-2"],[1,"flex-1"],[1,"h-px","bg-gradient-to-r","from-transparent","via-white/10","to-transparent"],[1,"flex","items-center","justify-between"],[1,"inline-flex","items-center","px-3","py-1.5","text-sm","font-bold","text-green-400","bg-green-500/10","border","border-green-500/30","rounded-lg"],[1,"flex","items-baseline","gap-2"],[1,"pt-2"],[1,"group/btn","relative","block","w-full","text-center","px-4","py-3","rounded-xl","bg-gradient-to-r","from-emerald-500/20","to-teal-500/20","border","border-emerald-500/40","text-emerald-400","font-bold","text-sm","overflow-hidden","hover:from-emerald-500/30","hover:to-teal-500/30","hover:border-emerald-400/60","transition-all","duration-300",3,"routerLink"],[1,"group/btn","relative","w-full","px-4","py-3","rounded-xl","font-bold","text-sm","bg-gradient-to-r","from-lime-400","to-emerald-400","text-slate-900","overflow-hidden","hover:from-lime-300","hover:to-emerald-300","hover:shadow-lg","hover:shadow-lime-500/30","active:scale-95","transition-all","duration-200","flex","items-center","justify-center","gap-2"],[1,"absolute","inset-x-0","top-0","h-px","bg-gradient-to-r","from-transparent","via-lime-400/0","to-transparent","group-hover:via-lime-400/60","transition-all","duration-300"],["fill","currentColor","viewBox","0 0 20 20",1,"w-3.5","h-3.5"],["fill-rule","evenodd","d","M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z","clip-rule","evenodd"],[1,"relative"],[1,"absolute","inset-0","rounded-full","bg-lime-400","animate-ping","opacity-75"],[1,"relative","px-3","py-1.5","rounded-full","text-xs","font-black","bg-gradient-to-br","from-lime-400","to-yellow-400","text-slate-900","shadow-lg","flex","items-center","gap-1"],["fill","currentColor","viewBox","0 0 20 20",1,"w-3","h-3"],["fill-rule","evenodd","d","M12.395 2.553a1 1 0 00-1.45-.385c-.345.23-.614.558-.822.88-.214.33-.403.713-.57 1.116-.334.804-.614 1.768-.84 2.734a31.365 31.365 0 00-.613 3.58 2.64 2.64 0 01-.945-1.067c-.328-.68-.398-1.534-.398-2.654A1 1 0 005.05 6.05 6.981 6.981 0 003 11a7 7 0 1011.95-4.95c-.592-.591-.98-.985-1.348-1.467-.363-.476-.724-1.063-1.207-2.03zM12.12 15.12A3 3 0 017 13s.879.5 2.5.5c0-1 .5-4 1.25-4.5.5 1 .786 1.293 1.371 1.879A2.99 2.99 0 0113 13a2.99 2.99 0 01-.879 2.121z","clip-rule","evenodd"],[1,"inline-flex","items-center","gap-1.5","px-3","py-1.5","rounded-lg","bg-slate-900/80","backdrop-blur-md","border","border-white/10","text-xs","font-medium","text-white/90"],["fill","currentColor","viewBox","0 0 20 20",1,"w-3.5","h-3.5","text-lime-400"],["d","M2 6a2 2 0 012-2h5l2 2h5a2 2 0 012 2v6a2 2 0 01-2 2H4a2 2 0 01-2-2V6z"],["fill","currentColor","viewBox","0 0 20 20",1,"w-4","h-4","text-lime-400/60"],["fill-rule","evenodd","d","M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z","clip-rule","evenodd"],[1,"truncate"],[1,"flex","items-center","gap-0.5"],[1,"flex","items-center","gap-1","text-xs"],[1,"font-bold","text-amber-400"],["viewBox","0 0 20 20","fill","currentColor",1,"w-4","h-4","text-amber-400"],[1,"relative","w-4","h-4"],["viewBox","0 0 20 20","fill","currentColor",1,"w-4","h-4","text-slate-600"],["d","M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"],["viewBox","0 0 20 20","fill","currentColor",1,"absolute","inset-0","w-4","h-4","text-slate-600"],["viewBox","0 0 20 20","fill","currentColor",1,"absolute","inset-0","w-4","h-4","text-amber-400",2,"clip-path","inset(0 50% 0 0)"],[1,"text-white/40"],[1,"text-white/50"],[1,"text-2xl","font-black","text-transparent","bg-clip-text","bg-gradient-to-r","from-lime-400","to-emerald-400"],[1,"text-sm","text-white/40","line-through","font-medium"],[1,"relative","z-10","flex","items-center","justify-center","gap-2"],["fill","currentColor","viewBox","0 0 20 20",1,"w-5","h-5"],["d","M10.394 2.08a1 1 0 00-.788 0l-7 3a1 1 0 000 1.84L5.25 8.051a.999.999 0 01.356-.257l4-1.714a1 1 0 11.788 1.838L7.667 9.088l1.94.831a1 1 0 00.787 0l7-3a1 1 0 000-1.838l-7-3zM3.31 9.397L5 10.12v4.102a8.969 8.969 0 00-1.05-.174 1 1 0 01-.89-.89 11.115 11.115 0 01.25-3.762zM9.3 16.573A9.026 9.026 0 007 14.935v-3.957l1.818.78a3 3 0 002.364 0l5.508-2.361a11.026 11.026 0 01.25 3.762 1 1 0 01-.89.89 8.968 8.968 0 00-5.35 2.524 1 1 0 01-1.4 0zM6 18a1 1 0 001-1v-2.065a8.935 8.935 0 00-2-.712V17a1 1 0 001 1z"],[1,"absolute","inset-0","-translate-x-full","group-hover/btn:translate-x-full","bg-gradient-to-r","from-transparent","via-white/10","to-transparent","transition-transform","duration-700","ease-out"],[1,"group/btn","relative","w-full","px-4","py-3","rounded-xl","font-bold","text-sm","bg-gradient-to-r","from-lime-400","to-emerald-400","text-slate-900","overflow-hidden","hover:from-lime-300","hover:to-emerald-300","hover:shadow-lg","hover:shadow-lime-500/30","active:scale-95","transition-all","duration-200","flex","items-center","justify-center","gap-2",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","relative","z-10"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2.5","d","M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293 2.293c-.63.63-.184 1.707.707 1.707H17m0 0a2 2 0 100 4 2 2 0 000-4zm-8 2a2 2 0 11-4 0 2 2 0 014 0z"],[1,"flex","flex-col","items-center","leading-none"],[1,"relative","z-10","text-sm","font-bold"],[1,"absolute","inset-0","-translate-x-full","group-hover/btn:translate-x-full","bg-gradient-to-r","from-transparent","via-white/30","to-transparent","transition-transform","duration-500","ease-out"]],template:function(e,r){e&1&&(n(0,"div",0),m(1,me,4,0,"div",1),n(2,"div",2),l(3,"div",3),n(4,"div",4),l(5,"img",5),o(),m(6,pe,7,1,"div",6),m(7,ue,5,1,"div",7),o(),n(8,"div",8)(9,"a",9)(10,"h3",10),s(11),o()(),m(12,xe,5,1,"div",11),m(13,_e,8,3,"div",12),l(14,"div",13)(15,"div",14),n(16,"div",15),m(17,be,2,0,"span",16)(18,ye,5,5,"div",17),o(),n(19,"div",18),m(20,Se,6,3,"a",19)(21,je,8,4,"button",20),o()(),l(22,"div",21),o()),e&2&&(a(),p(r.isPurchased()?1:-1),a(4),E("opacity-50",r.isPurchased()),w("src",r.coverUrl(),V)("alt",r.title()),a(),p(r.hasDiscount()&&!r.isPurchased()?6:-1),a(),p(r.category()?7:-1),a(2),w("routerLink",M(13,ae,r.slug())),a(2),v(" ",r.title()," "),a(),p(r.instructor()?12:-1),a(),p(r.rating()?13:-1),a(4),p(r.course().isFree||r.priceCurrent()===0?17:18),a(3),p(r.isPurchased()?20:21))},dependencies:[z,I,H],encapsulation:2,changeDetection:0})};var O=t=>["/project-detail",t];function Me(t,i){t&1&&(n(0,"div",1),u(),n(1,"svg",22),l(2,"path",23),o(),s(3," Comprado "),o())}function ke(t,i){if(t&1&&(n(0,"div",6)(1,"div",24),l(2,"div",25),n(3,"div",26),u(),n(4,"svg",27),l(5,"path",28),o(),s(6),o()()()),t&2){let e,r=d();a(6),q(" -",(e=r.project().discount_active)==null?null:e.discount,"",((e=r.project().discount_active)==null?null:e.type_discount)===1?"%":""," ")}}function Ee(t,i){t&1&&(n(0,"div",7)(1,"div",24),l(2,"div",29),u(),n(3,"svg",30),l(4,"path",31),o()()())}function Ne(t,i){if(t&1&&(n(0,"div",8)(1,"span",32),u(),n(2,"svg",33),l(3,"path",34),o(),s(4),o()()),t&2){let e,r=d();a(4),v(" ",(e=r.project().categorie)==null?null:e.title," ")}}function Pe(t,i){if(t&1&&(n(0,"div",12),u(),n(1,"svg",35),l(2,"path",36),o(),_(),n(3,"span",37),s(4),o()()),t&2){let e=d();a(4),k(e.instructor())}}function Ve(t,i){if(t&1&&(n(0,"p",13),s(1),o()),t&2){let e=d();a(),v(" ",e.project().subtitle," ")}}function Te(t,i){t&1&&(n(0,"span",17),s(1," \u{1F381} GRATUITO "),o())}function De(t,i){if(t&1&&(n(0,"span",38),s(1),S(2,"mxnCurrency"),o(),n(3,"span",39),s(4),S(5,"mxnCurrency"),o()),t&2){let e=d(2);a(),v(" ",j(2,2,e.project().final_price_mxn,e.currencyService.selectedCurrencyCode())," MXN "),a(3),v(" ",j(5,5,e.project().price_mxn,e.currencyService.selectedCurrencyCode())," MXN ")}}function ze(t,i){if(t&1&&(n(0,"span",38),s(1),S(2,"mxnCurrency"),o()),t&2){let e=d(2);a(),v(" ",j(2,1,e.project().price_mxn,e.currencyService.selectedCurrencyCode())," MXN ")}}function Ie(t,i){if(t&1&&(n(0,"div",18),m(1,De,6,8)(2,ze,3,4,"span",38),o()),t&2){let e=d();a(),p(e.project().discount_active&&e.project().final_price_mxn!==void 0?1:2)}}function Le(t,i){if(t&1){let e=y();n(0,"button",51),C("click",function(c){f(e);let h=d(2);return g(h.onOpenVideo(c))}),n(1,"span",52),u(),n(2,"svg",42),l(3,"path",31),o(),_(),n(4,"span",53),s(5,"Video"),o()(),l(6,"div",44),o()}}function Be(t,i){if(t&1){let e=y();n(0,"button",54),C("click",function(c){f(e);let h=d(2);return g(h.openNotesModal(c))}),u(),n(1,"svg",47),l(2,"path",55),o()()}if(t&2){let e=d(2);E("ring-1",e.project().admin_notes),w("title",e.isAdmin()?"Agregar nota":"Ver notas")}}function Ae(t,i){if(t&1){let e=y();n(0,"div",20)(1,"a",40),C("click",function(c){return f(e),g(c.stopPropagation())}),n(2,"span",41),u(),n(3,"svg",42),l(4,"path",43),o(),s(5," Ver Proyecto "),o(),_(),l(6,"div",44),o(),m(7,Le,7,0,"button",45),n(8,"a",46),C("click",function(c){return f(e),g(c.stopPropagation())}),u(),n(9,"svg",47),l(10,"path",48)(11,"path",49),o()(),m(12,Be,3,3,"button",50),o()}if(t&2){let e=d();a(),w("routerLink",M(4,O,e.project()._id)),a(6),p(e.project().url_video?7:-1),a(),w("routerLink",M(6,O,e.project()._id)),a(4),p(e.canManageNotes()?12:-1)}}function Ge(t,i){if(t&1){let e=y();n(0,"button",51),C("click",function(c){f(e);let h=d(2);return g(h.onOpenVideo(c))}),n(1,"span",52),u(),n(2,"svg",42),l(3,"path",31),o(),_(),n(4,"span",53),s(5,"Vista previa"),o()(),l(6,"div",44),o()}}function He(t,i){if(t&1){let e=y();n(0,"div",20)(1,"button",56),C("click",function(c){f(e);let h=d();return g(h.buyNow(c))}),u(),n(2,"svg",57),l(3,"path",58),o(),_(),n(4,"div",59)(5,"span",60),s(6,"Comprar"),o()(),l(7,"div",61),o(),m(8,Ge,7,0,"button",45),n(9,"a",46),C("click",function(c){return f(e),g(c.stopPropagation())}),u(),n(10,"svg",47),l(11,"path",48)(12,"path",49),o()()()}if(t&2){let e=d();a(8),p(e.project().url_video?8:-1),a(),w("routerLink",M(2,O,e.project()._id))}}function Fe(t,i){if(t&1){let e=y();n(0,"textarea",81),K("ngModelChange",function(c){f(e);let h=d(2);return J(h.noteText,c)||(h.noteText=c),g(c)}),o()}if(t&2){let e=d(2);$("ngModel",e.noteText)}}function Oe(t,i){if(t&1&&(n(0,"div",76),s(1),o()),t&2){let e=d(2);a(),v(" ",e.project().admin_notes||"Sin notas"," ")}}function Ue(t,i){if(t&1&&(n(0,"p",77),s(1),S(2,"date"),o()),t&2){let e=d(2);a(),v("\xDAltima actualizaci\xF3n: ",j(2,1,e.project().updatedAt,"short"))}}function Re(t,i){t&1&&(u(),n(0,"svg",83),l(1,"path",84),o())}function Xe(t,i){if(t&1){let e=y();n(0,"button",82),C("click",function(){f(e);let c=d(2);return g(c.saveNote())}),s(1),m(2,Re,2,0,":svg:svg",83),o()}if(t&2){let e=d(2);w("disabled",e.isSavingNote()),a(),v(" ",e.isSavingNote()?"Guardando...":"Guardar Nota"," "),a(),p(e.isSavingNote()?-1:2)}}function We(t,i){if(t&1){let e=y();n(0,"div",62),C("click",function(){f(e);let c=d();return g(c.closeNotesModal())}),o(),n(1,"div",63)(2,"div",64),C("click",function(c){return f(e),g(c.stopPropagation())}),n(3,"div",65)(4,"h3",66),u(),n(5,"svg",67),l(6,"path",68),o(),s(7),o(),_(),n(8,"button",69),C("click",function(){f(e);let c=d();return g(c.closeNotesModal())}),u(),n(9,"svg",70),l(10,"path",71),o()()(),_(),n(11,"div",72)(12,"div",73)(13,"p",74),s(14),o()(),m(15,Fe,1,1,"textarea",75)(16,Oe,2,1,"div",76),m(17,Ue,3,4,"p",77),o(),n(18,"div",78)(19,"button",79),C("click",function(){f(e);let c=d();return g(c.closeNotesModal())}),s(20),o(),m(21,Xe,3,3,"button",80),o()()()}if(t&2){let e=d();a(7),v(" ",e.isAdmin()?"Nota de Administrador":"Notas del Proyecto"," "),a(7),k(e.isAdmin()?"Agregar una nota privada para este proyecto en estado borrador.":"Nota del administrador sobre este proyecto."),a(),p(e.isAdmin()?15:16),a(2),p(e.project().updatedAt?17:-1),a(3),v(" ",e.isAdmin()?"Cancelar":"Cerrar"," "),a(),p(e.isAdmin()?21:-1)}}var le=class t{project=D.required();openVideo=new U;buyNowClick=N();openDetail=N();purchasesService=b(B);authService=b(A);toast=b(L);currencyService=b(G);http=b(Z);showNotesModal=P(!1);noteText=P("");isSavingNote=P(!1);imageUrl=x(()=>{let i=this.project();return i?.imagen?`${F.images.project}${i.imagen}`:"https://via.placeholder.com/400x250.png?text=Proyecto"});instructor=x(()=>{let i=this.project()?.user;return(i&&typeof i=="object"?[i.name,i.surname].filter(Boolean).join(" "):"")||void 0});isPurchased=x(()=>{let i=this.project();return i?._id?this.purchasesService.isPurchased(i._id):!1});price=x(()=>{let i=this.project();return i?.discount_active&&i?.final_price_mxn!==void 0?i.final_price_mxn:i?.price_mxn||0});isDraft=x(()=>this.project()?.state===1);isAdmin=x(()=>this.authService.user()?.rol==="admin");isOwner=x(()=>{let i=this.project(),e=this.authService.user();return!i?.user||!e?!1:(typeof i.user=="string"?i.user:i.user?._id)===e._id});canManageNotes=x(()=>(this.isAdmin()||this.isOwner())&&this.isDraft());buyNow(i){i.stopPropagation(),i.preventDefault();let e=this.project();if(!(!e?._id||this.isPurchased())){if(!this.authService.isLoggedIn()){this.toast.error("Debes iniciar sesi\xF3n para comprar");return}this.buyNowClick.emit(e)}}onOpenVideo(i){i.preventDefault(),i.stopPropagation();let e=this.project();e?.url_video&&this.openVideo.emit(e.url_video)}onOpenDetail(i){i.preventDefault(),i.stopPropagation();let e=this.project();e&&this.openDetail.emit(e)}openNotesModal(i){i.preventDefault(),i.stopPropagation(),this.project()?.admin_notes?this.noteText.set(this.project().admin_notes||""):this.noteText.set(""),this.showNotesModal.set(!0)}closeNotesModal(){this.showNotesModal.set(!1),this.noteText.set("")}saveNote(){let i=this.project();i?._id&&(this.isSavingNote.set(!0),this.http.put(`${F.url}projects/${i._id}/note`,{admin_notes:this.noteText()}).subscribe({next:()=>{this.toast.success("Nota guardada","La nota se actualiz\xF3 correctamente"),this.closeNotesModal(),this.isSavingNote.set(!1),this.project()&&(this.project().admin_notes=this.noteText())},error:e=>{this.toast.error("Error","No se pudo guardar la nota"),this.isSavingNote.set(!1)}}))}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=T({type:t,selectors:[["app-projects-card"]],inputs:{project:[1,"project"]},outputs:{openVideo:"openVideo",buyNowClick:"buyNowClick",openDetail:"openDetail"},decls:25,vars:14,consts:[[1,"group","relative","h-full","flex","flex-col","overflow-hidden","rounded-2xl","border","border-white/10","bg-gradient-to-br","from-slate-900/90","to-slate-800/90","backdrop-blur-sm","transition-all","duration-300","hover:border-lime-400/40","hover:shadow-xl","hover:shadow-lime-500/10","hover:-translate-y-1"],[1,"absolute","top-3","left-3","z-20","px-3","py-1.5","rounded-xl","text-xs","font-bold","bg-gradient-to-r","from-emerald-500","to-teal-500","text-white","shadow-lg","flex","items-center","gap-1.5","backdrop-blur-sm"],[1,"relative","overflow-hidden","cursor-pointer",3,"click"],[1,"absolute","inset-0","bg-gradient-to-t","from-slate-900","via-slate-900/20","to-transparent","opacity-60","z-10","group-hover:opacity-40","transition-opacity","duration-300"],[1,"aspect-video","overflow-hidden"],["loading","lazy","decoding","async",1,"w-full","h-full","object-cover","transition-transform","duration-500","group-hover:scale-110",3,"src","alt"],[1,"absolute","top-3","right-3","z-20"],[1,"absolute","inset-0","bg-black/40","flex","items-center","justify-center","opacity-0","group-hover:opacity-100","transition-opacity","duration-300","z-10"],[1,"absolute","bottom-3","left-3","z-20"],[1,"flex-1","flex","flex-col","p-5","space-y-3"],[1,"block","group/title"],[1,"text-base","font-bold","text-white","leading-tight","line-clamp-2","group-hover/title:text-lime-300","transition-colors","duration-200"],[1,"flex","items-center","gap-2","text-xs","text-white/60"],[1,"text-sm","text-white/60","line-clamp-2"],[1,"flex-1"],[1,"h-px","bg-gradient-to-r","from-transparent","via-white/10","to-transparent"],[1,"flex","items-center","justify-between"],[1,"inline-flex","items-center","px-3","py-1.5","text-sm","font-bold","text-green-400","bg-green-500/10","border","border-green-500/30","rounded-lg"],[1,"flex","items-baseline","gap-2"],[1,"pt-2"],[1,"flex","gap-2"],[1,"absolute","inset-x-0","top-0","h-px","bg-gradient-to-r","from-transparent","via-lime-400/0","to-transparent","group-hover:via-lime-400/60","transition-all","duration-300"],["fill","currentColor","viewBox","0 0 20 20",1,"w-3.5","h-3.5"],["fill-rule","evenodd","d","M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z","clip-rule","evenodd"],[1,"relative"],[1,"absolute","inset-0","rounded-full","bg-lime-400","animate-ping","opacity-75"],[1,"relative","px-3","py-1.5","rounded-full","text-xs","font-black","bg-gradient-to-br","from-lime-400","to-yellow-400","text-slate-900","shadow-lg","flex","items-center","gap-1"],["fill","currentColor","viewBox","0 0 20 20",1,"w-3","h-3"],["fill-rule","evenodd","d","M12.395 2.553a1 1 0 00-1.45-.385c-.345.23-.614.558-.822.88-.214.33-.403.713-.57 1.116-.334.804-.614 1.768-.84 2.734a31.365 31.365 0 00-.613 3.58 2.64 2.64 0 01-.945-1.067c-.328-.68-.398-1.534-.398-2.654A1 1 0 005.05 6.05 6.981 6.981 0 003 11a7 7 0 1011.95-4.95c-.592-.591-.98-.985-1.348-1.467-.363-.476-.724-1.063-1.207-2.03zM12.12 15.12A3 3 0 017 13s.879.5 2.5.5c0-1 .5-4 1.25-4.5.5 1 .786 1.293 1.371 1.879A2.99 2.99 0 0113 13a2.99 2.99 0 01-.879 2.121z","clip-rule","evenodd"],[1,"absolute","inset-0","bg-lime-400","rounded-full","blur-xl","opacity-50","animate-pulse"],["fill","currentColor","viewBox","0 0 20 20",1,"relative","w-16","h-16","text-white","drop-shadow-2xl"],["fill-rule","evenodd","d","M10 18a8 8 0 100-16 8 8 0 000 16zM9.555 7.168A1 1 0 008 8v4a1 1 0 001.555.832l3-2a1 1 0 000-1.664l-3-2z","clip-rule","evenodd"],[1,"inline-flex","items-center","gap-1.5","px-3","py-1.5","rounded-lg","bg-slate-900/80","backdrop-blur-md","border","border-white/10","text-xs","font-medium","text-white/90"],["fill","currentColor","viewBox","0 0 20 20",1,"w-3.5","h-3.5","text-lime-400"],["d","M2 6a2 2 0 012-2h5l2 2h5a2 2 0 012 2v6a2 2 0 01-2 2H4a2 2 0 01-2-2V6z"],["fill","currentColor","viewBox","0 0 20 20",1,"w-4","h-4","text-lime-400/60"],["fill-rule","evenodd","d","M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z","clip-rule","evenodd"],[1,"truncate"],[1,"text-2xl","font-black","text-transparent","bg-clip-text","bg-gradient-to-r","from-lime-400","to-emerald-400"],[1,"text-sm","text-white/40","line-through","font-medium"],[1,"group/btn","relative","flex-1","text-center","px-4","py-3","rounded-xl","bg-gradient-to-r","from-emerald-500/20","to-teal-500/20","border","border-emerald-500/40","text-emerald-400","font-bold","text-sm","overflow-hidden","hover:from-emerald-500/30","hover:to-teal-500/30","hover:border-emerald-400/60","transition-all","duration-300",3,"click","routerLink"],[1,"relative","z-10","flex","items-center","justify-center","gap-2"],["fill","currentColor","viewBox","0 0 20 20",1,"w-5","h-5"],["d","M3 4a1 1 0 011-1h12a1 1 0 011 1v2a1 1 0 01-1 1H4a1 1 0 01-1-1V4zM3 10a1 1 0 011-1h6a1 1 0 011 1v6a1 1 0 01-1 1H4a1 1 0 01-1-1v-6zM14 9a1 1 0 00-1 1v6a1 1 0 001 1h2a1 1 0 001-1v-6a1 1 0 00-1-1h-2z"],[1,"absolute","inset-0","-translate-x-full","group-hover/btn:translate-x-full","bg-gradient-to-r","from-transparent","via-white/10","to-transparent","transition-transform","duration-700","ease-out"],[1,"group/btn","relative","px-4","py-3","rounded-xl","font-bold","text-sm","bg-gradient-to-r","from-cyan-500/20","to-blue-500/20","border","border-cyan-500/40","text-cyan-400","overflow-hidden","hover:from-cyan-500/30","hover:to-blue-500/30","hover:border-cyan-400/60","transition-all","duration-300"],["title","Ver descripci\xF3n",1,"group/btn","relative","px-3","py-3","rounded-xl","font-bold","text-sm","bg-white/5","border","border-white/10","text-white/70","hover:bg-white/10","hover:text-white","hover:border-white/30","transition-all","duration-300","flex","items-center","justify-center",3,"click","routerLink"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M15 12a3 3 0 11-6 0 3 3 0 016 0z"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"],[1,"group/btn","relative","px-3","py-3","rounded-xl","font-bold","text-sm","bg-amber-500/20","border","border-amber-500/40","text-amber-400","hover:bg-amber-500/30","hover:border-amber-400/60","transition-all","duration-300","flex","items-center","justify-center",3,"title","ring-1"],[1,"group/btn","relative","px-4","py-3","rounded-xl","font-bold","text-sm","bg-gradient-to-r","from-cyan-500/20","to-blue-500/20","border","border-cyan-500/40","text-cyan-400","overflow-hidden","hover:from-cyan-500/30","hover:to-blue-500/30","hover:border-cyan-400/60","transition-all","duration-300",3,"click"],[1,"relative","z-10","flex","items-center","justify-center","gap-1.5"],[1,"hidden","sm:inline"],[1,"group/btn","relative","px-3","py-3","rounded-xl","font-bold","text-sm","bg-amber-500/20","border","border-amber-500/40","text-amber-400","hover:bg-amber-500/30","hover:border-amber-400/60","transition-all","duration-300","flex","items-center","justify-center",3,"click","title"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"],[1,"group/btn","relative","flex-1","px-4","py-3","rounded-xl","font-bold","text-sm","bg-gradient-to-r","from-lime-400","to-emerald-400","text-slate-900","overflow-hidden","hover:from-lime-300","hover:to-emerald-300","hover:shadow-lg","hover:shadow-lime-500/30","active:scale-95","transition-all","duration-200","flex","items-center","justify-center","gap-2",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","relative","z-10"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2.5","d","M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293 2.293c-.63.63-.184 1.707.707 1.707H17m0 0a2 2 0 100 4 2 2 0 000-4zm-8 2a2 2 0 11-4 0 2 2 0 014 0z"],[1,"flex","flex-col","items-center","leading-none"],[1,"relative","z-10","text-sm","font-bold"],[1,"absolute","inset-0","-translate-x-full","group-hover/btn:translate-x-full","bg-gradient-to-r","from-transparent","via-white/30","to-transparent","transition-transform","duration-500","ease-out"],[1,"fixed","inset-0","bg-black/70","backdrop-blur-sm","z-50",3,"click"],[1,"fixed","inset-0","z-50","flex","items-center","justify-center","p-4"],[1,"bg-gradient-to-br","from-slate-800","to-slate-900","rounded-2xl","shadow-2xl","max-w-md","w-full","border","border-white/10","overflow-hidden",3,"click"],[1,"bg-gradient-to-r","from-amber-500/20","to-amber-600/20","px-6","py-4","border-b","border-white/10","flex","items-center","justify-between"],[1,"text-lg","font-bold","text-white","flex","items-center","gap-2"],["fill","currentColor","viewBox","0 0 20 20",1,"w-5","h-5","text-amber-400"],["d","M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"],[1,"text-white/60","hover:text-white","transition-colors",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-6","h-6"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M6 18L18 6M6 6l12 12"],[1,"px-6","py-4","space-y-4"],[1,"text-sm","text-slate-300"],[1,"mb-2"],["placeholder","Escribe tu nota aqu\xED...",1,"w-full","h-32","px-4","py-3","bg-slate-900","border","border-slate-700","rounded-lg","text-white","placeholder-slate-500","focus:outline-none","focus:ring-2","focus:ring-amber-500/50","focus:border-amber-500/50","resize-none",3,"ngModel"],[1,"w-full","h-32","px-4","py-3","bg-slate-900/50","border","border-slate-700/50","rounded-lg","text-white/80","overflow-y-auto"],[1,"text-xs","text-slate-500"],[1,"px-6","py-4","border-t","border-white/10","flex","gap-3"],[1,"flex-1","px-4","py-2","bg-slate-700/50","hover:bg-slate-700","text-slate-300","rounded-lg","font-medium","transition-colors",3,"click"],[1,"flex-1","px-4","py-2","bg-amber-500","hover:bg-amber-600","disabled:bg-amber-500/50","text-white","rounded-lg","font-medium","transition-colors","flex","items-center","justify-center","gap-2",3,"disabled"],["placeholder","Escribe tu nota aqu\xED...",1,"w-full","h-32","px-4","py-3","bg-slate-900","border","border-slate-700","rounded-lg","text-white","placeholder-slate-500","focus:outline-none","focus:ring-2","focus:ring-amber-500/50","focus:border-amber-500/50","resize-none",3,"ngModelChange","ngModel"],[1,"flex-1","px-4","py-2","bg-amber-500","hover:bg-amber-600","disabled:bg-amber-500/50","text-white","rounded-lg","font-medium","transition-colors","flex","items-center","justify-center","gap-2",3,"click","disabled"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M5 13l4 4L19 7"]],template:function(e,r){if(e&1&&(n(0,"div",0),m(1,Me,4,0,"div",1),n(2,"div",2),C("click",function(h){return r.project().url_video?r.onOpenVideo(h):null}),l(3,"div",3),n(4,"div",4),l(5,"img",5),o(),m(6,ke,7,2,"div",6),m(7,Ee,5,0,"div",7),m(8,Ne,5,1,"div",8),o(),n(9,"div",9)(10,"div",10)(11,"h3",11),s(12),o()(),m(13,Pe,5,1,"div",12),m(14,Ve,2,1,"p",13),l(15,"div",14)(16,"div",15),n(17,"div",16),m(18,Te,2,0,"span",17)(19,Ie,3,1,"div",18),o(),n(20,"div",19),m(21,Ae,13,8,"div",20)(22,He,13,4,"div",20),o()(),l(23,"div",21),o(),m(24,We,22,6)),e&2){let c;a(),p(r.isPurchased()?1:-1),a(4),E("opacity-50",r.isPurchased()),w("src",r.imageUrl(),V)("alt",r.project().title),a(),p(r.project().discount_active&&!r.isPurchased()?6:-1),a(),p(r.project().url_video?7:-1),a(),p((c=r.project().categorie)!=null&&c.title?8:-1),a(4),v(" ",r.project().title," "),a(),p(r.instructor()?13:-1),a(),p(r.project().subtitle?14:-1),a(4),p(r.project().isFree||r.project().price_mxn===0?18:19),a(3),p(r.isPurchased()?21:22),a(3),p(r.showNotesModal()?24:-1)}},dependencies:[z,I,oe,te,ie,ne,Y,H],encapsulation:2,changeDetection:0})};export{re as a,le as b};
