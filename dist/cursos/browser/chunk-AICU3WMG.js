import{a as Se,b as we}from"./chunk-BI7CAGWR.js";import{a as ke}from"./chunk-YH3UKQ5M.js";import{a as me}from"./chunk-BYVIKJ2T.js";import{a as be}from"./chunk-BIIRGNXX.js";import{a as ce}from"./chunk-KBA3WCNC.js";import{a as de}from"./chunk-RHIE2QCX.js";import"./chunk-6Z75774O.js";import{a as re}from"./chunk-N6WE4CBL.js";import{a as le}from"./chunk-NC7U6HNU.js";import{b as se}from"./chunk-W4HGVXKG.js";import{a as ye}from"./chunk-NOVASSOE.js";import{e as oe,f as ae}from"./chunk-UKUKXRH6.js";import"./chunk-TCGJFX72.js";import{a as ue,b as pe,c as F,d as xe,e as he,f as ge,h as j,j as fe,n as ve,o as _e,x as Ce}from"./chunk-SDJWNAN2.js";import{a as z}from"./chunk-ESTJS734.js";import{$ as g,$b as w,Ac as ne,Eb as J,Fb as Z,Gb as r,Ha as U,Hb as S,Ib as h,Jb as W,Kb as ee,Ma as l,O as K,T as D,Xa as Q,Y as M,Z as E,_ as m,_b as y,ac as H,ec as f,hb as u,ib as p,ja as b,ka as A,lb as $,mb as G,nb as N,ob as t,pb as n,qb as c,ub as B,wb as T,xc as te,yb as d,yc as ie}from"./chunk-6JS7X5LE.js";import{a as X,b as q}from"./chunk-I4MTPUBM.js";var R=class o{cartItems=b([]);cart=f(()=>this.cartItems());total=f(()=>this.cartItems().reduce((i,e)=>i+e.price_mxn,0));count=f(()=>this.cartItems().length);constructor(){let i=localStorage.getItem("cart");if(i)try{let e=JSON.parse(i);e.some(s=>s.price_usd!==void 0||s.price_mxn===void 0)?(console.warn("\u{1F9F9} Clearing legacy cart data (USD -> MXN migration)"),this.cartItems.set([]),localStorage.removeItem("cart")):this.cartItems.set(e)}catch(e){console.error("Error parsing cart from localStorage",e),this.cartItems.set([])}A(()=>{localStorage.setItem("cart",JSON.stringify(this.cartItems()))})}addToCart(i){return this.cartItems().some(a=>a._id===i._id&&a.type===i.type)?!1:(this.cartItems.update(a=>[...a,i]),!0)}removeFromCart(i,e){this.cartItems.update(a=>a.filter(s=>!(s._id===i&&s.type===e)))}clearCart(){this.cartItems.set([])}isInCart(i,e){return this.cartItems().some(a=>a._id===i&&a.type===e)}static \u0275fac=function(e){return new(e||o)};static \u0275prov=K({token:o,factory:o.\u0275fac,providedIn:"root"})};var Ee=(o,i)=>i._id,Te=(o,i)=>i.id;function De(o,i){o&1&&(t(0,"p",70),r(1),n()),o&2&&(l(),h(" \xA1Hola ",i.name,"! \u{1F44B} "))}function Ie(o,i){if(o&1){let e=B();t(0,"div",8)(1,"div",61),T("click",function(){M(e);let s=d();return E(s.closeSuccessModalAndRedirect())}),n(),t(2,"div",62)(3,"div",63),T("click",function(s){return M(e),E(s.stopPropagation())}),t(4,"div",64)(5,"div",65),m(),t(6,"svg",66),c(7,"path",67),n()(),g(),t(8,"div",68)(9,"h3",69),r(10," \xA1Compra Completada! \u{1F389} "),n(),u(11,De,2,1,"p",70),t(12,"div",71)(13,"p"),r(14," Gracias por tu compra. Hemos enviado los detalles de tu pedido a tu correo electr\xF3nico. "),n(),t(15,"div",72)(16,"p",73),m(),t(17,"svg",74),c(18,"path",75),n(),r(19," \xA1Acceso inmediato a tu contenido! \u{1F680} "),n(),g(),t(20,"p",76),r(21,' Ve a "Mis Cursos" para empezar a aprender '),n()()()(),t(22,"div",77)(23,"button",78),T("click",function(){M(e);let s=d();return E(s.closeSuccessModalAndRedirect())}),r(24," Ir a Mis Cursos "),n()()()()()()}if(o&2){let e,a=d();l(11),p((e=a.user())?11:-1,e)}}function Be(o,i){if(o&1&&(t(0,"div",9)(1,"div",79),m(),t(2,"svg",80),c(3,"path",81),n(),g(),t(4,"p",82),r(5),n()()()),o&2){let e=d();l(5),S(e.errorMessage())}}function Ne(o,i){if(o&1&&(t(0,"div",10)(1,"div",83)(2,"div",84),m(),t(3,"svg",85),c(4,"path",86),n()(),g(),t(5,"div",87)(6,"h3",88),r(7),n(),t(8,"p",89),r(9),n(),t(10,"div",90)(11,"a",91),m(),t(12,"svg",92),c(13,"path",93),n(),r(14," Ir a Mi Perfil "),n(),g(),t(15,"a",94),m(),t(16,"svg",92),c(17,"path",95),n(),r(18," Explorar M\xE1s Contenido "),n()()()()()),o&2){let e,a=d();l(7),h(" \u2705 Ya adquiriste este ",a.getProductTypeName(a.productType()||"course")," "),l(2),h(' Ya tienes acceso completo a "',(e=a.product())==null?null:e.title,'". Puedes acceder a todo el contenido desde tu perfil. ')}}function Ve(o,i){o&1&&(t(0,"div",13)(1,"div",96)(2,"div",97),c(3,"div",98),t(4,"p",58),r(5,"\u{1F504} Cargando tu billetera..."),n()()()())}function Ae(o,i){o&1&&(t(0,"span",104),c(1,"span",115),t(2,"span",116),m(),t(3,"svg",117),c(4,"path",118),n()()())}function Fe(o,i){o&1&&(t(0,"div",107),m(),t(1,"svg",119),c(2,"path",120),n(),g(),t(3,"span",121),r(4,"Suficiente para esta compra"),n()())}function je(o,i){o&1&&(t(0,"div",108),m(),t(1,"svg",122),c(2,"path",123),n(),g(),t(3,"span",124),r(4,"\xDAsalo para pago parcial"),n()())}function Le(o,i){o&1&&(t(0,"div",135)(1,"div",137)(2,"div",84),m(),t(3,"svg",138),c(4,"path",86),n()(),g(),t(5,"div",87)(6,"p",139),r(7," \u2728 Acceso Instant\xE1neo "),t(8,"span",140),r(9," NUEVO "),n()(),t(10,"p",141),r(11,"Tu saldo cubre el 100% de la compra. \xA1Acceso inmediato a tus cursos!"),n()(),t(12,"div",84),m(),t(13,"svg",142),c(14,"path",143),n()()()())}function $e(o,i){if(o&1&&(t(0,"div",136)(1,"div",137),m(),t(2,"svg",144),c(3,"path",145),n(),g(),t(4,"div",87)(5,"p",146),r(6,"\u{1F4B3} Pago Mixto"),n(),t(7,"p",147),r(8," Billetera: "),t(9,"span",148),r(10),y(11,"mxnCurrency"),n(),t(12,"span",149),r(13,"|"),n(),r(14," Otro m\xE9todo: "),t(15,"span",148),r(16),y(17,"mxnCurrency"),n()()()()()),o&2){let e=d(3);l(10),S(w(11,2,e.walletAmount())),l(6),S(w(17,4,e.remainingAmount()))}}function Ge(o,i){if(o&1&&(t(0,"div",113)(1,"div",125)(2,"span",126),m(),t(3,"svg",92),c(4,"path",127),n(),r(5," Total a pagar: "),n(),g(),t(6,"div",128)(7,"span",129),r(8),y(9,"mxnCurrency"),n()()(),t(10,"div",125)(11,"span",130),m(),t(12,"svg",92),c(13,"path",103),n(),r(14," Saldo de billetera: "),n(),g(),t(15,"div",128)(16,"span",131),r(17),y(18,"mxnCurrency"),n()()(),c(19,"div",132),t(20,"div",133)(21,"span",134),r(22,"Restante a pagar:"),n(),t(23,"div",128)(24,"span",106),r(25),y(26,"mxnCurrency"),n()()(),u(27,Le,15,0,"div",135)(28,$e,18,6,"div",136),n()),o&2){let e=d(2);l(8),h("",w(9,4,e.subtotal())," MXN"),l(9),h("-",w(18,6,e.walletAmount())," MXN"),l(8),h("",w(26,8,e.remainingAmount())," MXN"),l(2),p(e.isFullWalletPayment()?27:e.isMixedPayment()?28:-1)}}function We(o,i){if(o&1&&(t(0,"div",156)(1,"div",157)(2,"span",158),r(3),n(),t(4,"div",159)(5,"p",160),r(6),n(),t(7,"p",161),r(8),n()()(),t(9,"span"),r(10),y(11,"mxnCurrency"),n()()),o&2){let e=i.$implicit,a=d(3);l(3),S(a.getTransactionIcon(e.type)),l(3),S(e.description),l(2),S(a.formatDate(e.createdAt)),l(),Z("text-sm font-bold flex-shrink-0 "+a.getTransactionColor(e.type)),l(),W(" ",e.type==="credit"?"+":"-","",w(11,7,e.amount)," ")}}function He(o,i){if(o&1&&(t(0,"div",114)(1,"div",150)(2,"h4",151),m(),t(3,"svg",92),c(4,"path",59),n(),r(5," Actividad Reciente "),n(),g(),t(6,"a",152),r(7," Ver todo "),m(),t(8,"svg",153),c(9,"path",154),n()()(),g(),t(10,"div",155),$(11,We,12,9,"div",156,Ee),n()()),o&2){let e=d(2);l(11),G(e.recentTransactions())}}function ze(o,i){if(o&1){let e=B();t(0,"div",13)(1,"div",99)(2,"div",100)(3,"div",101),m(),t(4,"svg",102),c(5,"path",103),n(),u(6,Ae,5,0,"span",104),n(),g(),t(7,"div")(8,"h3",105),r(9,"Saldo Disponible en Billetera"),n(),t(10,"p",106),r(11),y(12,"mxnCurrency"),n(),u(13,Fe,5,0,"div",107)(14,je,5,0,"div",108),n()(),t(15,"label",109)(16,"input",110),T("change",function(){M(e);let s=d();return E(s.toggleWalletPayment())}),n(),c(17,"div",111),t(18,"span",112),r(19," Usar saldo "),n()()(),u(20,Ge,29,10,"div",113),u(21,He,13,0,"div",114),n()}if(o&2){let e=d();l(6),p(e.walletBalance()>=e.subtotal()?6:-1),l(5),h("",w(12,6,e.walletBalance())," MXN"),l(2),p(e.walletBalance()>=e.subtotal()?13:e.walletBalance()>0?14:-1),l(3),N("checked",e.useWalletBalance()),l(4),p(e.useWalletBalance()?20:-1),l(),p(e.recentTransactions().length>0&&e.useWalletBalance()?21:-1)}}function Re(o,i){o&1&&(t(0,"div",15)(1,"div",100)(2,"div",84),m(),t(3,"svg",162),c(4,"path",103),n()(),g(),t(5,"div",87)(6,"h3",163),r(7,"\u{1F389} \xA1Producto GRATIS!"),n(),t(8,"p",164),r(9," Este producto no tiene costo. Solo necesitas usar tu "),t(10,"strong",47),r(11,"billetera digital"),n(),r(12," para obtenerlo. "),c(13,"br"),t(14,"span",165),r(15,"\u{1F4A1} Tip: Si no tienes saldo, cont\xE1ctanos para agregarlo."),n()()()()())}function Oe(o,i){if(o&1&&(r(0),y(1,"mxnCurrency")),o&2){let e=d();h(" M\xE9todo de Pago Adicional (para ",w(1,1,e.remainingAmount()),") ")}}function Xe(o,i){o&1&&r(0," \u2705 Pago Completo con Billetera ")}function qe(o,i){o&1&&r(0," M\xE9todo de Pago ")}function Ue(o,i){if(o&1&&(t(0,"div",166)(1,"div"),r(2),y(3,"json"),n(),t(4,"div"),r(5),y(6,"json"),n(),t(7,"div"),r(8),y(9,"json"),n()()),o&2){let e=d(2);l(2),h("Debug - available methods: ",w(3,3,e.availableMethodIds())),l(3),h("Debug - allowed methods: ",w(6,5,e.allowedMethodIds())),l(3),h("Payment config: ",w(9,7,e.checkoutService.paymentConfig()))}}function Je(o,i){o&1&&(m(),t(0,"svg",176),c(1,"path",120),n())}function Ye(o,i){if(o&1){let e=B();t(0,"button",170),T("click",function(){M(e);let s=d(2).$implicit,x=d(2);return E(x.selectPaymentMethod(s.id))}),t(1,"div",171)(2,"span",172),r(3),n(),t(4,"div",173)(5,"p",174),r(6),n(),t(7,"p",175),r(8),y(9,"mxnCurrency"),n()()(),u(10,Je,2,0,":svg:svg",176),n()}if(o&2){let e=d(2).$implicit,a=d(2);J("border-lime-400",a.selectedPaymentMethod()===e.id)("bg-lime-400/10",a.selectedPaymentMethod()===e.id),l(3),S(e.icon),l(3),S(e.name),l(2),h("Saldo: ",w(9,8,a.walletBalance())),l(2),p(a.selectedPaymentMethod()===e.id?10:-1)}}function Ke(o,i){if(o&1&&(t(0,"div",169)(1,"div",171)(2,"span",177),r(3),n(),t(4,"div",173)(5,"p",178),r(6),n(),t(7,"p",28),r(8),y(9,"mxnCurrency"),y(10,"mxnCurrency"),n()()(),m(),t(11,"svg",179),c(12,"path",180),n()()),o&2){let e=d(2).$implicit,a=d(2);l(3),S(e.icon),l(3),S(e.name),l(2),W("\u274C Saldo insuficiente: ",w(9,4,a.walletBalance())," (necesitas ",w(10,6,a.subtotal()),")")}}function Qe(o,i){if(o&1&&u(0,Ye,11,10,"button",168)(1,Ke,13,8,"div",169),o&2){let e=d(3);p(e.walletBalance()>=e.subtotal()?0:1)}}function Ze(o,i){o&1&&(m(),t(0,"svg",176),c(1,"path",120),n())}function et(o,i){if(o&1){let e=B();t(0,"button",170),T("click",function(){M(e);let s=d().$implicit,x=d(2);return E(x.selectPaymentMethod(s.id))}),t(1,"div",171)(2,"span",172),r(3),n(),t(4,"div",173)(5,"p",174),r(6),n(),t(7,"p",161),r(8),n()()(),u(9,Ze,2,0,":svg:svg",176),n()}if(o&2){let e=d().$implicit,a=d(2);J("border-lime-400",a.selectedPaymentMethod()===e.id)("bg-lime-400/10",a.selectedPaymentMethod()===e.id),l(3),S(e.icon),l(3),S(e.name),l(2),S(e.description),l(),p(a.selectedPaymentMethod()===e.id?9:-1)}}function tt(o,i){if(o&1&&u(0,Qe,2,1)(1,et,10,8,"button",168),o&2){let e=i.$implicit;p(e.id==="wallet"?0:1)}}function it(o,i){if(o&1&&(u(0,Ue,10,9,"div",166),t(1,"div",167),$(2,tt,2,1,null,null,Te),n()),o&2){let e=d();p(-1),l(2),G(e.allowedPaymentMethods())}}function nt(o,i){o&1&&(t(0,"div",17)(1,"div",137),m(),t(2,"svg",181),c(3,"path",86),n(),g(),t(4,"div")(5,"p",182),r(6,"\xA1Perfecto! Tu saldo cubre el 100% de la compra"),n(),t(7,"p",183),r(8,"No necesitas seleccionar ning\xFAn m\xE9todo de pago adicional."),n()()()())}function ot(o,i){o&1&&(t(0,"p",21),r(1,"El nombre es requerido"),n())}function at(o,i){o&1&&(t(0,"p",21),r(1,"Email v\xE1lido es requerido"),n())}function rt(o,i){o&1&&(t(0,"p",28),r(1,"Debes aceptar los t\xE9rminos y condiciones"),n())}function lt(o,i){if(o&1&&(t(0,"div",190),r(1),y(2,"number"),n(),t(3,"div",191),r(4),y(5,"number"),n(),t(6,"div",192),r(7),n()),o&2){let e,a=d(2);l(),h("$",H(2,4,a.subtotal(),"1.2-2")),l(3),h("$",H(5,7,a.originalPrice(),"1.2-2")),l(3),W(" -",(e=a.bestDiscount())==null?null:e.discount,"",((e=a.bestDiscount())==null?null:e.type_discount)===1?"%":""," ")}}function st(o,i){if(o&1&&(t(0,"div",190),r(1),y(2,"number"),n()),o&2){let e=d(2);l(),h("$",H(2,1,e.subtotal(),"1.2-2"))}}function dt(o,i){if(o&1&&(t(0,"div",35),c(1,"img",184),t(2,"div",159)(3,"div",185)(4,"div")(5,"div",186),r(6),n(),t(7,"h3",187),r(8),n(),t(9,"p",188),r(10),n()(),t(11,"div",189),u(12,lt,8,10)(13,st,3,4,"div",190),n()()()()),o&2){let e,a,s,x,_=d();l(),N("src",_.buildImageUrl((e=_.product())==null?null:e.imagen),U),l(5),h(" ",_.getProductTypeName(((a=_.product())==null?null:a.type)||"course")," "),l(2),S((s=_.product())==null?null:s.title),l(2),S((x=_.product())==null?null:x.subtitle),l(2),p(_.hasDiscount()?12:13)}}function ct(o,i){if(o&1){let e=B();t(0,"div",193),c(1,"img",184),t(2,"div",159)(3,"div",185)(4,"div")(5,"div",186),r(6),n(),t(7,"h3",187),r(8),n(),t(9,"p",188),r(10),n()(),t(11,"div",189)(12,"div",190),r(13),y(14,"mxnCurrency"),n()()()(),t(15,"button",194),T("click",function(){let s=M(e).$implicit,x=d(2);return E(x.removeFromCart(s._id,s.type))}),m(),t(16,"svg",74),c(17,"path",195),n()()()}if(o&2){let e=i.$implicit,a=d(2);l(),N("src",a.buildImageUrl(e.imagen,e.type),U),l(5),h(" ",a.getProductTypeName(e.type)," "),l(2),S(e.title),l(2),S(e.subtitle),l(3),S(w(14,5,e.price_mxn))}}function mt(o,i){if(o&1&&$(0,ct,18,7,"div",193,Ee),o&2){let e=d();G(e.cartItems())}}function ut(o,i){if(o&1&&(t(0,"p",199),r(1),n()),o&2){let e=d(2);l(),S(e.couponError())}}function pt(o,i){if(o&1){let e=B();t(0,"div",196)(1,"input",197),T("input",function(s){M(e);let x=d();return E(x.couponCode.set(s.target.value))})("keyup.enter",function(){M(e);let s=d();return E(s.checkCoupon())}),n(),t(2,"button",198),T("click",function(){M(e);let s=d();return E(s.checkCoupon())}),r(3),n()(),u(4,ut,2,1,"p",199)}if(o&2){let e=d();l(),N("value",e.couponCode()),l(),N("disabled",e.isCheckingCoupon()||!e.couponCode()),l(),h(" ",e.isCheckingCoupon()?"...":"Aplicar"," "),l(),p(e.couponError()?4:-1)}}function xt(o,i){if(o&1&&(t(0,"p",204),r(1),n()),o&2){let e=d(2);l(),h("-",e.appliedCoupon().discount_percentage,"% descuento")}}function ht(o,i){o&1&&(t(0,"p",204),r(1,"Referido aplicado"),n())}function gt(o,i){if(o&1){let e=B();t(0,"div",42)(1,"div",200),m(),t(2,"svg",201),c(3,"path",202),n(),g(),t(4,"div")(5,"p",203),r(6),n(),u(7,xt,2,1,"p",204)(8,ht,2,0,"p",204),n()(),t(9,"button",205),T("click",function(){M(e);let s=d();return E(s.removeCoupon())}),m(),t(10,"svg",206),c(11,"path",195),n()()()}if(o&2){let e=d();l(6),h("Cup\xF3n: ",e.appliedCoupon().code),l(),p(e.appliedCoupon().discount_percentage>0?7:8)}}function ft(o,i){if(o&1&&(t(0,"div",45)(1,"span"),r(2,"Descuento"),n(),t(3,"span"),r(4),n()()),o&2){let e=d();l(4),h("-$",e.formatPrice(i.savedAmount))}}function vt(o,i){o&1&&(t(0,"div",44)(1,"span"),r(2,"Descuentos"),n(),t(3,"span"),r(4,"$0.00"),n()())}function _t(o,i){o&1&&(t(0,"div",209),r(1,"Cargando PayPal... (Aguarda mientras se carga el m\xE9todo de pago) "),n(),t(2,"div",210)(3,"button",211),m(),t(4,"svg",212),c(5,"circle",213),n(),g(),t(6,"span"),r(7,"Preparando PayPal..."),n()()())}function Ct(o,i){if(o&1&&(c(0,"div",208),u(1,_t,8,0)),o&2){let e=d(2);l(),p(e.paypalButtonsRendered()?-1:1)}}function bt(o,i){o&1&&(m(),t(0,"svg",215),c(1,"circle",213)(2,"path",216),n(),g(),t(3,"span"),r(4,"Procesando..."),n())}function yt(o,i){if(o&1&&(m(),t(0,"svg",217),c(1,"path",218),n(),g(),t(2,"span"),r(3),n()),o&2){let e=d(3);l(3),h("\u{1F4B3} Pagar Ahora - $",e.formatPrice(e.subtotal()))}}function St(o,i){if(o&1){let e=B();t(0,"button",214),T("click",function(){M(e);let s=d(2);return E(s.processPayment())}),u(1,bt,5,0)(2,yt,4,1),n()}if(o&2){let e=d(2);N("disabled",e.isProcessing()||e.renderingPaypal()||e.showSuccess()||e.remainingAmount()>0&&!e.selectedPaymentMethod()||e.checkoutForm.invalid),l(),p(e.isProcessing()?1:2)}}function wt(o,i){if(o&1&&u(0,Ct,2,1)(1,St,3,2,"button",207),o&2){let e=d();p(e.renderingPaypal()||e.paypalButtonsRendered()?0:1)}}function kt(o,i){o&1&&(t(0,"button",219),m(),t(1,"svg",215),c(2,"circle",213)(3,"path",216),n(),g(),t(4,"span"),r(5,"Procesando..."),n()())}function Mt(o,i){o&1&&(t(0,"span"),r(1,"\u2705 Confirmar Compra con Billetera"),n())}function Et(o,i){if(o&1&&(t(0,"span"),r(1),t(2,"small",220),r(3),n()()),o&2){let e=d(3);l(),h("\u{1F4B3} Pagar $",e.formatPrice(e.remainingAmount())," "),l(2),h("($",e.formatPrice(e.walletAmount())," con billetera)")}}function Pt(o,i){if(o&1){let e=B();t(0,"button",214),T("click",function(){M(e);let s=d(2);return E(s.processPayment())}),m(),t(1,"svg",217),c(2,"path",218),n(),u(3,Mt,2,0,"span")(4,Et,4,2,"span"),n()}if(o&2){let e=d(2);N("disabled",e.renderingPaypal()||e.showSuccess()||e.checkoutForm.invalid),l(3),p(e.remainingAmount()===0?3:4)}}function Tt(o,i){if(o&1){let e=B();t(0,"button",214),T("click",function(){M(e);let s=d(2);return E(s.processPayment())}),m(),t(1,"svg",217),c(2,"path",218),n(),g(),t(3,"span"),r(4),n()()}if(o&2){let e=d(2);N("disabled",e.renderingPaypal()||e.showSuccess()||e.checkoutForm.invalid),l(4),h("\u{1F4B3} Pagar Ahora - $",e.formatPrice(e.subtotal()))}}function Dt(o,i){if(o&1&&u(0,kt,6,0,"button",219)(1,Pt,5,2,"button",207)(2,Tt,5,2,"button",207),o&2){let e=d();p(e.isProcessing()?0:e.useWalletBalance()?1:2)}}function It(o,i){o&1&&r(0," \u{1F389} Tu saldo cubre el 100% de la compra ")}function Bt(o,i){if(o&1&&r(0),o&2){let e,a=d(2);ee(" \u{1F4A1} Se usar\xE1n $",a.formatPrice(a.walletAmount())," de tu billetera + $",a.formatPrice(a.remainingAmount())," con ",((e=a.getPaymentMethodInfo(a.selectedPaymentMethod()))==null?null:e.name)||"otro m\xE9todo"," ")}}function Nt(o,i){if(o&1&&(t(0,"p",48),u(1,It,1,0)(2,Bt,1,3),n()),o&2){let e=d();l(),p(e.remainingAmount()===0?1:2)}}var Me=class o{checkoutService=D(Se);authService=D(se);walletService=D(le);purchasesService=D(re);profileService=D(me);modalService=D(ye);discountService=D(be);cartService=D(R);currencyService=D(de);couponService=D(ke);router=D(oe);profileStudentService=D(we);alreadyPurchased=f(()=>{let i=this.product();return i?this.purchasesService.isPurchased(i._id):!1});product=b(null);productType=b(null);cartItems=f(()=>this.cartService.cart());isDirectBuy=b(!0);selectedPaymentMethod=b("");isProcessing=b(!1);showSuccess=b(!1);showWarningModal=b(!1);errorMessage=b("");transactionNumber=b("");couponCode=b("");appliedCoupon=b(null);couponError=b("");isCheckingCoupon=b(!1);paypalOrderId=b(null);paypalButtonsRendered=b(!1);pendingSaleTx=b(null);renderingPaypal=b(!1);countries=this.checkoutService.supportedCountries;selectedCountry=b("MX");selectedCountryData=f(()=>this.countries().find(i=>i.code===this.selectedCountry()));walletBalance=f(()=>this.walletService.balance());useWalletBalance=b(!1);walletAmount=b(0);discounts=f(()=>this.discountService.discounts());bestDiscount=f(()=>{if(!this.isDirectBuy())return null;let i=this.product(),e=this.productType(),a=this.discounts();if(!i||!e||!a.length)return null;let s=Date.now(),x=a.filter(v=>v.state&&v.start_date_num<=s&&v.end_date_num>=s),_=null,k=i.price_mxn;for(let v of x){let I=!1;if(v.type_segment===1&&e==="course")v.courses&&v.courses.some(C=>C._id===i._id||C===i._id)&&(I=!0);else if(v.type_segment===2){let C=i.categorie?._id||i.categorie;C&&v.categories&&v.categories.some(V=>V._id===C||V===C)&&(I=!0)}else v.type_segment===3&&e==="project"&&v.projects&&v.projects.some(C=>C._id===i._id||C===i._id)&&(I=!0);if(I){let C=k;v.type_discount===1?C=i.price_mxn-i.price_mxn*v.discount/100:C=i.price_mxn-v.discount,C<0&&(C=0),C<k&&(k=C,_=q(X({},v),{finalPrice:k,savedAmount:i.price_mxn-k}))}}return _});hasDiscount=f(()=>!!this.bestDiscount());subtotal=f(()=>{let i=0;if(this.isDirectBuy()){let a=this.bestDiscount();i=a?a.finalPrice:this.product()?.price_mxn||0}else i=this.cartService.total();let e=this.appliedCoupon();return e&&e.discount_percentage>0&&(i=i-i*(e.discount_percentage/100)),Math.max(0,i)});originalPrice=f(()=>this.isDirectBuy()?this.product()?.price_mxn||0:this.subtotal());subtotalMXN=f(()=>this.subtotal());originalPriceMXN=f(()=>this.originalPrice());remainingAmount=f(()=>{if(!this.useWalletBalance())return this.subtotal();let i=this.subtotal()-this.walletAmount();return Math.max(0,i)});isLoadingWallet=f(()=>this.walletService.loading());walletTransactions=f(()=>this.walletService.transactions());recentTransactions=f(()=>this.walletTransactions().slice(0,3));isFullWalletPayment=f(()=>this.useWalletBalance()&&this.walletAmount()>0&&this.remainingAmount()===0);isMixedPayment=f(()=>this.useWalletBalance()&&this.walletAmount()>0&&this.remainingAmount()>0);needsAdditionalPaymentMethod=f(()=>this.useWalletBalance()&&this.remainingAmount()>0&&!this.selectedPaymentMethod());isFreeProduct=f(()=>this.subtotal()===0);allowedPaymentMethods=f(()=>this.isFreeProduct()?this.paymentMethods().filter(i=>i.id==="wallet"):this.paymentMethods());user=f(()=>this.authService.user());paymentMethods=this.checkoutService.availablePaymentMethods;availableMethodIds=f(()=>this.paymentMethods().map(i=>i.id));allowedMethodIds=f(()=>this.allowedPaymentMethods().map(i=>i.id));checkoutForm=new ge({acceptTerms:new j(!1,[F.requiredTrue]),billingName:new j("",[F.required]),billingEmail:new j("",[F.required,F.email]),billingPhone:new j("",[])});constructor(){A(()=>{this.showSuccess()||this.showWarningModal()?document.body.style.overflow="hidden":document.body.style.overflow=""}),A(()=>{let i=this.product(),e=this.cartService.count();!i&&e===0&&!this.showSuccess()&&this.router.navigate(["/"])}),A(()=>{if(this.selectedPaymentMethod()!=="paypal"){this.paypalButtonsRendered.set(!1),this.paypalOrderId.set(null);let i=document.getElementById("paypal-button-container");i&&(i.innerHTML="")}})}ngOnInit(){if(!this.authService.isLoggedIn()){this.router.navigate(["/login"]);return}let e=this.router.getCurrentNavigation()?.extras?.state||history.state;if(e&&e.product&&e.productType){let s=q(X({},e.product),{type:e.productType});this.product.set(s),this.productType.set(e.productType),this.isDirectBuy.set(!0),setTimeout(()=>{this.alreadyPurchased()&&this.modalService.alert({title:"\u2705 Ya adquiriste este producto",message:`Ya tienes acceso a "${s.title}". Puedes verlo en tu perfil.`,icon:"info"}).then(()=>{this.router.navigate(["/profile-student"])})},1e3)}else if(this.cartService.count()>0)this.isDirectBuy.set(!1);else{this.router.navigate(["/"]);return}this.walletService.loadWallet(),this.discountService.loadDiscounts().subscribe(),this.checkoutService.reloadConfig(),this.purchasesService.loadPurchasedProducts();let a=this.user();a&&this.checkoutForm.patchValue({billingName:`${a.name} ${a.surname}`,billingEmail:a.email||""}),setTimeout(()=>{this.isFreeProduct()&&this.selectPaymentMethod("wallet");let s=localStorage.getItem("pending_coupon");s&&(this.couponCode.set(s),this.checkCoupon(),localStorage.removeItem("pending_coupon"))},100)}ngOnDestroy(){document.body.style.overflow=""}formatPrice(i){return i.toFixed(2)}formatDate(i){return i?new Date(i).toLocaleDateString("es-MX",{year:"numeric",month:"short",day:"numeric"}):""}buildImageUrl(i,e){return i?i.startsWith("http://")||i.startsWith("https://")?i:(e||(this.isDirectBuy()?this.productType():"course"))==="project"?`${z.images.project}${i}`:`${z.images.course}${i}`:"https://via.placeholder.com/400x300?text=Sin+Imagen"}getProductTypeName(i){return i==="course"?"Curso":"Proyecto"}getTransactionIcon(i){let e={credit:"\u{1F4B3}",refund:"\u21A9\uFE0F",withdrawal:"\u{1F4B8}",purchase:"\u{1F6D2}",bonus:"\u{1F381}",default:"\u{1F4B0}"};return e[i]||e.default}getTransactionColor(i){let e={credit:"text-green-400",refund:"text-lime-400",withdrawal:"text-red-400",purchase:"text-orange-400",bonus:"text-purple-400",default:"text-gray-400"};return e[i]||e.default}getPaymentMethodInfo(i){return this.paymentMethods().find(e=>e.id===i)}removeFromCart(i,e){this.cartService.removeFromCart(i,e)}selectPaymentMethod(i){if(i==="wallet"&&!this.useWalletBalance()){let e=this.walletBalance(),a=this.subtotal();if(e<a){this.errorMessage.set(`\u274C Saldo insuficiente. Tienes $${e.toFixed(2)} MXN pero el total es $${a.toFixed(2)} MXN. Activa el toggle "Usar saldo" para hacer un pago mixto.`);return}this.toggleWalletPayment(!0)}this.selectedPaymentMethod.set(i),this.errorMessage.set(""),i==="paypal"&&this.checkoutForm.valid&&setTimeout(()=>{this.processPayment()},300)}toggleWalletPayment(i){let e=i!==void 0?i:!this.useWalletBalance();if(this.useWalletBalance.set(e),e){let a=this.subtotal(),s=this.walletBalance(),x=Math.min(s,a);this.walletAmount.set(x),x>=a?this.selectedPaymentMethod.set("wallet"):this.selectedPaymentMethod()==="wallet"&&this.selectedPaymentMethod.set("")}else this.walletAmount.set(0),this.selectedPaymentMethod()==="wallet"&&this.selectedPaymentMethod.set("")}async processPayment(){if(this.isProcessing()||this.showSuccess()||!await this.modalService.confirm({title:"Pol\xEDtica de Reembolsos",icon:"warning",message:`\u2713 Tienes 7 D\xCDAS para solicitar reembolso
\u2713 No puedes haber visto m\xE1s del 20% del contenido
\u2713 M\xE1ximo 1 reembolso por curso
\u2713 M\xE1ximo 3 reembolsos totales en 6 meses

\xBFDeseas continuar con la compra?`,confirmText:"Aceptar y Continuar",cancelText:"Cancelar"}))return;let e=this.product(),a=this.isDirectBuy(),s=this.cartItems();if(a&&!e){this.errorMessage.set("Error: No hay producto seleccionado");return}if(!a&&s.length===0){this.errorMessage.set("Error: El carrito est\xE1 vac\xEDo");return}if(this.useWalletBalance()&&this.walletAmount()>0){let P=this.walletBalance(),Y=this.walletAmount();if(P<Y){this.errorMessage.set(`\u274C Error cr\xEDtico: Saldo insuficiente. Tienes $${P.toFixed(2)} MXN pero intentas usar $${Y.toFixed(2)} MXN. Por favor, recarga la p\xE1gina.`);return}}if(this.checkoutForm.invalid){Object.keys(this.checkoutForm.controls).forEach(P=>{this.checkoutForm.get(P)?.markAsTouched()}),this.errorMessage.set("Por favor completa todos los campos requeridos");return}this.isProcessing.set(!0),this.errorMessage.set("");let x=this.useWalletBalance(),_=this.walletAmount(),k=this.remainingAmount(),v,I,C;if(x&&k===0&&_>0)v="wallet",I=_,C=0;else if(x&&_>0&&k>0){if(!this.selectedPaymentMethod()){this.errorMessage.set(`\u26A0\uFE0F Pago Mixto Requerido

Tu billetera cubre $${_.toFixed(2)} MXN de los $${this.subtotal().toFixed(2)} MXN totales.

Por favor, selecciona un m\xE9todo de pago para completar los $${k.toFixed(2)} MXN restantes.`),this.isProcessing.set(!1);return}v=this.selectedPaymentMethod(),I=_,C=k}else if(v=this.selectedPaymentMethod()||"",I=0,C=this.subtotal(),!v){this.errorMessage.set("Por favor selecciona un m\xE9todo de pago"),this.isProcessing.set(!1);return}let V=[];a&&e?V=[{product:e._id,product_type:this.productType(),title:e.title,price_unit:this.subtotal(),imagen:e.imagen}]:V=s.map(P=>({product:P._id,product_type:P.type,title:P.title,price_unit:P.price_mxn,imagen:P.imagen}));let O=this.checkoutService.generateTransactionNumber();this.transactionNumber.set(O);let L={n_transaccion:O,method_payment:v,subtotal_mxn:C,total:C,use_wallet:x,wallet_amount:I,remaining_amount:C,detail:V,billing:{name:this.checkoutForm.value.billingName||"",email:this.checkoutForm.value.billingEmail||"",phone:this.checkoutForm.value.billingPhone||""}};this.appliedCoupon()&&(L.coupon_code=this.appliedCoupon().code),this.pendingPaymentPayload=L;try{if(v==="wallet"){let P=await this.checkoutService.processWalletPayment(L).toPromise();this.showSuccess.set(!0),this.walletService.loadWallet(),setTimeout(()=>{this.profileStudentService.reloadProfile(),this.purchasesService.loadPurchasedProducts(),this.profileService.reloadProfile()},1500),a||this.cartService.clearCart()}else if(v==="paypal")await this.renderPayPalButtons(O);else{let P=await this.checkoutService.processSale(L).toPromise();this.showSuccess.set(!0),I>0&&this.walletService.loadWallet(),setTimeout(()=>{this.profileStudentService.reloadProfile(),this.purchasesService.loadPurchasedProducts(),this.profileService.reloadProfile()},1500),a||this.cartService.clearCart()}}catch(P){this.errorMessage.set(P?.error?.message||"Error al procesar el pago")}finally{v!=="paypal"&&this.isProcessing.set(!1)}}closeSuccessModalAndRedirect(){this.showSuccess.set(!1),this.router.navigate(["/profile-student"])}async loadPayPalSdk(){return window.paypal?Promise.resolve():new Promise((i,e)=>{let a=z.paypal?.clientId||"";if(!a)return e(new Error("No PayPal clientId"));let s=document.createElement("script");s.src=`https://www.paypal.com/sdk/js?client-id=${a}&currency=MXN&intent=capture&disable-funding=credit,card&components=buttons&enable-funding=venmo`,s.async=!0,s.defer=!0,s.onload=()=>{setTimeout(()=>i(),100)},s.onerror=x=>e(x),document.head.appendChild(s)})}async waitForContainer(i,e=3e3){let s=0;for(;s<e;){let x=document.querySelector(i);if(x)return x;await new Promise(_=>setTimeout(_,50)),s+=50}return null}async renderPayPalButtons(i){if(i||(i=this.transactionNumber()||null),!i)throw new Error("renderPayPalButtons: nTransaccion is required");this.paypalButtonsRendered.set(!1);try{await this.loadPayPalSdk(),this.renderingPaypal.set(!0);let e=this.pendingPaymentPayload||{n_transaccion:i},a=await this.checkoutService.createPaypalOrder(i,e);if(!a||!a.orderId){this.errorMessage.set("No se pudo crear la orden de PayPal");return}let s=a.orderId;this.paypalOrderId.set(s);let x=window.paypal;if(!x)throw new Error("PayPal SDK not present");let _=await this.waitForContainer("#paypal-button-container",5e3);if(!_){this.errorMessage.set("No se pudo inicializar PayPal"),this.renderingPaypal.set(!1);return}_.innerHTML="",await x.Buttons({createOrder:()=>s,onApprove:async(k,v)=>{try{let I=await this.checkoutService.capturePaypalOrder(i,k.orderID||s,this.pendingPaymentPayload);this.paypalButtonsRendered.set(!0),this.showSuccess.set(!0),this.pendingPaymentPayload=void 0,this.useWalletBalance()&&this.walletAmount()>0&&this.walletService.loadWallet(),setTimeout(()=>{this.profileStudentService.reloadProfile(),this.purchasesService.loadPurchasedProducts(),this.profileService.reloadProfile()},1500),this.isDirectBuy()||this.cartService.clearCart()}catch{this.errorMessage.set("Error al procesar el pago"),this.renderingPaypal.set(!1)}},onError:k=>{this.errorMessage.set("Error al cargar PayPal"),this.renderingPaypal.set(!1),this.paypalButtonsRendered.set(!1)},onCancel:k=>{this.renderingPaypal.set(!1),this.paypalButtonsRendered.set(!1),this.pendingPaymentPayload=void 0},style:{layout:"vertical",color:"gold",shape:"rect",label:"paypal",height:45}}).render("#paypal-button-container"),this.paypalButtonsRendered.set(!0),this.renderingPaypal.set(!1)}catch{this.errorMessage.set("No se pudo iniciar PayPal"),this.paypalButtonsRendered.set(!1)}}debugRenderPayPalNow(){let i=this.transactionNumber()||this.checkoutService.generateTransactionNumber();this.renderPayPalButtons(i)}checkCoupon(){let i=this.couponCode().trim();if(!i)return;let e="";if(this.isDirectBuy()&&this.product())e=this.product()._id;else if(this.cartItems().length>0)e=this.cartItems()[0]._id;else return;this.isCheckingCoupon.set(!0),this.couponError.set(""),this.appliedCoupon.set(null),this.couponService.validateCoupon(i,e).subscribe({next:a=>{a.valid?this.appliedCoupon.set(a.coupon):this.couponError.set(a.message||"Cup\xF3n no v\xE1lido"),this.isCheckingCoupon.set(!1)},error:a=>{this.couponError.set(a.error?.message||"Error al validar cup\xF3n"),this.isCheckingCoupon.set(!1)}})}removeCoupon(){this.appliedCoupon.set(null),this.couponCode.set(""),this.couponError.set("")}static \u0275fac=function(e){return new(e||o)};static \u0275cmp=Q({type:o,selectors:[["app-checkout"]],decls:124,vars:25,consts:[[1,"min-h-screen","max-h-screen","bg-gradient-to-b","from-slate-900","to-slate-800","py-8","px-4","overflow-y-auto"],[1,"max-w-7xl","mx-auto"],[1,"mb-8"],["routerLink","/",1,"inline-flex","items-center","text-gray-400","hover:text-white","transition-colors","mb-4"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","mr-2"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M10 19l-7-7m0 0l7-7m-7 7h18"],[1,"text-3xl","font-bold","text-white"],[1,"text-gray-400","mt-2"],["aria-labelledby","modal-title","role","dialog","aria-modal","true",1,"fixed","inset-0","z-50","overflow-y-auto"],[1,"mb-6","bg-red-500/10","border","border-red-500/50","rounded-lg","p-4"],[1,"mb-6","bg-blue-500/10","border","border-blue-500/50","rounded-lg","p-6"],[1,"grid","grid-cols-1","lg:grid-cols-3","gap-8"],[1,"lg:col-span-2","space-y-6"],[1,"bg-gradient-to-r","from-lime-500/10","via-green-500/10","to-emerald-500/10","rounded-xl","p-6","border","border-lime-500/30","shadow-lg"],[1,"bg-slate-800/50","rounded-lg","border","border-white/10","p-6"],[1,"mb-6","p-5","bg-gradient-to-r","from-green-500/10","to-lime-500/10","border-2","border-lime-400/50","rounded-xl"],[1,"text-xl","font-semibold","text-white","mb-4"],[1,"p-4","bg-lime-500/10","border-2","border-lime-400/50","rounded-lg"],[1,"space-y-4",3,"formGroup"],[1,"block","text-sm","font-medium","text-gray-300","mb-2"],["type","text","formControlName","billingName","placeholder","Juan P\xE9rez",1,"w-full","px-4","py-2","bg-slate-700","border","border-slate-600","rounded-lg","text-white","placeholder-gray-400","focus:outline-none","focus:ring-2","focus:ring-lime-400","focus:border-transparent"],[1,"mt-1","text-xs","text-red-400"],["type","email","formControlName","billingEmail","placeholder","correo@ejemplo.com",1,"w-full","px-4","py-2","bg-slate-700","border","border-slate-600","rounded-lg","text-white","placeholder-gray-400","focus:outline-none","focus:ring-2","focus:ring-lime-400","focus:border-transparent"],["type","tel","formControlName","billingPhone","placeholder","+52 123 456 7890",1,"w-full","px-4","py-2","bg-slate-700","border","border-slate-600","rounded-lg","text-white","placeholder-gray-400","focus:outline-none","focus:ring-2","focus:ring-lime-400","focus:border-transparent"],[1,"flex","items-start"],["type","checkbox","formControlName","acceptTerms",1,"mt-1","h-4","w-4","text-lime-400","focus:ring-lime-400","border-gray-600","rounded","bg-slate-700"],[1,"ml-2","text-sm","text-gray-300"],["href","#",1,"text-lime-400","hover:text-lime-300"],[1,"text-xs","text-red-400"],[1,"lg:col-span-1"],[1,"bg-slate-800/50","rounded-lg","border","border-white/10","p-6","sticky","top-4"],[1,"rounded-2xl","border","border-white/10","bg-slate-900/50","overflow-hidden"],[1,"p-4","border-b","border-white/10","bg-white/5"],[1,"font-semibold","text-white"],[1,"divide-y","divide-white/10"],[1,"p-4","flex","gap-4"],[1,"p-4","bg-white/5","flex","flex-col","items-end","justify-center"],[1,"flex","items-center","justify-between","w-full"],[1,"text-white/60"],[1,"text-2xl","font-bold","text-white"],[1,"text-sm","text-lime-400","font-mono","mt-1"],[1,"p-4","bg-white/5","border-t","border-slate-700"],[1,"flex","items-center","justify-between","p-3","bg-lime-500/10","border","border-lime-500/30","rounded-lg"],[1,"border-t","border-slate-700","pt-4","space-y-2","mb-6"],[1,"flex","justify-between","text-gray-400"],[1,"flex","justify-between","text-lime-400"],[1,"flex","justify-between","text-xl","font-bold","text-white","pt-2","border-t","border-slate-700"],[1,"text-lime-400"],[1,"text-sm","text-center","text-gray-400","mt-3"],[1,"mt-4","flex","items-center","justify-center","text-xs","text-gray-500"],["fill","currentColor","viewBox","0 0 20 20",1,"w-4","h-4","mr-1","text-lime-400"],["fill-rule","evenodd","d","M5 9V7a5 5 0 0110 0v2a2 2 0 012 2v5a2 2 0 01-2 2H5a2 2 0 01-2-2v-5a2 2 0 012-2zm8-2v2H7V7a3 3 0 016 0z","clip-rule","evenodd"],[1,"mt-8","bg-slate-800/30","rounded-lg","border","border-white/10","p-6"],[1,"grid","grid-cols-1","md:grid-cols-3","gap-6"],[1,"flex","items-start","space-x-3"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-6","h-6","text-lime-400","flex-shrink-0"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"],[1,"font-semibold","text-white","mb-1"],[1,"text-sm","text-gray-400"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"],[1,"fixed","inset-0","bg-black/75","transition-opacity",3,"click"],[1,"flex","min-h-full","items-center","justify-center","p-4"],[1,"relative","transform","overflow-hidden","rounded-lg","bg-slate-800","text-left","shadow-xl","transition-all","w-full","max-w-md","border","border-lime-400/50",3,"click"],[1,"bg-slate-800","px-6","py-6"],[1,"mx-auto","flex","h-12","w-12","items-center","justify-center","rounded-full","bg-lime-100"],["fill","none","viewBox","0 0 24 24","stroke-width","1.5","stroke","currentColor",1,"h-6","w-6","text-lime-600"],["stroke-linecap","round","stroke-linejoin","round","d","M4.5 12.75l6 6 9-13.5"],[1,"mt-4","text-center"],["id","modal-title",1,"text-xl","font-semibold","leading-6","text-white"],[1,"mt-2","text-lg","text-lime-300"],[1,"mt-4","text-sm","text-gray-300","space-y-3"],[1,"p-3","bg-lime-500/10","border","border-lime-400/30","rounded-lg"],[1,"text-lime-400","font-semibold","flex","items-center","justify-center","gap-2"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M13 10V3L4 14h7v7l9-11h-7z"],[1,"text-xs","text-gray-400","mt-1"],[1,"mt-6"],["type","button",1,"w-full","inline-flex","justify-center","rounded-md","bg-lime-500","px-4","py-3","text-sm","font-semibold","text-slate-900","shadow-sm","hover:bg-lime-400","focus:outline-none","focus:ring-2","focus:ring-offset-2","focus:ring-lime-500","focus:ring-offset-slate-800","transition-colors",3,"click"],[1,"flex","items-center"],["fill","currentColor","viewBox","0 0 20 20",1,"w-5","h-5","text-red-500","mr-2"],["fill-rule","evenodd","d","M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule","evenodd"],[1,"text-red-400","text-sm"],[1,"flex","items-start","gap-4"],[1,"flex-shrink-0"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-12","h-12","text-blue-400"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"],[1,"flex-1"],[1,"text-lg","font-bold","text-blue-300","mb-2"],[1,"text-gray-300","mb-3"],[1,"flex","gap-3"],["routerLink","/profile-student",1,"inline-flex","items-center","gap-2","px-4","py-2","bg-blue-500","hover:bg-blue-600","text-white","rounded-lg","transition-colors"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"],["routerLink","/",1,"inline-flex","items-center","gap-2","px-4","py-2","bg-slate-700","hover:bg-slate-600","text-white","rounded-lg","transition-colors"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"],[1,"flex","items-center","justify-center","py-8"],[1,"text-center"],[1,"animate-spin","rounded-full","h-12","w-12","border-b-2","border-lime-400","mx-auto","mb-3"],[1,"flex","items-center","justify-between","mb-6"],[1,"flex","items-center","gap-4"],[1,"relative"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-10","h-10","text-lime-400"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"],[1,"absolute","-top-1","-right-1","flex","h-4","w-4"],[1,"text-base","font-semibold","text-gray-300","mb-1"],[1,"text-3xl","font-black","text-lime-400"],[1,"inline-flex","items-center","gap-1.5","mt-2","px-3","py-1","bg-green-500/20","border","border-green-400/40","rounded-full"],[1,"inline-flex","items-center","gap-1.5","mt-2","px-3","py-1","bg-blue-500/20","border","border-blue-400/40","rounded-full"],[1,"relative","inline-flex","items-center","cursor-pointer","group"],["type","checkbox",1,"sr-only","peer",3,"change","checked"],[1,"w-16","h-8","bg-slate-700","peer-focus:outline-none","peer-focus:ring-4","peer-focus:ring-lime-300/50","rounded-full","peer","peer-checked:after:translate-x-full","rtl:peer-checked:after:-translate-x-full","peer-checked:after:border-white","after:content-['']","after:absolute","after:top-1","after:start-[4px]","after:bg-white","after:border-gray-300","after:border","after:rounded-full","after:h-6","after:w-6","after:transition-all","peer-checked:bg-lime-500","shadow-lg"],[1,"ms-3","text-sm","font-semibold","text-white","group-hover:text-lime-300","transition-colors"],[1,"bg-slate-900/50","backdrop-blur-sm","rounded-xl","p-5","space-y-3","border","border-white/5"],[1,"mt-5","pt-5","border-t","border-white/10"],[1,"animate-ping","absolute","inline-flex","h-full","w-full","rounded-full","bg-green-400","opacity-75"],[1,"relative","inline-flex","rounded-full","h-4","w-4","bg-green-500","items-center","justify-center"],["fill","currentColor","viewBox","0 0 20 20",1,"w-2.5","h-2.5","text-white"],["fill-rule","evenodd","d","M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z","clip-rule","evenodd"],["fill","currentColor","viewBox","0 0 20 20",1,"w-3.5","h-3.5","text-green-400"],["fill-rule","evenodd","d","M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z","clip-rule","evenodd"],[1,"text-xs","font-bold","text-green-300"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-3.5","h-3.5","text-blue-400"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"],[1,"text-xs","font-bold","text-blue-300"],[1,"flex","justify-between","items-center","text-sm"],[1,"text-slate-300","flex","items-center","gap-2"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293 2.293c-.63.63-.184 1.707.707 1.707H17m0 0a2 2 0 100 4 2 2 0 000-4zm-8 2a2 2 0 11-4 0 2 2 0 014 0z"],[1,"flex","flex-col","items-end"],[1,"text-white","font-bold"],[1,"text-lime-300","flex","items-center","gap-2","font-semibold"],[1,"text-lime-400","font-bold"],[1,"h-px","bg-gradient-to-r","from-transparent","via-white/20","to-transparent","my-3"],[1,"flex","justify-between","items-center"],[1,"text-white","font-bold","text-base"],[1,"mt-4","p-4","bg-gradient-to-r","from-green-500/20","to-emerald-500/20","border","border-green-500/50","rounded-lg","animate-pulse-slow"],[1,"mt-4","p-4","bg-gradient-to-r","from-blue-500/20","to-indigo-500/20","border","border-blue-500/50","rounded-lg"],[1,"flex","items-center","gap-3"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-10","h-10","text-green-400"],[1,"text-lg","font-bold","text-green-300","flex","items-center","gap-2"],[1,"inline-flex","items-center","px-2","py-0.5","rounded-full","text-xs","font-bold","bg-green-500","text-white","animate-bounce"],[1,"text-sm","text-green-200","mt-1"],["fill","currentColor","viewBox","0 0 20 20",1,"w-6","h-6","text-green-400","animate-pulse"],["d","M11.3 1.046A1 1 0 0112 2v5h4a1 1 0 01.82 1.573l-7 10A1 1 0 018 18v-5H4a1 1 0 01-.82-1.573l7-10a1 1 0 011.12-.38z"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-8","h-8","text-blue-400","flex-shrink-0"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"],[1,"text-base","font-bold","text-blue-300"],[1,"text-sm","text-blue-200","mt-1"],[1,"font-bold"],[1,"text-blue-300","mx-2"],[1,"flex","items-center","justify-between","mb-3"],[1,"text-sm","font-semibold","text-gray-300","flex","items-center","gap-2"],["routerLink","/wallet",1,"text-xs","text-lime-400","hover:text-lime-300","font-semibold","flex","items-center","gap-1"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-3","h-3"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 5l7 7-7 7"],[1,"space-y-2"],[1,"flex","items-center","justify-between","p-2.5","bg-slate-800/50","rounded-lg","hover:bg-slate-800/70","transition-colors"],[1,"flex","items-center","gap-2.5","flex-1","min-w-0"],[1,"text-xl","flex-shrink-0"],[1,"flex-1","min-w-0"],[1,"text-xs","font-medium","text-white","truncate"],[1,"text-xs","text-gray-400"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-12","h-12","text-lime-400"],[1,"text-2xl","font-bold","text-lime-300","mb-2"],[1,"text-base","text-gray-300"],[1,"text-sm","text-gray-400","mt-1","block"],[1,"mb-3","text-xs","text-gray-400"],[1,"space-y-3"],["type","button",1,"w-full","flex","items-center","justify-between","p-4","border-2","border-slate-700","rounded-lg","hover:border-lime-400/50","transition-all",3,"border-lime-400","bg-lime-400/10"],[1,"w-full","flex","items-center","justify-between","p-4","border-2","border-red-900/50","rounded-lg","bg-red-900/10","opacity-50","cursor-not-allowed"],["type","button",1,"w-full","flex","items-center","justify-between","p-4","border-2","border-slate-700","rounded-lg","hover:border-lime-400/50","transition-all",3,"click"],[1,"flex","items-center","space-x-3"],[1,"text-2xl"],[1,"text-left"],[1,"font-medium","text-white"],[1,"text-xs","text-lime-400"],["fill","currentColor","viewBox","0 0 20 20",1,"w-6","h-6","text-lime-400"],[1,"text-2xl","opacity-50"],[1,"font-medium","text-gray-500"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-6","h-6","text-red-500"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-8","h-8","text-lime-400","flex-shrink-0"],[1,"text-lg","font-bold","text-lime-300"],[1,"text-sm","text-gray-300","mt-1"],["alt","Imagen del producto",1,"w-20","h-20","rounded-lg","object-cover","bg-slate-800",3,"src"],[1,"flex","items-start","justify-between","gap-4"],[1,"text-xs","text-lime-400","font-medium","mb-1"],[1,"text-white","font-medium","line-clamp-2"],[1,"text-sm","text-white/50","mt-1","line-clamp-1"],[1,"text-right"],[1,"text-lg","font-bold","text-white"],[1,"text-xs","text-white/40","line-through"],[1,"text-xs","text-lime-400","mt-1"],[1,"p-4","flex","gap-4","group","relative"],["title","Eliminar del carrito",1,"absolute","top-2","right-2","p-1","text-white/20","hover:text-red-400","transition","opacity-0","group-hover:opacity-100",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M6 18L18 6M6 6l12 12"],[1,"flex","gap-2"],["type","text","placeholder","C\xF3digo de cup\xF3n",1,"flex-1","bg-slate-700","border","border-slate-600","rounded-lg","px-3","py-2","text-sm","text-white","placeholder-gray-400","focus:outline-none","focus:ring-2","focus:ring-lime-500",3,"input","keyup.enter","value"],[1,"px-4","py-2","bg-slate-700","hover:bg-slate-600","text-white","rounded-lg","text-sm","font-medium","transition-colors","disabled:opacity-50",3,"click","disabled"],[1,"text-xs","text-red-400","mt-2"],[1,"flex","items-center","gap-2"],["fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"w-5","h-5","text-lime-400"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M7 7h.01M7 3h5c.512 0 1.024.195 1.414.586l7 7a2 2 0 010 2.828l-7 7a2 2 0 01-2.828 0l-7-7A1.994 1.994 0 013 12V7a4 4 0 014-4z"],[1,"text-sm","font-bold","text-lime-400"],[1,"text-xs","text-lime-300/80"],[1,"text-slate-400","hover:text-white",3,"click"],["fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"w-4","h-4"],["type","button",1,"w-full","bg-lime-400","text-slate-900","font-bold","py-3","px-6","rounded-lg","hover:bg-lime-500","disabled:bg-slate-600","disabled:cursor-not-allowed","transition-all","flex","items-center","justify-center",3,"disabled"],["id","paypal-button-container",1,"mt-4",2,"min-height","150px","width","100%","display","block","visibility","visible"],[1,"mt-4","text-sm","text-gray-400"],[1,"mt-2"],["type","button",1,"w-full","bg-slate-700","text-slate-300","font-bold","py-2","px-6","rounded-lg","opacity-50","cursor-not-allowed","transition-all","flex","items-center","justify-center"],["fill","none","viewBox","0 0 24 24",1,"w-4","h-4","mr-2"],["cx","12","cy","12","r","10","stroke","currentColor","stroke-width","4",1,"opacity-25"],["type","button",1,"w-full","bg-lime-400","text-slate-900","font-bold","py-3","px-6","rounded-lg","hover:bg-lime-500","disabled:bg-slate-600","disabled:cursor-not-allowed","transition-all","flex","items-center","justify-center",3,"click","disabled"],["fill","none","viewBox","0 0 24 24",1,"animate-spin","h-5","w-5","mr-2"],["fill","currentColor","d","M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z",1,"opacity-75"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-6","h-6","mr-2"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"],["type","button","disabled","",1,"w-full","bg-slate-700","text-slate-300","font-bold","py-3","px-6","rounded-lg","opacity-50","cursor-not-allowed","transition-all","flex","items-center","justify-center"],[1,"opacity-75","text-xs","ml-1"]],template:function(e,a){if(e&1&&(t(0,"div",0)(1,"div",1)(2,"div",2)(3,"a",3),m(),t(4,"svg",4),c(5,"path",5),n(),r(6," Volver "),n(),g(),t(7,"h1",6),r(8,"Finalizar Compra"),n(),t(9,"p",7),r(10,"Completa tu pedido de forma segura"),n()(),u(11,Ie,25,1,"div",8),u(12,Be,6,1,"div",9),u(13,Ne,19,2,"div",10),t(14,"div",11)(15,"div",12),u(16,Ve,6,0,"div",13),u(17,ze,22,8,"div",13),t(18,"div",14),u(19,Re,16,0,"div",15),t(20,"h2",16),u(21,Oe,2,3)(22,Xe,1,0)(23,qe,1,0),n(),u(24,it,4,1)(25,nt,9,0,"div",17),n(),t(26,"div",14)(27,"h2",16),r(28,"Datos Personales"),n(),t(29,"form",18)(30,"div")(31,"label",19),r(32,"Nombre Completo *"),n(),c(33,"input",20),u(34,ot,2,0,"p",21),n(),t(35,"div")(36,"label",19),r(37,"Email *"),n(),c(38,"input",22),u(39,at,2,0,"p",21),n(),t(40,"div")(41,"label",19),r(42,"Tel\xE9fono (Opcional)"),n(),c(43,"input",23),n(),t(44,"div",24),c(45,"input",25),t(46,"label",26),r(47," Acepto los "),t(48,"a",27),r(49,"t\xE9rminos y condiciones"),n(),r(50," y la "),t(51,"a",27),r(52,"pol\xEDtica de privacidad"),n()()(),u(53,rt,2,0,"p",28),n()()(),t(54,"div",29)(55,"div",30)(56,"h2",16),r(57,"Resumen del Pedido"),n(),t(58,"div",31)(59,"div",32)(60,"h2",33),r(61,"Resumen del pedido"),n()(),t(62,"div",34),u(63,dt,14,5,"div",35)(64,mt,2,0),n(),t(65,"div",36)(66,"div",37)(67,"span",38),r(68,"Total a pagar"),n(),t(69,"span",39),r(70),y(71,"mxnCurrency"),n()(),t(72,"span",40),r(73),y(74,"mxnCurrency"),n()(),t(75,"div",41),u(76,pt,5,4)(77,gt,12,2,"div",42),n(),t(78,"div",43)(79,"div",44)(80,"span"),r(81,"Subtotal"),n(),t(82,"span"),r(83),n()(),u(84,ft,5,1,"div",45)(85,vt,5,0,"div",44),t(86,"div",46)(87,"span"),r(88,"Total"),n(),t(89,"span",47),r(90),n()()(),u(91,wt,2,1)(92,Dt,3,1),u(93,Nt,3,1,"p",48),t(94,"div",49),m(),t(95,"svg",50),c(96,"path",51),n(),r(97," Pago seguro y encriptado "),n()()()(),g(),t(98,"div",52)(99,"div",53)(100,"div",54),m(),t(101,"svg",55),c(102,"path",56),n(),g(),t(103,"div")(104,"h3",57),r(105,"Pago Seguro"),n(),t(106,"p",58),r(107,"Tus datos est\xE1n protegidos con encriptaci\xF3n SSL"),n()()(),t(108,"div",54),m(),t(109,"svg",55),c(110,"path",59),n(),g(),t(111,"div")(112,"h3",57),r(113,"Acceso Inmediato"),n(),t(114,"p",58),r(115,"Accede a tus cursos inmediatamente despu\xE9s del pago"),n()()(),t(116,"div",54),m(),t(117,"svg",55),c(118,"path",60),n(),g(),t(119,"div")(120,"h3",57),r(121,"Confirmaci\xF3n por Email"),n(),t(122,"p",58),r(123,"Recibir\xE1s un comprobante de tu compra"),n()()()()()()()()),e&2){let s,x,_,k;l(11),p(a.showSuccess()?11:-1),l(),p(a.errorMessage()?12:-1),l(),p(a.alreadyPurchased()&&a.isDirectBuy()?13:-1),l(3),p(a.isLoadingWallet()?16:-1),l(),p(a.walletBalance()>0&&!a.isLoadingWallet()?17:-1),l(2),p(a.isFreeProduct()?19:-1),l(2),p(a.useWalletBalance()&&a.remainingAmount()>0?21:a.useWalletBalance()&&a.remainingAmount()===0?22:23),l(3),p(a.remainingAmount()>0||!a.useWalletBalance()?24:25),l(5),N("formGroup",a.checkoutForm),l(5),p((s=a.checkoutForm.get("billingName"))!=null&&s.invalid&&((s=a.checkoutForm.get("billingName"))!=null&&s.touched)?34:-1),l(5),p((x=a.checkoutForm.get("billingEmail"))!=null&&x.invalid&&((x=a.checkoutForm.get("billingEmail"))!=null&&x.touched)?39:-1),l(14),p((_=a.checkoutForm.get("acceptTerms"))!=null&&_.invalid&&((_=a.checkoutForm.get("acceptTerms"))!=null&&_.touched)?53:-1),l(10),p(a.isDirectBuy()?63:64),l(7),h("",w(71,21,a.subtotal())," MXN"),l(3),h(" ",w(74,23,a.subtotal())," "),l(3),p(a.appliedCoupon()?77:76),l(7),h("$",a.formatPrice(a.originalPrice())),l(),p((k=a.bestDiscount())?84:85,k),l(6),h("$",a.formatPrice(a.subtotal())," MXN"),l(),p(a.selectedPaymentMethod()==="paypal"?91:92),l(2),p(a.useWalletBalance()?93:-1)}},dependencies:[ne,Ce,fe,pe,ue,xe,he,_e,ve,ae,te,ie,ce],encapsulation:2})};export{Me as CheckoutComponent};
