import{a as xt}from"./chunk-EBA73VGJ.js";import{a as yt,c as St}from"./chunk-UD4Q7ATB.js";import{a as wt}from"./chunk-337JWICE.js";import{a as _t,b as R}from"./chunk-2RMWUCMB.js";import{a as Mt}from"./chunk-NOVASSOE.js";import{a as ut,d as ht,e as D,g as vt,h as gt}from"./chunk-UKUKXRH6.js";import{a as H}from"./chunk-TCGJFX72.js";import{b as bt,d as Et,i as kt,w as Tt}from"./chunk-SDJWNAN2.js";import"./chunk-J4IQXLML.js";import{Ab as U,Ac as dt,Bb as $,C as X,Eb as Q,Fb as lt,Gb as y,Ib as w,Kc as ft,Lb as st,Lc as Ct,Ma as l,Mb as mt,Nb as ct,O as Y,T as s,Xa as T,Y as _,Z as x,_ as C,ba as tt,dc as pt,ga as et,hb as u,ia as nt,ib as f,k as q,ka as L,lb as ot,mb as it,nb as rt,ob as p,p as K,pb as m,qb as k,rb as h,sb as v,tb as M,ub as A,wb as F,x as Z,xb as at,yb as d,z as J,zb as N}from"./chunk-6JS7X5LE.js";import"./chunk-I4MTPUBM.js";function a(t){return()=>{let i=s(R),e=s(D);return xt(i.isSessionLoaded).pipe(Z(n=>n),X(1),K(()=>{let n=i.user();return n&&t.includes(n.rol)?!0:e.createUrlTree(["/login"])}))}}var At=[{path:"",loadComponent:()=>import("./chunk-PG2NEVAI.js").then(t=>t.HomeComponent),pathMatch:"full"},{path:"admin-instructor-payments",loadComponent:()=>import("./chunk-HD2IIDPB.js").then(t=>t.AdminInstructorPaymentsComponent),canActivate:[a(["admin"])]},{path:"admin-instructor-payments/:id",loadComponent:()=>import("./chunk-G37XK5I6.js").then(t=>t.AdminInstructorEarningsDetailComponent),canActivate:[a(["admin"])]},{path:"admin-commission-settings",loadComponent:()=>import("./chunk-HXZLVNYH.js").then(t=>t.AdminCommissionSettingsComponent),canActivate:[a(["admin"])]},{path:"admin-payment-history",loadComponent:()=>import("./chunk-UG4VMSO3.js").then(t=>t.AdminPaymentHistoryComponent),canActivate:[a(["admin"])]},{path:"admin-tax-breakdown",loadComponent:()=>import("./chunk-J3OLBXGD.js").then(t=>t.AdminTaxBreakdownComponent),canActivate:[a(["admin"])]},{path:"instructors",loadComponent:()=>import("./chunk-Z67WVZAY.js").then(t=>t.InstructorsComponent)},{path:"login",loadComponent:()=>import("./chunk-OMEI5SDE.js").then(t=>t.LoginComponent)},{path:"register",loadComponent:()=>import("./chunk-N2YKBFKD.js").then(t=>t.RegisterComponent)},{path:"verify-otp",loadComponent:()=>import("./chunk-GKYZNT65.js").then(t=>t.VerifyOtpComponent)},{path:"forgot-password",loadComponent:()=>import("./chunk-22MFPYV3.js").then(t=>t.ForgotPasswordComponent)},{path:"course-detail/:slug",loadComponent:()=>import("./chunk-KEDGAJWT.js").then(t=>t.CourseDetailComponent)},{path:"project-detail/:id",loadComponent:()=>import("./chunk-RYGSWG5G.js").then(t=>t.ProjectDetailComponent)},{path:"checkout",loadComponent:()=>import("./chunk-2QB67CO2.js").then(t=>t.CheckoutComponent),canActivate:[a(["cliente"])]},{path:"dashboard",loadComponent:()=>import("./chunk-62V6F2JS.js").then(t=>t.DashboardComponent),canActivate:[a(["admin","instructor"])]},{path:"carousel-dashboard",loadComponent:()=>import("./chunk-YTPMFZYM.js").then(t=>t.CarouselDashboard),canActivate:[a(["admin","instructor"])]},{path:"learning/:slug",loadComponent:()=>import("./chunk-FEYI54JE.js").then(t=>t.LearningComponent),canActivate:[a(["cliente","admin"])]},{path:"profile-instructor",loadComponent:()=>import("./chunk-N26MPMCI.js").then(t=>t.ProfileInstructorComponent),canActivate:[a(["instructor"])]},{path:"profile-admin",loadComponent:()=>import("./chunk-KWGB5KJE.js").then(t=>t.ProfileAdminComponent),canActivate:[a(["admin"])]},{path:"profile-student",loadComponent:()=>import("./chunk-CLUTBS2Q.js").then(t=>t.ProfileStudentComponent),canActivate:[a(["cliente"])]},{path:"wallet",loadComponent:()=>import("./chunk-KNUG45PW.js").then(t=>t.WalletComponent),canActivate:[a(["cliente"])]},{path:"admin-wallets",loadComponent:()=>import("./chunk-AKSIQVX3.js").then(t=>t.AdminWalletsComponent),canActivate:[a(["admin"])]},{path:"sales",loadComponent:()=>import("./chunk-YWH3CRQ4.js").then(t=>t.SalesComponent),canActivate:[a(["admin","instructor"])]},{path:"payment-settings",loadComponent:()=>import("./chunk-P4VMIEHG.js").then(t=>t.AdminPaymentSettingsComponent)},{path:"users",loadComponent:()=>import("./chunk-LNLORYKE.js").then(t=>t.UsersComponent),canActivate:[a(["admin"])]},{path:"discounts",loadComponent:()=>import("./chunk-NPDYD6R4.js").then(t=>t.DiscountsComponent),canActivate:[a(["admin","instructor"])]},{path:"instructor-payment-config",loadComponent:()=>import("./chunk-OMREJDGM.js").then(t=>t.InstructorPaymentConfigComponent),canActivate:[a(["instructor"])]},{path:"instructor-earnings",loadComponent:()=>import("./chunk-KE6TCI3U.js").then(t=>t.InstructorEarningsComponent),canActivate:[a(["instructor"])]},{path:"instructor-payment-history",loadComponent:()=>import("./chunk-BXMEILCG.js").then(t=>t.InstructorPaymentHistoryComponent),canActivate:[a(["instructor"])]},{path:"instructor/:slug",loadComponent:()=>import("./chunk-DJ2QZ3EG.js").then(t=>t.InstructorProfileComponent)},{path:"privacy-policy",loadComponent:()=>import("./chunk-JTP7QLLN.js").then(t=>t.PrivacyPolicyComponent)},{path:"terms-conditions",loadComponent:()=>import("./chunk-4ONYPRV7.js").then(t=>t.TermsConditionsComponent)},{path:"payment-success",loadComponent:()=>import("./chunk-WIYNIQJJ.js").then(t=>t.PaymentSuccessComponent)},{path:"payment-failure",loadComponent:()=>import("./chunk-WDGRIJJR.js").then(t=>t.PaymentFailureComponent)},{path:"**",redirectTo:""}];var It=(t,i)=>{let n=s(R).token();if(n){let o=t.clone({headers:t.headers.set("Authorization",`Bearer ${n}`)});return i(o)}return i(t)};var Vt=(t,i)=>{let e=s(D),n=s(H);return i(t).pipe(J(o=>{if(o.status===401||o.status===403){let c=o.error?.message_text&&o.error?.message===403&&(o.error?.blockedBy||o.error?.count!==void 0),g=o.error?.message==="NO ESTA PERMITIDO VISITAR ESTA P\xC1GINA"||o.error?.message==="EL TOKEN ES INV\xC1LIDO"||o.error?.message==="No se proporcion\xF3 un token de autenticaci\xF3n."||o.error?.message==='Formato de token inv\xE1lido. Se esperaba "Bearer <token>".',S=t.url.includes("/login"),b=t.url.includes("/profile"),E=t.url.includes("/verify-otp");!S&&!b&&!E&&(g||o.status===401&&!c)&&(typeof window<"u"&&window.localStorage&&(localStorage.removeItem("token"),localStorage.removeItem("user")),n.warning("Sesi\xF3n expirada","Tu sesi\xF3n ha expirado. Por favor inicia sesi\xF3n nuevamente."),setTimeout(()=>{e.navigate(["/login"],{queryParams:{sessionExpired:"true"}})},500))}if(o.status===429){let c=o.error?.retryAfter||60,g=Math.ceil(c/60);n.warning("Demasiadas peticiones",`Por favor espera ${g} minuto${g>1?"s":""} antes de intentar nuevamente.`)}return o.status===0&&n.networkError(),o.status===500&&n.serverError(),q(()=>o)}))};var B=class t{logger=s(_t);handleError(i){}static \u0275fac=function(e){return new(e||t)};static \u0275prov=Y({token:t,factory:t.\u0275fac})};var Pt={providers:[nt(),pt(),vt(At,gt()),ft(Ct([Vt,It])),{provide:et,useClass:B}]};var Ft=(t,i)=>i.id;function Lt(t,i){t&1&&(C(),h(0,"svg",4),M(1,"path",14),v())}function Dt(t,i){t&1&&(C(),h(0,"svg",5),M(1,"path",15),v())}function Ht(t,i){t&1&&(C(),h(0,"svg",6),M(1,"path",16),v())}function Rt(t,i){t&1&&(C(),h(0,"svg",7),M(1,"path",17),v())}function Bt(t,i){if(t&1&&(h(0,"p",10),y(1),v()),t&2){let e=d().$implicit;l(),w(" ",e.message," ")}}function Ot(t,i){if(t&1){let e=A();h(0,"div",2)(1,"div",3),u(2,Lt,2,0,":svg:svg",4)(3,Dt,2,0,":svg:svg",5)(4,Ht,2,0,":svg:svg",6)(5,Rt,2,0,":svg:svg",7),v(),h(6,"div",8)(7,"p",9),y(8),v(),u(9,Bt,2,1,"p",10),v(),h(10,"button",11),at("click",function(){let o=_(e).$implicit,c=d();return x(c.toastService.remove(o.id))}),C(),h(11,"svg",12),M(12,"path",13),v()()()}if(t&2){let e,n=i.$implicit,o=d();lt(o.getToastClasses(n.type)),l(2),f((e=n.type)==="success"?2:e==="error"?3:e==="warning"?4:e==="info"?5:-1),l(6),w(" ",n.title," "),l(),f(n.message?9:-1)}}var O=class t{toastService=s(H);getToastClasses(i){return`border-l-4 ${{success:"bg-slate-800 border-green-500",error:"bg-slate-800 border-red-500",warning:"bg-slate-800 border-yellow-500",info:"bg-slate-800 border-blue-500"}[i]}`}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=T({type:t,selectors:[["app-toast-container"]],decls:3,vars:0,consts:[[1,"fixed","top-4","right-4","z-[9999]","space-y-3","max-w-md"],[1,"transform","transition-all","duration-300","ease-in-out","rounded-lg","shadow-lg","p-4","flex","items-start","gap-3","animate-slide-in-right",3,"class"],[1,"transform","transition-all","duration-300","ease-in-out","rounded-lg","shadow-lg","p-4","flex","items-start","gap-3","animate-slide-in-right"],[1,"flex-shrink-0"],["fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"w-6","h-6","text-green-400"],["fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"w-6","h-6","text-red-400"],["fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"w-6","h-6","text-yellow-400"],["fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"w-6","h-6","text-blue-400"],[1,"flex-1","min-w-0"],[1,"text-sm","font-semibold","text-white"],[1,"text-sm","text-gray-300","mt-1"],[1,"flex-shrink-0","text-gray-400","hover:text-white","transition-colors",3,"click"],["fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"w-5","h-5"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M6 18L18 6M6 6l12 12"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"]],template:function(e,n){e&1&&(h(0,"div",0),ot(1,Ot,13,5,"div",1,Ft),v()),e&2&&(l(),it(n.toastService.toasts()))},styles:["@keyframes _ngcontent-%COMP%_slide-in-right{0%{transform:translate(100%);opacity:0}to{transform:translate(0);opacity:1}}.animate-slide-in-right[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_slide-in-right .3s ease-out}"]})};var zt=["backdrop"],Gt=["modal"];function Nt(t,i){t&1&&(C(),p(0,"svg",17),k(1,"path",18),m())}function Ut(t,i){t&1&&(C(),p(0,"svg",17),k(1,"path",19),m())}function $t(t,i){t&1&&(C(),p(0,"svg",17),k(1,"path",20),m())}function Qt(t,i){t&1&&(C(),p(0,"svg",17),k(1,"path",21),m())}function Wt(t,i){if(t&1&&(p(0,"div",16),u(1,Nt,2,0,":svg:svg",17),u(2,Ut,2,0,":svg:svg",17),u(3,$t,2,0,":svg:svg",17),u(4,Qt,2,0,":svg:svg",17),m()),t&2){let e,n,o,c,g,S,b,E,I,V,P,j,r=d(2);Q("bg-red-900/20",((e=r.modalService.options())==null?null:e.icon)==="error")("text-red-500",((n=r.modalService.options())==null?null:n.icon)==="error")("bg-yellow-900/20",((o=r.modalService.options())==null?null:o.icon)==="warning")("text-yellow-500",((c=r.modalService.options())==null?null:c.icon)==="warning")("bg-green-900/20",((g=r.modalService.options())==null?null:g.icon)==="success")("text-green-500",((S=r.modalService.options())==null?null:S.icon)==="success")("bg-blue-900/20",((b=r.modalService.options())==null?null:b.icon)==="info")("text-blue-500",((E=r.modalService.options())==null?null:E.icon)==="info"),l(),f(((I=r.modalService.options())==null?null:I.icon)==="warning"?1:-1),l(),f(((V=r.modalService.options())==null?null:V.icon)==="error"?2:-1),l(),f(((P=r.modalService.options())==null?null:P.icon)==="success"?3:-1),l(),f(((j=r.modalService.options())==null?null:j.icon)==="info"?4:-1)}}function qt(t,i){if(t&1){let e=A();p(0,"div",12)(1,"input",22),ct("ngModelChange",function(o){_(e);let c=d(2);return mt(c.localInputValue,o)||(c.localInputValue=o),x(o)}),F("keyup.enter",function(){_(e);let o=d(2);return x(o.confirm())}),m()()}if(t&2){let e,n,o=d(2);l(),rt("type",((e=o.modalService.options())==null?null:e.inputType)||"text")("placeholder",((n=o.modalService.options())==null?null:n.placeholder)||""),st("ngModel",o.localInputValue)}}function Kt(t,i){if(t&1){let e=A();p(0,"button",23),F("click",function(){_(e);let o=d(2);return x(o.cancel())}),y(1),m()}if(t&2){let e,n=d(2);l(),w(" ",(e=n.modalService.options())==null?null:e.cancelText," ")}}function Zt(t,i){if(t&1){let e=A();p(0,"div",2,0)(2,"div",3),F("click",function(){_(e);let o=d();return x(o.onBackdropClick())}),m(),p(3,"div",4,1)(5,"div",5)(6,"div",6),u(7,Wt,5,20,"div",7),p(8,"div",8)(9,"h3",9),y(10),m(),p(11,"div",10)(12,"p",11),y(13),m(),u(14,qt,2,3,"div",12),m()()()(),p(15,"div",13)(16,"button",14),F("click",function(){_(e);let o=d();return x(o.confirm())}),y(17),m(),u(18,Kt,2,1,"button",15),m()()()}if(t&2){let e,n,o,c,g,S,b,E,I,V,P,j,r=d();l(7),f((e=r.modalService.options())!=null&&e.icon?7:-1),l(3),w(" ",(n=r.modalService.options())==null?null:n.title," "),l(3),w(" ",(o=r.modalService.options())==null?null:o.message," "),l(),f((c=r.modalService.options())!=null&&c.isPrompt?14:-1),l(2),Q("bg-red-600",((g=r.modalService.options())==null?null:g.icon)==="error")("hover:bg-red-500",((S=r.modalService.options())==null?null:S.icon)==="error")("focus:ring-red-500",((b=r.modalService.options())==null?null:b.icon)==="error")("bg-indigo-600",((E=r.modalService.options())==null?null:E.icon)!=="error")("hover:bg-indigo-500",((I=r.modalService.options())==null?null:I.icon)!=="error")("focus:ring-indigo-500",((V=r.modalService.options())==null?null:V.icon)!=="error"),l(),w(" ",((P=r.modalService.options())==null?null:P.confirmText)||"Aceptar"," "),l(),f((j=r.modalService.options())!=null&&j.cancelText?18:-1)}}var z=class t{modalService=s(Mt);animateService=s(yt);backdrop;modal;localInputValue="";constructor(){L(()=>{this.modalService.isOpen()&&(this.localInputValue="",setTimeout(()=>{this.backdrop?.nativeElement&&this.modal?.nativeElement&&this.animateService.animateModalEnter(this.backdrop.nativeElement,this.modal.nativeElement)}))})}close(i){this.backdrop?.nativeElement&&this.modal?.nativeElement?this.animateService.animateModalLeave(this.backdrop.nativeElement,this.modal.nativeElement).then(()=>{this.modalService.close(i,this.localInputValue)}):this.modalService.close(i,this.localInputValue)}confirm(){this.modalService.options()?.isPrompt&&this.localInputValue,this.close(!0)}cancel(){this.close(!1)}onBackdropClick(){this.close(!1)}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=T({type:t,selectors:[["app-modal"]],viewQuery:function(e,n){if(e&1&&(N(zt,5),N(Gt,5)),e&2){let o;U(o=$())&&(n.backdrop=o.first),U(o=$())&&(n.modal=o.first)}},decls:1,vars:1,consts:[["backdrop",""],["modal",""],[1,"fixed","inset-0","z-[9999]","flex","items-center","justify-center","p-4","sm:p-0"],[1,"absolute","inset-0","bg-black/60","backdrop-blur-sm","transition-opacity",3,"click"],[1,"relative","transform","overflow-hidden","rounded-2xl","bg-[#1a1b26]","text-left","shadow-2xl","transition-all","sm:my-8","sm:w-full","sm:max-w-lg","border","border-gray-700/50"],[1,"px-4","pb-4","pt-5","sm:p-6","sm:pb-4"],[1,"sm:flex","sm:items-start"],[1,"mx-auto","flex","h-12","w-12","flex-shrink-0","items-center","justify-center","rounded-full","sm:mx-0","sm:h-10","sm:w-10","transition-colors","duration-200",3,"bg-red-900/20","text-red-500","bg-yellow-900/20","text-yellow-500","bg-green-900/20","text-green-500","bg-blue-900/20","text-blue-500"],[1,"mt-3","text-center","sm:ml-4","sm:mt-0","sm:text-left","w-full"],["id","modal-title",1,"text-xl","font-semibold","leading-6","text-white"],[1,"mt-3"],[1,"text-sm","text-gray-300","whitespace-pre-line","leading-relaxed"],[1,"mt-4"],[1,"bg-[#15161e]/50","px-4","py-3","sm:flex","sm:flex-row-reverse","sm:px-6","gap-2"],["type","button",1,"inline-flex","w-full","justify-center","rounded-lg","px-4","py-2.5","text-sm","font-semibold","text-white","shadow-sm","transition-all","duration-200","sm:ml-3","sm:w-auto","focus:outline-none","focus:ring-2","focus:ring-offset-2","focus:ring-offset-[#1a1b26]",3,"click"],["type","button",1,"mt-3","inline-flex","w-full","justify-center","rounded-lg","bg-white/5","px-4","py-2.5","text-sm","font-semibold","text-gray-300","shadow-sm","ring-1","ring-inset","ring-gray-700","hover:bg-white/10","sm:mt-0","sm:w-auto","transition-all","duration-200"],[1,"mx-auto","flex","h-12","w-12","flex-shrink-0","items-center","justify-center","rounded-full","sm:mx-0","sm:h-10","sm:w-10","transition-colors","duration-200"],["fill","none","viewBox","0 0 24 24","stroke-width","1.5","stroke","currentColor",1,"h-6","w-6"],["stroke-linecap","round","stroke-linejoin","round","d","M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126zM12 15.75h.007v.008H12v-.008z"],["stroke-linecap","round","stroke-linejoin","round","d","M12 9v3.75m9-.75a9 9 0 11-18 0 9 9 0 0118 0zm-9 3.75h.008v.008H12v-.008z"],["stroke-linecap","round","stroke-linejoin","round","d","M9 12.75L11.25 15 15 9.75M21 12a9 9 0 11-18 0 9 9 0 0118 0z"],["stroke-linecap","round","stroke-linejoin","round","d","M11.25 11.25l.041-.02a.75.75 0 011.063.852l-.708 2.836a.75.75 0 001.063.853l.041-.021M21 12a9 9 0 11-18 0 9 9 0 0118 0zm-9-3.75h.008v.008H12V8.25z"],[1,"w-full","rounded-md","border-0","bg-white/5","py-1.5","text-white","shadow-sm","ring-1","ring-inset","ring-gray-700","focus:ring-2","focus:ring-inset","focus:ring-indigo-500","sm:text-sm","sm:leading-6","px-3",3,"ngModelChange","keyup.enter","type","placeholder","ngModel"],["type","button",1,"mt-3","inline-flex","w-full","justify-center","rounded-lg","bg-white/5","px-4","py-2.5","text-sm","font-semibold","text-gray-300","shadow-sm","ring-1","ring-inset","ring-gray-700","hover:bg-white/10","sm:mt-0","sm:w-auto","transition-all","duration-200",3,"click"]],template:function(e,n){e&1&&u(0,Zt,19,18,"div",2),e&2&&f(n.modalService.isOpen()?0:-1)},dependencies:[dt,Tt,bt,Et,kt],encapsulation:2})};var G=class t{systemConfigService=s(wt);document=s(tt);constructor(){L(()=>{let i=this.systemConfigService.config();if(i){let e="";if(i.favicon?e=this.systemConfigService.buildFaviconUrl(i.favicon):i.logo&&(e=this.systemConfigService.buildLogoUrl(i.logo)),e){let n=this.document.getElementById("appFavicon");n||(n=this.document.querySelector("link[rel*='icon']")),n||(n=this.document.createElement("link"),n.id="appFavicon",n.rel="icon",this.document.head.appendChild(n)),n.href=e,n.type="image/x-icon"}}})}ngOnInit(){St(),this.systemConfigService.getConfig()}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=T({type:t,selectors:[["app-root"]],decls:4,vars:0,consts:[[1,"min-h-screen","bg-slate-950"]],template:function(e,n){e&1&&(p(0,"div",0),k(1,"router-outlet")(2,"app-toast-container")(3,"app-modal"),m())},dependencies:[ht,O,z],encapsulation:2})};ut(G,Pt).catch(t=>console.error(t));
