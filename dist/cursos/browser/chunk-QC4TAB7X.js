import{a as ne}from"./chunk-TCGJFX72.js";import{b as re,c as M,d as oe,e as ae,f as z,h as E,j as le,n as se,o as de,p as me,q as R,r as B,w as ce,x as $}from"./chunk-SDJWNAN2.js";import{a as S}from"./chunk-HN3U4OFT.js";import{$ as p,Ac as D,Fb as w,Gb as o,Gc as G,Ha as T,Hb as U,Ib as C,Jb as P,Jc as ie,K as q,Kb as te,Ma as l,O as Q,T as V,Xa as L,Y as f,Z as _,_ as c,_b as j,ac as H,ea as J,ec as y,hb as g,ib as x,ja as v,kb as ee,lb as W,ma as K,mb as Y,nb as b,ob as i,p as X,pb as n,qb as d,ub as k,wb as h,wc as N,yb as u}from"./chunk-6JS7X5LE.js";import{a as A,b as I}from"./chunk-I4MTPUBM.js";var O=class r{http=V(ie);allUsersSignal=v([]);isLoading=v(!1);searchTermSignal=v("");roleFilterSignal=v("");stateFilterSignal=v("");filteredUsers=y(()=>{let t=this.allUsersSignal(),e=this.searchTermSignal().toLowerCase(),a=this.roleFilterSignal(),s=this.stateFilterSignal();return e&&(t=t.filter(m=>m.name.toLowerCase().includes(e)||m.surname.toLowerCase().includes(e)||m.email.toLowerCase().includes(e))),a&&(t=t.filter(m=>m.rol===a)),s!==""&&(t=t.filter(m=>(typeof m.state=="boolean"?m.state:m.state===1)===s)),t});setSearchTerm(t){this.searchTermSignal.set(t)}setRoleFilter(t){this.roleFilterSignal.set(t)}setStateFilter(t){this.stateFilterSignal.set(t)}getHeaders(){let t=localStorage.getItem("token");return new G({"Content-Type":"application/json",Authorization:t?`Bearer ${t}`:""})}loadAllUsers(){return this.isLoading.set(!0),this.http.get(`${S.url}users/list`,{headers:this.getHeaders()}).pipe(q({next:t=>{this.allUsersSignal.set(t.users),this.isLoading.set(!1)},error:()=>{this.isLoading.set(!1)}}))}createUser(t){let e=localStorage.getItem("token");return this.http.post(`${S.url}users/register_admin`,t,{headers:new G({Authorization:e?`Bearer ${e}`:""})})}updateUser(t,e){let a=I(A({},e),{_id:t});return this.http.post(`${S.url}users/update`,a,{headers:this.getHeaders()})}updateUserRole(t,e){return this.http.post(`${S.url}users/update`,{_id:t,rol:e},{headers:this.getHeaders()})}updateUserState(t,e){return this.http.put(`${S.url}users/update-state/${t}`,{state:e},{headers:this.getHeaders()}).pipe(q({next:a=>{},error:a=>{}}))}deleteUser(t){return this.http.delete(`${S.url}users/delete/${t}`,{headers:this.getHeaders()})}updateUserWithFile(t,e){e.append("_id",t);let a=localStorage.getItem("token");return this.http.post(`${S.url}users/update`,e,{headers:new G({Authorization:a?`Bearer ${a}`:""})})}getAllUsers(t){let e=t?`${S.url}users/list?role=${t}`:`${S.url}users/list`;return this.http.get(e,{headers:this.getHeaders()}).pipe(X(a=>a&&a.users?a.users:Array.isArray(a)?a:[]))}static \u0275fac=function(e){return new(e||r)};static \u0275prov=Q({token:r,factory:r.\u0275fac,providedIn:"root"})};function ve(r,t){r&1&&(c(),i(0,"svg",14),d(1,"path",18),n())}function fe(r,t){r&1&&(c(),i(0,"svg",14),d(1,"path",19),n())}function _e(r,t){r&1&&(c(),i(0,"svg",14),d(1,"path",20)(2,"path",21),n())}function be(r,t){r&1&&o(0," Crear Nuevo Usuario ")}function Ce(r,t){r&1&&o(0," Editar Usuario ")}function we(r,t){r&1&&o(0," Perfil de Usuario ")}function Se(r,t){r&1&&o(0," Agrega un nuevo miembro a la plataforma ")}function Me(r,t){r&1&&o(0," Actualiza la informaci\xF3n del usuario ")}function Ue(r,t){r&1&&o(0," Informaci\xF3n detallada del perfil ")}function Ee(r,t){if(r&1&&(i(0,"div",34)(1,"div",35)(2,"div",54),c(),i(3,"svg",55),d(4,"path",56),n()(),p(),i(5,"span",39),o(6,"Descripci\xF3n"),n()(),i(7,"p",57),o(8),n()()),r&2){let e=u(3);l(8),U(e.user.description)}}function ye(r,t){if(r&1&&(i(0,"div",51)(1,"span",49),o(2,"Registro:"),n(),i(3,"span",58),o(4),j(5,"date"),n()()),r&2){let e=u(3);l(4),U(H(5,1,e.user.createdAt,"dd/MM/yyyy HH:mm"))}}function ke(r,t){if(r&1){let e=k();i(0,"div",22)(1,"div",23)(2,"div",24)(3,"div",25),d(4,"img",26),i(5,"div",27)(6,"h3",28),o(7),n(),i(8,"p",29),c(),i(9,"svg",30),d(10,"path",31),n(),o(11),n(),p(),i(12,"div",32)(13,"span"),o(14),n(),i(15,"span"),o(16),n()()()()(),i(17,"div",33)(18,"div",34)(19,"div",35)(20,"div",36),c(),i(21,"svg",37),d(22,"path",38),n()(),p(),i(23,"span",39),o(24,"Profesi\xF3n"),n()(),i(25,"p",40),o(26),n()(),i(27,"div",34)(28,"div",35)(29,"div",41),c(),i(30,"svg",42),d(31,"path",43),n()(),p(),i(32,"span",39),o(33,"Tel\xE9fono"),n()(),i(34,"p",40),o(35),n()()(),g(36,Ee,9,1,"div",34),i(37,"div",44)(38,"h4",45),c(),i(39,"svg",30),d(40,"path",46),n(),o(41," Informaci\xF3n del Sistema "),n(),p(),i(42,"div",47)(43,"div",48)(44,"span",49),o(45,"ID:"),n(),i(46,"code",50),o(47),n()(),g(48,ye,6,4,"div",51),n()()()(),i(49,"div",52)(50,"button",53),h("click",function(){f(e);let s=u(2);return _(s.onClose())}),o(51," Cerrar "),n()()}if(r&2){let e=u(2);l(4),b("src",e.getAvatarUrl(e.user.avatar),T)("alt",e.user.name),l(3),P("",e.user.name," ",e.user.surname),l(4),C(" ",e.user.email," "),l(2),w("px-4 py-2 rounded-xl text-sm font-semibold "+e.getRoleBadgeClass(e.user.rol)),l(),C(" ",e.getRoleLabel(e.user.rol)," "),l(),w("px-4 py-2 rounded-xl text-sm font-semibold "+e.getStateBadgeClass(e.user.state)),l(),C(" ",e.getStateText(e.user.state)," "),l(10),U(e.user.profession||"No especificada"),l(9),U(e.user.phone||"No especificado"),l(),x(e.user.description?36:-1),l(11),U(e.user._id),l(),x(e.user.createdAt?48:-1)}}function Fe(r,t){if(r&1&&d(0,"img",63),r&2){let e=u(3);b("src",e.previewUrl(),T)}}function Te(r,t){if(r&1&&d(0,"img",64),r&2){let e=u(3);b("src",e.getAvatarUrl(e.user.avatar),T)}}function Ve(r,t){r&1&&(i(0,"div",65),c(),i(1,"svg",106),d(2,"path",107),n()())}function Ae(r,t){if(r&1&&(i(0,"p",78),c(),i(1,"svg",108),d(2,"path",109),n(),o(3),n()),r&2){let e=u(3);l(3),C(" ",e.getFieldError("name")," ")}}function Ie(r,t){if(r&1&&(i(0,"p",78),c(),i(1,"svg",108),d(2,"path",109),n(),o(3),n()),r&2){let e=u(3);l(3),C(" ",e.getFieldError("surname")," ")}}function Le(r,t){if(r&1&&(i(0,"p",78),c(),i(1,"svg",108),d(2,"path",109),n(),o(3),n()),r&2){let e=u(3);l(3),C(" ",e.getFieldError("email")," ")}}function Pe(r,t){if(r&1&&(i(0,"p",78),c(),i(1,"svg",108),d(2,"path",109),n(),o(3),n()),r&2){let e=u(4);l(3),C(" ",e.getFieldError("password")," ")}}function je(r,t){if(r&1&&(i(0,"div",81)(1,"label",110),o(2," Contrase\xF1a "),i(3,"span",76),o(4,"*"),n()(),i(5,"div",83)(6,"div",84),c(),i(7,"svg",85),d(8,"path",111),n()(),p(),d(9,"input",112),n(),g(10,Pe,4,1,"p",78),n()),r&2){let e=u(3);l(9),w("w-full pl-12 pr-4 py-3 bg-slate-800/50 border rounded-xl text-white placeholder-slate-500 focus:outline-none focus:ring-2 transition-all "+(e.isFieldInvalid("password")?"border-red-500/50 focus:ring-red-500/50":"border-white/10 focus:ring-lime-500/50")),l(),x(e.isFieldInvalid("password")?10:-1)}}function He(r,t){if(r&1&&(i(0,"p",78),c(),i(1,"svg",108),d(2,"path",109),n(),o(3),n()),r&2){let e=u(3);l(3),C(" ",e.getFieldError("rol")," ")}}function Ne(r,t){if(r&1&&(i(0,"p",78),c(),i(1,"svg",108),d(2,"path",109),n(),o(3),n()),r&2){let e=u(3);l(3),C(" ",e.getFieldError("state")," ")}}function De(r,t){r&1&&(c(),i(0,"svg",113),d(1,"circle",114)(2,"path",115),n(),p(),i(3,"span"),o(4,"Guardando..."),n())}function Ge(r,t){r&1&&(c(),i(0,"svg",116),d(1,"path",117),n(),p(),i(2,"span"),o(3,"Crear Usuario"),n())}function ze(r,t){r&1&&(c(),i(0,"svg",116),d(1,"path",118),n(),p(),i(2,"span"),o(3,"Guardar Cambios"),n())}function Re(r,t){if(r&1&&g(0,Ge,4,0)(1,ze,4,0),r&2){let e=u(3);x(e.mode==="create"?0:1)}}function Be(r,t){if(r&1){let e=k();i(0,"form",59),h("ngSubmit",function(){f(e);let s=u(2);return _(s.onSubmit())}),i(1,"div",22)(2,"div",60)(3,"div",24)(4,"div",61)(5,"div",62),g(6,Fe,1,1,"img",63)(7,Te,1,1,"img",64)(8,Ve,3,0,"div",65),i(9,"div",66),c(),i(10,"svg",67),d(11,"path",68)(12,"path",69),n()()(),p(),i(13,"div",70)(14,"label",71),o(15," Foto de Perfil "),n(),i(16,"input",72),h("change",function(s){f(e);let m=u(2);return _(m.onFileSelected(s))}),n(),i(17,"p",73),o(18," JPG, PNG o GIF \u2022 M\xE1ximo 5MB "),n()()()(),i(19,"div",74)(20,"div")(21,"label",75),o(22," Nombre "),i(23,"span",76),o(24,"*"),n()(),d(25,"input",77),g(26,Ae,4,1,"p",78),n(),i(27,"div")(28,"label",79),o(29," Apellidos "),i(30,"span",76),o(31,"*"),n()(),d(32,"input",80),g(33,Ie,4,1,"p",78),n(),i(34,"div",81)(35,"label",82),o(36," Correo Electr\xF3nico "),i(37,"span",76),o(38,"*"),n()(),i(39,"div",83)(40,"div",84),c(),i(41,"svg",85),d(42,"path",31),n()(),p(),d(43,"input",86),n(),g(44,Le,4,1,"p",78),n(),g(45,je,11,3,"div",81),i(46,"div")(47,"label",87),o(48," Profesi\xF3n "),n(),d(49,"input",88),n(),i(50,"div")(51,"label",89),o(52," Tel\xE9fono "),n(),d(53,"input",90),n(),i(54,"div",81)(55,"label",91),o(56," Descripci\xF3n "),n(),d(57,"textarea",92),n(),i(58,"div")(59,"label",93),o(60," Rol "),i(61,"span",76),o(62,"*"),n()(),i(63,"div",83)(64,"select",94)(65,"option",95),o(66,"Selecciona un rol"),n(),i(67,"option",96),o(68,"Cliente (Estudiante)"),n(),i(69,"option",97),o(70,"Instructor"),n(),i(71,"option",98),o(72,"Administrador"),n()(),i(73,"div",99),c(),i(74,"svg",85),d(75,"path",100),n()()(),g(76,He,4,1,"p",78),n(),p(),i(77,"div")(78,"label",101),o(79," Estado "),i(80,"span",76),o(81,"*"),n()(),i(82,"div",83)(83,"select",102)(84,"option",95),o(85,"Selecciona un estado"),n(),i(86,"option",103),o(87,"Activo"),n(),i(88,"option",104),o(89,"Inactivo"),n()(),i(90,"div",99),c(),i(91,"svg",85),d(92,"path",100),n()()(),g(93,Ne,4,1,"p",78),n()()()(),p(),i(94,"div",52)(95,"button",53),h("click",function(){f(e);let s=u(2);return _(s.onClose())}),o(96," Cancelar "),n(),i(97,"button",105),g(98,De,5,0)(99,Re,2,1),n()()()}if(r&2){let e=u(2);b("formGroup",e.userForm),l(6),x(e.previewUrl()?6:e.mode==="edit"&&e.user&&e.user.avatar?7:8),l(19),w("w-full px-4 py-3 bg-slate-800/50 border rounded-xl text-white placeholder-slate-500 focus:outline-none focus:ring-2 transition-all "+(e.isFieldInvalid("name")?"border-red-500/50 focus:ring-red-500/50":"border-white/10 focus:ring-lime-500/50")),l(),x(e.isFieldInvalid("name")?26:-1),l(6),w("w-full px-4 py-3 bg-slate-800/50 border rounded-xl text-white placeholder-slate-500 focus:outline-none focus:ring-2 transition-all "+(e.isFieldInvalid("surname")?"border-red-500/50 focus:ring-red-500/50":"border-white/10 focus:ring-lime-500/50")),l(),x(e.isFieldInvalid("surname")?33:-1),l(10),w("w-full pl-12 pr-4 py-3 bg-slate-800/50 border rounded-xl text-white placeholder-slate-500 focus:outline-none focus:ring-2 transition-all "+(e.isFieldInvalid("email")?"border-red-500/50 focus:ring-red-500/50":"border-white/10 focus:ring-lime-500/50")),l(),x(e.isFieldInvalid("email")?44:-1),l(),x(e.mode==="create"?45:-1),l(19),w("w-full px-4 py-3 bg-slate-800/50 border rounded-xl text-white focus:outline-none focus:ring-2 transition-all appearance-none cursor-pointer "+(e.isFieldInvalid("rol")?"border-red-500/50 focus:ring-red-500/50":"border-white/10 focus:ring-lime-500/50")),l(12),x(e.isFieldInvalid("rol")?76:-1),l(7),w("w-full px-4 py-3 bg-slate-800/50 border rounded-xl text-white focus:outline-none focus:ring-2 transition-all appearance-none cursor-pointer "+(e.isFieldInvalid("state")?"border-red-500/50 focus:ring-red-500/50":"border-white/10 focus:ring-lime-500/50")),l(10),x(e.isFieldInvalid("state")?93:-1),l(4),w("flex-1 px-6 py-3 font-semibold rounded-xl transition-all duration-200 flex items-center justify-center gap-2 "+(e.userForm.invalid||e.isSubmitting()?"bg-slate-700 text-slate-400 cursor-not-allowed":"bg-gradient-to-r from-lime-500 to-cyan-500 hover:from-lime-600 hover:to-cyan-600 text-white shadow-lg shadow-lime-500/20")),b("disabled",e.userForm.invalid||e.isSubmitting()),l(),x(e.isSubmitting()?98:99)}}function $e(r,t){if(r&1){let e=k();i(0,"div",1),h("click",function(){f(e);let s=u();return _(s.onClose())}),i(1,"div",2),d(2,"div",3),i(3,"div",4),h("click",function(s){return f(e),_(s.stopPropagation())}),i(4,"div",5)(5,"div",6),d(6,"div",7),i(7,"button",8),h("click",function(){f(e);let s=u();return _(s.onClose())}),c(),i(8,"svg",9),d(9,"path",10),n()(),p(),i(10,"div",11)(11,"div",12)(12,"div",13),g(13,ve,2,0,":svg:svg",14)(14,fe,2,0,":svg:svg",14)(15,_e,3,0,":svg:svg",14),n(),i(16,"div")(17,"h2",15),g(18,be,1,0)(19,Ce,1,0)(20,we,1,0),n(),i(21,"p",16),g(22,Se,1,0)(23,Me,1,0)(24,Ue,1,0),n()()()()(),g(25,ke,52,16)(26,Be,100,22,"form",17),n()()()()}if(r&2){let e=u();l(13),x(e.mode==="create"?13:e.mode==="edit"?14:15),l(5),x(e.mode==="create"?18:e.mode==="edit"?19:20),l(4),x(e.mode==="create"?22:e.mode==="edit"?23:24),l(3),x(e.mode==="view"&&e.user?25:26)}}var Z=class r{mode="closed";user=null;isLoading=!1;close=new J;save=new J;selectedFile=v(null);previewUrl=v(null);isSubmitting=v(!1);userForm=new z({name:new E("",[M.required,M.minLength(2)]),surname:new E("",[M.required,M.minLength(2)]),email:new E("",[M.required,M.email]),password:new E("",[M.minLength(6)]),profession:new E(""),phone:new E(""),description:new E(""),rol:new E("customer",[M.required]),state:new E("1",[M.required])});ngOnChanges(t){t.mode&&this.mode!=="closed"&&this.setupForm(),t.user&&this.user&&this.mode==="edit"&&this.loadUserData()}setupForm(){this.mode==="create"?(this.userForm.reset({rol:"customer",state:"1"}),this.userForm.get("password")?.setValidators([M.required,M.minLength(6)]),this.userForm.get("password")?.updateValueAndValidity(),this.selectedFile.set(null),this.previewUrl.set(null)):this.mode==="edit"&&(this.userForm.get("password")?.clearValidators(),this.userForm.get("password")?.updateValueAndValidity())}loadUserData(){if(!this.user)return;let t=typeof this.user.state=="boolean"?this.user.state?"1":"2":this.user.state.toString();this.userForm.patchValue({name:this.user.name,surname:this.user.surname,email:this.user.email,profession:this.user.profession||"",phone:this.user.phone||"",description:this.user.description||"",rol:this.user.rol,state:t}),this.selectedFile.set(null),this.previewUrl.set(null)}onFileSelected(t){let e=t.target;if(e.files&&e.files.length>0){let a=e.files[0];if(!a.type.startsWith("image/")){alert("\u274C Por favor selecciona solo archivos de imagen");return}if(a.size>5*1024*1024){alert("\u274C La imagen no debe superar los 5MB");return}this.selectedFile.set(a);let s=new FileReader;s.onload=m=>{this.previewUrl.set(m.target?.result)},s.readAsDataURL(a)}}getAvatarUrl(t){return t?`${S.url}users/imagen-usuario/${t}`:"https://ui-avatars.com/api/?name=Usuario&background=random&color=fff"}getRoleBadgeClass(t){switch(t){case"admin":return"bg-red-500/20 text-red-400 border border-red-500/30";case"instructor":return"bg-lime-500/20 text-lime-400 border border-lime-500/30";case"customer":case"cliente":return"bg-cyan-500/20 text-cyan-400 border border-cyan-500/30";default:return"bg-gray-500/20 text-gray-400 border border-gray-500/30"}}getRoleLabel(t){switch(t){case"admin":return"Administrador";case"instructor":return"Instructor";case"customer":case"cliente":return"Estudiante";default:return t}}getStateBadgeClass(t){return(typeof t=="boolean"?t:typeof t=="string"?t==="1":t===1)?"bg-lime-500/20 text-lime-400 border border-lime-500/30":"bg-red-500/20 text-red-400 border border-red-500/30"}getStateText(t){return(typeof t=="boolean"?t:typeof t=="string"?t==="1":t===1)?"Activo":"Inactivo"}onClose(){this.close.emit()}onSubmit(){if(this.mode==="view")return;if(this.userForm.invalid){Object.keys(this.userForm.controls).forEach(a=>{this.userForm.get(a)?.markAsTouched()});return}let t=this.userForm.value,e=I(A({},t),{_id:this.user?._id});this.mode==="edit"&&(!e.password||e.password.trim()==="")&&delete e.password,this.save.emit({data:e,file:this.selectedFile()})}isFieldInvalid(t){let e=this.userForm.get(t);return!!(e&&e.invalid&&e.touched)}getFieldError(t){let e=this.userForm.get(t);return e?.errors?e.errors.required?"Este campo es requerido":e.errors.email?"Email inv\xE1lido":e.errors.minlength?`M\xEDnimo ${e.errors.minlength.requiredLength} caracteres`:"Campo inv\xE1lido":""}static \u0275fac=function(e){return new(e||r)};static \u0275cmp=L({type:r,selectors:[["app-user-modal"]],inputs:{mode:"mode",user:"user",isLoading:"isLoading"},outputs:{close:"close",save:"save"},features:[K],decls:1,vars:1,consts:[[1,"fixed","inset-0","z-50","overflow-y-auto","animate-in","fade-in","duration-200"],[1,"fixed","inset-0","z-50","overflow-y-auto","animate-in","fade-in","duration-200",3,"click"],[1,"flex","min-h-screen","items-center","justify-center","p-4"],[1,"fixed","inset-0","bg-black/80","backdrop-blur-md"],[1,"relative","w-full","max-w-5xl","transform","transition-all",3,"click"],[1,"relative","bg-slate-900","rounded-3xl","shadow-2xl","border","border-white/10","overflow-hidden"],[1,"relative","h-32","bg-gradient-to-br","from-lime-500","via-cyan-500","to-blue-500","overflow-hidden"],[1,"absolute","inset-0","bg-[url('data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNjAiIGhlaWdodD0iNjAiIHZpZXdCb3g9IjAgMCA2MCA2MCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48ZyBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPjxnIGZpbGw9IiNmZmZmZmYiIGZpbGwtb3BhY2l0eT0iMC4wNSI+PHBhdGggZD0iTTM2IDE2djJ2MmgtMnYtMnYtMmgyem0wIDR2MnYyaC0ydi0ydi0yaDJ6bS0yLTJ2MnYyaC0ydi0ydi0yaDJ6Ii8+PC9nPjwvZz48L3N2Zz4=')]","opacity-30"],["type","button",1,"absolute","top-4","right-4","z-10","p-2.5","rounded-xl","bg-white/10","backdrop-blur-sm","border","border-white/20","text-white","hover:bg-white/20","transition-all","duration-200","group",3,"click"],["fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"w-5","h-5","group-hover:rotate-90","transition-transform","duration-300"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M6 18L18 6M6 6l12 12"],[1,"relative","h-full","flex","items-center","px-8"],[1,"flex","items-center","gap-5"],[1,"w-20","h-20","rounded-2xl","bg-white/20","backdrop-blur-sm","border","border-white/30","flex","items-center","justify-center","shadow-2xl"],["fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"w-10","h-10","text-white"],[1,"text-3xl","font-bold","text-white","drop-shadow-lg"],[1,"text-white/80","mt-1","text-sm"],[1,"contents",3,"formGroup"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M18 9v3m0 0v3m0-3h3m-3 0h-3m-2-5a4 4 0 11-8 0 4 4 0 018 0zM3 20a6 6 0 0112 0v1H3v-1z"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M15 12a3 3 0 11-6 0 3 3 0 016 0z"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"],[1,"p-8","max-h-[calc(100vh-300px)]","overflow-y-auto"],[1,"space-y-6"],[1,"bg-gradient-to-br","from-slate-800","to-slate-850","rounded-2xl","p-6","border","border-white/10"],[1,"flex","items-start","gap-6"],[1,"w-32","h-32","rounded-2xl","object-cover","ring-4","ring-lime-500/30","shadow-xl",3,"src","alt"],[1,"flex-1"],[1,"text-2xl","font-bold","text-white","mb-2"],[1,"text-slate-400","mb-4","flex","items-center","gap-2"],["fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"w-4","h-4"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"],[1,"flex","flex-wrap","gap-3"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-4"],[1,"bg-slate-800/50","rounded-xl","p-5","border","border-white/5"],[1,"flex","items-center","gap-3","mb-3"],[1,"w-10","h-10","rounded-lg","bg-purple-500/20","flex","items-center","justify-center"],["fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"w-5","h-5","text-purple-400"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M21 13.255A23.931 23.931 0 0112 15c-3.183 0-6.22-.62-9-1.745M16 6V4a2 2 0 00-2-2h-4a2 2 0 00-2 2v2m4 6h.01M5 20h14a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"],[1,"text-sm","font-medium","text-slate-400"],[1,"text-white","font-semibold"],[1,"w-10","h-10","rounded-lg","bg-cyan-500/20","flex","items-center","justify-center"],["fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"w-5","h-5","text-cyan-400"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"],[1,"bg-gradient-to-br","from-slate-800/80","to-slate-850/80","rounded-xl","p-5","border","border-white/10"],[1,"text-sm","font-semibold","text-slate-300","mb-4","flex","items-center","gap-2"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"],[1,"space-y-2","text-sm"],[1,"flex","justify-between","py-2","border-b","border-white/5"],[1,"text-slate-400"],[1,"text-slate-300","font-mono","text-xs","bg-slate-900/50","px-2","py-1","rounded"],[1,"flex","justify-between","py-2"],[1,"px-8","py-6","bg-slate-800/50","border-t","border-white/10","flex","gap-3"],["type","button",1,"flex-1","px-6","py-3","bg-slate-700","hover:bg-slate-600","text-white","font-semibold","rounded-xl","transition-all","duration-200",3,"click"],[1,"w-10","h-10","rounded-lg","bg-orange-500/20","flex","items-center","justify-center"],["fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"w-5","h-5","text-orange-400"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"],[1,"text-slate-300","leading-relaxed"],[1,"text-slate-300"],[1,"contents",3,"ngSubmit","formGroup"],[1,"max-w-4xl","mx-auto","space-y-8"],[1,"flex","flex-col","md:flex-row","items-center","gap-6"],[1,"relative","group"],["alt","Preview",1,"w-32","h-32","rounded-2xl","object-cover","ring-4","ring-lime-500/50","shadow-2xl",3,"src"],["alt","Avatar",1,"w-32","h-32","rounded-2xl","object-cover","ring-4","ring-slate-700","shadow-2xl",3,"src"],[1,"w-32","h-32","rounded-2xl","bg-gradient-to-br","from-slate-700","to-slate-800","flex","items-center","justify-center","ring-4","ring-slate-700"],[1,"absolute","inset-0","bg-black/40","rounded-2xl","opacity-0","group-hover:opacity-100","transition-opacity","flex","items-center","justify-center"],["fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"w-8","h-8","text-white"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M15 13a3 3 0 11-6 0 3 3 0 016 0z"],[1,"flex-1","w-full"],[1,"block","text-sm","font-semibold","text-white","mb-3"],["type","file","accept","image/*",1,"block","w-full","text-sm","text-slate-400","file:mr-4","file:py-3","file:px-6","file:rounded-xl","file:border-0","file:text-sm","file:font-semibold","file:bg-lime-500","file:text-white","hover:file:bg-lime-600","file:cursor-pointer","file:transition-all","file:shadow-lg","file:shadow-lime-500/20","cursor-pointer",3,"change"],[1,"mt-2","text-xs","text-slate-500"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-6"],["for","name",1,"block","text-sm","font-semibold","text-white","mb-2"],[1,"text-red-400"],["type","text","id","name","formControlName","name","placeholder","Juan"],[1,"mt-1.5","text-xs","text-red-400","flex","items-center","gap-1"],["for","surname",1,"block","text-sm","font-semibold","text-white","mb-2"],["type","text","id","surname","formControlName","surname","placeholder","P\xE9rez Garc\xEDa"],[1,"md:col-span-2"],["for","email",1,"block","text-sm","font-semibold","text-white","mb-2"],[1,"relative"],[1,"absolute","inset-y-0","left-0","pl-4","flex","items-center","pointer-events-none"],["fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"w-5","h-5","text-slate-500"],["type","email","id","email","formControlName","email","placeholder","ejemplo@correo.com"],["for","profession",1,"block","text-sm","font-semibold","text-white","mb-2"],["type","text","id","profession","formControlName","profession","placeholder","Ej: Desarrollador Web",1,"w-full","px-4","py-3","bg-slate-800/50","border","border-white/10","rounded-xl","text-white","placeholder-slate-500","focus:outline-none","focus:ring-2","focus:ring-lime-500/50","transition-all"],["for","phone",1,"block","text-sm","font-semibold","text-white","mb-2"],["type","tel","id","phone","formControlName","phone","placeholder","+52 555 123 4567",1,"w-full","px-4","py-3","bg-slate-800/50","border","border-white/10","rounded-xl","text-white","placeholder-slate-500","focus:outline-none","focus:ring-2","focus:ring-lime-500/50","transition-all"],["for","description",1,"block","text-sm","font-semibold","text-white","mb-2"],["id","description","formControlName","description","rows","3","placeholder","Cu\xE9ntanos un poco sobre ti...",1,"w-full","px-4","py-3","bg-slate-800/50","border","border-white/10","rounded-xl","text-white","placeholder-slate-500","focus:outline-none","focus:ring-2","focus:ring-lime-500/50","transition-all","resize-none"],["for","rol",1,"block","text-sm","font-semibold","text-white","mb-2"],["id","rol","formControlName","rol"],["value","","disabled",""],["value","customer"],["value","instructor"],["value","admin"],[1,"absolute","inset-y-0","right-0","flex","items-center","pr-4","pointer-events-none"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M19 9l-7 7-7-7"],["for","state",1,"block","text-sm","font-semibold","text-white","mb-2"],["id","state","formControlName","state"],["value","1"],["value","2"],["type","submit",3,"disabled"],["fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"w-16","h-16","text-slate-500"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"],["fill","currentColor","viewBox","0 0 20 20",1,"w-3","h-3"],["fill-rule","evenodd","d","M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z","clip-rule","evenodd"],["for","password",1,"block","text-sm","font-semibold","text-white","mb-2"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"],["type","password","id","password","formControlName","password","placeholder","M\xEDnimo 6 caracteres"],["fill","none","viewBox","0 0 24 24",1,"animate-spin","h-5","w-5"],["cx","12","cy","12","r","10","stroke","currentColor","stroke-width","4",1,"opacity-25"],["fill","currentColor","d","M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z",1,"opacity-75"],["fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"w-5","h-5"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 4v16m8-8H4"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M5 13l4 4L19 7"]],template:function(e,a){e&1&&g(0,$e,27,4,"div",0),e&2&&x(a.mode!=="closed"?0:-1)},dependencies:[D,$,le,R,B,re,me,oe,ae,de,se,N],encapsulation:2})};var Oe=(r,t)=>t._id;function Ze(r,t){if(r&1){let e=k();i(0,"div",38)(1,"div",47),o(2),n(),i(3,"div",48)(4,"label",49),o(5,"Mostrar:"),n(),i(6,"select",50),h("change",function(s){f(e);let m=u();return _(m.changePerPage(+s.target.value))}),i(7,"option",51),o(8,"10"),n(),i(9,"option",51),o(10,"15"),n(),i(11,"option",51),o(12,"20"),n()()()()}if(r&2){let e=u();l(2),te(" Mostrando ",(e.currentPage()-1)*e.itemsPerPage()+1," - ",e.Math.min(e.currentPage()*e.itemsPerPage(),e.users().length)," de ",e.users().length," usuarios "),l(4),b("value",e.itemsPerPage()),l(),b("value",10),l(2),b("value",15),l(2),b("value",20)}}function qe(r,t){r&1&&(i(0,"tr")(1,"td",52)(2,"div",53),c(),i(3,"svg",54),d(4,"circle",55)(5,"path",56),n(),o(6," Cargando usuarios... "),n()()())}function Je(r,t){r&1&&(i(0,"tr")(1,"td",57),o(2," No se encontraron usuarios con los filtros aplicados. "),n()())}function We(r,t){if(r&1){let e=k();i(0,"tr",58)(1,"th",59)(2,"div",60),d(3,"img",61),i(4,"div")(5,"div",62),o(6),n(),i(7,"div",63),o(8),n()()()(),i(9,"td",64)(10,"span"),o(11),n()(),i(12,"td",64)(13,"span"),o(14),n()(),i(15,"td",65),o(16),j(17,"date"),n(),i(18,"td",66)(19,"div",67)(20,"button",68),h("click",function(){let s=f(e).$implicit,m=u(2);return _(m.openViewModal(s))}),c(),i(21,"svg",69),d(22,"path",70)(23,"path",71),n()(),p(),i(24,"button",72),h("click",function(){let s=f(e).$implicit,m=u(2);return _(m.openEditModal(s))}),c(),i(25,"svg",73),d(26,"path",74),n()(),p(),i(27,"button",75),h("click",function(){let s=f(e).$implicit,m=u(2);return _(m.deleteUser(s))}),c(),i(28,"svg",76),d(29,"path",77),n()()()()()}if(r&2){let e=t.$implicit,a=u(2);l(3),b("src",a.getAvatarUrl(e.avatar),T)("alt",e.name),l(3),P("",e.name," ",e.surname),l(2),U(e.email),l(2),w("px-2 py-1 rounded-full text-xs font-medium "+a.getRoleBadgeClass(e.rol)),l(),C(" ",a.getRoleLabel(e.rol)," "),l(2),w("px-2 py-1 rounded-full text-xs font-medium "+a.getStateBadgeClass(e)),l(),C(" ",a.getStateText(e)," "),l(2),C(" ",H(17,12,e.createdAt,"dd/MM/yyyy")," ")}}function Ye(r,t){if(r&1&&W(0,We,30,15,"tr",58,Oe),r&2){let e=u();Y(e.paginatedUsers())}}function Xe(r,t){r&1&&(i(0,"span",82),o(1,"..."),n())}function Qe(r,t){if(r&1){let e=k();i(0,"button",84),h("click",function(){f(e);let s=u().$implicit,m=u(2);return _(m.changePage(+s))}),o(1),n()}if(r&2){let e=u().$implicit,a=u(2);w("px-4 py-2 rounded-lg border transition "+(a.currentPage()===e?"bg-lime-400 border-lime-400 text-slate-900 font-semibold":"bg-slate-800 border-white/10 text-slate-400 hover:bg-slate-700 hover:text-white")),l(),C(" ",e," ")}}function Ke(r,t){if(r&1&&g(0,Xe,2,0,"span",82)(1,Qe,2,3,"button",83),r&2){let e=t.$implicit;x(e==="..."?0:1)}}function et(r,t){if(r&1){let e=k();i(0,"div",45)(1,"button",78),h("click",function(){f(e);let s=u();return _(s.previousPage())}),c(),i(2,"svg",79),d(3,"path",80),n()(),W(4,Ke,2,1,null,null,ee),p(),i(6,"button",78),h("click",function(){f(e);let s=u();return _(s.nextPage())}),c(),i(7,"svg",79),d(8,"path",81),n()()()}if(r&2){let e=u();l(),b("disabled",e.currentPage()===1),l(3),Y(e.pageNumbers()),l(2),b("disabled",e.currentPage()===e.totalPages())}}var pe=class r{usersService=V(O);toast=V(ne);Math=Math;users=this.usersService.filteredUsers;isLoading=this.usersService.isLoading;searchTerm=v("");roleFilter=v("");stateFilter=v("");totalUsers=y(()=>this.users().length);totalStudents=y(()=>this.users().filter(t=>t.rol==="cliente").length);totalInstructors=y(()=>this.users().filter(t=>t.rol==="instructor").length);totalAdmins=y(()=>this.users().filter(t=>t.rol==="admin").length);activeUsers=y(()=>this.users().filter(t=>this.isUserActive(t)).length);modalMode=v("closed");isRoleModalOpen=v(!1);currentUser=v(null);currentPage=v(1);itemsPerPage=v(10);paginatedUsers=y(()=>{let t=this.users(),e=this.currentPage(),a=this.itemsPerPage(),s=(e-1)*a,m=s+a;return t.slice(s,m)});totalPages=y(()=>{let t=this.users()?.length||0;return Math.ceil(t/this.itemsPerPage())});pageNumbers=y(()=>{let t=this.totalPages();if(t<=7)return Array.from({length:t},(s,m)=>m+1);let e=this.currentPage(),a=[1];e>3&&a.push("...");for(let s=Math.max(2,e-1);s<=Math.min(t-1,e+1);s++)a.push(s);return e<t-2&&a.push("..."),a.push(t),a});changePage(t){t<1||t>this.totalPages()||this.currentPage.set(t)}previousPage(){this.changePage(this.currentPage()-1)}nextPage(){this.changePage(this.currentPage()+1)}changePerPage(t){this.itemsPerPage.set(t),this.currentPage.set(1)}roleForm=new z({rol:new E("",[M.required])});ngOnInit(){this.loadUsers()}loadUsers(){this.usersService.loadAllUsers().subscribe()}onSearch(t){let e=t.target.value;this.searchTerm.set(e),this.currentPage.set(1),this.usersService.setSearchTerm(e)}onRoleFilter(t){let e=t.target.value;this.roleFilter.set(e),this.currentPage.set(1),this.usersService.setRoleFilter(e)}onStateFilter(t){let e=t.target.value;this.stateFilter.set(e),this.currentPage.set(1),this.usersService.setStateFilter(e===""?"":e==="true")}openRoleModal(t){this.currentUser.set(t),this.roleForm.patchValue({rol:t.rol}),this.isRoleModalOpen.set(!0)}closeRoleModal(){this.isRoleModalOpen.set(!1),this.currentUser.set(null),this.roleForm.reset()}saveRole(){if(this.roleForm.invalid)return;let t=this.currentUser();if(!t)return;let e=this.roleForm.value.rol;confirm(`\xBFEst\xE1s seguro de cambiar el rol de ${t.name} ${t.surname} a ${this.getRoleLabel(e)}?`)&&this.usersService.updateUserRole(t._id,e).subscribe({next:()=>{this.toast.success("Rol actualizado exitosamente"),this.closeRoleModal(),this.loadUsers()},error:s=>{this.toast.error(s.error?.message_text||"Error al actualizar el rol del usuario")}})}openEditModal(t){this.currentUser.set(t),this.modalMode.set("edit")}openCreateModal(){this.currentUser.set(null),this.modalMode.set("create")}openViewModal(t){this.currentUser.set(t),this.modalMode.set("view")}closeUserModal(){this.modalMode.set("closed"),this.currentUser.set(null)}handleSaveUser(t){let{data:e,file:a}=t,s=this.modalMode();if(s==="create"){let m=this.createFormData(e,a);this.usersService.createUser(m).subscribe({next:()=>{this.toast.success("Usuario creado exitosamente"),this.closeUserModal(),this.loadUsers()},error:F=>this.toast.error(F.error?.message_text||"Error al crear el usuario")})}else if(s==="edit"&&e._id)if(a){let m=this.createFormData(e,a);this.usersService.updateUserWithFile(e._id,m).subscribe({next:()=>{this.toast.success("Usuario actualizado exitosamente"),this.closeUserModal(),this.loadUsers()},error:F=>this.toast.error(F.error?.message_text||"Error al actualizar el usuario")})}else this.usersService.updateUser(e._id,e).subscribe({next:()=>{this.toast.success("Usuario actualizado exitosamente"),this.closeUserModal(),this.loadUsers()},error:m=>this.toast.error(m.error?.message_text||"Error al actualizar el usuario")})}createFormData(t,e){let a=new FormData;return Object.keys(t).forEach(s=>{s!=="_id"&&t[s]!==null&&t[s]!==void 0&&a.append(s,t[s])}),e&&a.append("avatar",e),a}toggleUserState(t){let a=!this.isUserActive(t),s=a?"activar":"desactivar";confirm(`\xBFEst\xE1s seguro de ${s} a ${t.name} ${t.surname}?`)&&this.usersService.updateUserState(t._id,a).subscribe({next:()=>{this.toast.success(`Usuario ${s==="activar"?"activado":"desactivado"} exitosamente`),this.loadUsers()},error:F=>{this.toast.error(F.error?.message_text||"Error al cambiar el estado del usuario")}})}deleteUser(t){confirm(`\xBFEst\xE1s seguro de eliminar a ${t.name} ${t.surname}?

Esta acci\xF3n no se puede deshacer.`)&&this.usersService.deleteUser(t._id).subscribe({next:a=>{this.toast.success("Usuario eliminado exitosamente"),this.loadUsers()},error:a=>{let s=a.error?.message_text||a.error?.message||"Error al eliminar el usuario",m=a.error?.blockedBy,F=a.error?.count;a.status===403?this.toast.error(s):a.status===404?this.toast.error("El usuario no existe"):this.toast.error("Error al eliminar el usuario. Intenta de nuevo.")}})}getAvatarUrl(t){return t?`${S.url}users/imagen-usuario/${t}`:"https://ui-avatars.com/api/?name=Usuario&background=random"}isUserActive(t){return typeof t.state=="boolean"?t.state:t.state===1}getRoleBadgeClass(t){switch(t){case"admin":return"bg-red-500/20 text-red-400 border border-red-500/30";case"instructor":return"bg-lime-500/20 text-lime-400 border border-lime-500/30";case"cliente":return"bg-cyan-500/20 text-cyan-400 border border-cyan-500/30";default:return"bg-gray-500/20 text-gray-400 border border-gray-500/30"}}getRoleLabel(t){switch(t){case"admin":return"Administrador";case"instructor":return"Instructor";case"cliente":return"Estudiante";default:return t}}getStateBadgeClass(t){return this.isUserActive(t)?"bg-lime-500/20 text-lime-400 border border-lime-500/30":"bg-red-500/20 text-red-400 border border-red-500/30"}getStateText(t){return this.isUserActive(t)?"Activo":"Inactivo"}static \u0275fac=function(e){return new(e||r)};static \u0275cmp=L({type:r,selectors:[["app-users"]],decls:97,vars:10,consts:[[1,"bg-slate-900","min-h-screen","text-white","pt-24","pb-12"],[1,"container","mx-auto","px-4"],[1,"flex","justify-between","items-center","mb-8"],[1,"text-3xl","font-bold"],[1,"text-slate-400","mt-1"],[1,"bg-lime-400","text-slate-900","font-semibold","px-5","py-2","rounded-lg","hover:bg-lime-300","transition","flex","items-center","gap-2",3,"click"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 20 20","fill","currentColor",1,"h-5","w-5"],["fill-rule","evenodd","d","M10 3a1 1 0 011 1v5h5a1 1 0 110 2h-5v5a1 1 0 11-2 0v-5H4a1 1 0 110-2h5V4a1 1 0 011-1z","clip-rule","evenodd"],[1,"grid","grid-cols-1","md:grid-cols-4","gap-4","mb-8"],[1,"bg-gradient-to-br","from-slate-800","to-slate-850","rounded-xl","p-5","border","border-white/10"],[1,"flex","items-center","justify-between"],[1,"text-slate-400","text-sm","font-medium"],[1,"text-3xl","font-bold","text-white","mt-1"],[1,"w-12","h-12","bg-lime-500/20","rounded-lg","flex","items-center","justify-center"],["fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"w-6","h-6","text-lime-400"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"],[1,"text-3xl","font-bold","text-cyan-400","mt-1"],[1,"w-12","h-12","bg-cyan-500/20","rounded-lg","flex","items-center","justify-center"],["fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"w-6","h-6","text-cyan-400"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 14l9-5-9-5-9 5 9 5z"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 14l6.16-3.422a12.083 12.083 0 01.665 6.479A11.952 11.952 0 0012 20.055a11.952 11.952 0 00-6.824-2.998 12.078 12.078 0 01.665-6.479L12 14z"],[1,"text-3xl","font-bold","text-lime-400","mt-1"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M21 13.255A23.931 23.931 0 0112 15c-3.183 0-6.22-.62-9-1.745M16 6V4a2 2 0 00-2-2h-4a2 2 0 00-2 2v2m4 6h.01M5 20h14a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"],[1,"w-12","h-12","bg-green-500/20","rounded-lg","flex","items-center","justify-center"],["fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"w-6","h-6","text-green-400"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"],[1,"bg-slate-800","p-4","rounded-lg","mb-6","flex","flex-wrap","gap-4","items-center","border","border-white/10"],[1,"relative","flex-grow"],["type","text","placeholder","Buscar por nombre, apellido o email...",1,"w-full","bg-slate-900","border","border-slate-700","rounded-lg","py-2","pl-10","pr-4","focus:outline-none","focus:ring-2","focus:ring-lime-400",3,"input"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke-width","1.5","stroke","currentColor",1,"w-5","h-5","text-slate-400","absolute","left-3","top-1/2","-translate-y-1/2"],["stroke-linecap","round","stroke-linejoin","round","d","M21 21l-5.197-5.197m0 0A7.5 7.5 0 105.196 5.196a7.5 7.5 0 0010.607 10.607z"],[1,"bg-slate-900","border","border-slate-700","rounded-lg","py-2","px-3","focus:outline-none","focus:ring-2","focus:ring-lime-400",3,"change"],["value",""],["value","admin"],["value","instructor"],["value","customer"],["value","true"],["value","false"],[1,"flex","flex-col","sm:flex-row","items-center","justify-between","gap-4","my-6"],[1,"bg-slate-800","rounded-lg","overflow-hidden","border","border-white/10"],[1,"overflow-x-auto"],[1,"w-full","text-sm","text-left","text-slate-300"],[1,"text-xs","text-slate-400","uppercase","bg-slate-900/50"],["scope","col",1,"px-6","py-3"],["scope","col",1,"px-6","py-3","text-right"],[1,"flex","items-center","justify-center","gap-2","mt-6"],[3,"close","save","mode","user","isLoading"],[1,"text-sm","text-slate-400"],[1,"flex","items-center","gap-2"],["for","items-per-page",1,"text-sm","text-slate-400"],["id","items-per-page",1,"bg-slate-900","border","border-slate-700","text-white","text-sm","rounded-lg","px-3","py-1.5","focus:ring-lime-400","focus:border-lime-400",3,"change","value"],[3,"value"],["colspan","5",1,"text-center","py-8"],[1,"flex","justify-center","items-center","gap-2","text-slate-400"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24",1,"animate-spin","h-5","w-5","text-lime-400"],["cx","12","cy","12","r","10","stroke","currentColor","stroke-width","4",1,"opacity-25"],["fill","currentColor","d","M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z",1,"opacity-75"],["colspan","5",1,"text-center","py-8","text-slate-500"],[1,"border-b","border-slate-700","hover:bg-slate-800/50","transition-colors"],["scope","row",1,"px-6","py-4","font-medium","text-white","whitespace-nowrap"],[1,"flex","items-center","gap-3"],[1,"w-10","h-10","rounded-full","object-cover","ring-2","ring-white/10",3,"src","alt"],[1,"font-semibold"],[1,"font-normal","text-slate-400","text-xs"],[1,"px-6","py-4"],[1,"px-6","py-4","text-slate-400"],[1,"px-6","py-4","text-right"],[1,"flex","items-center","justify-end","gap-2"],["title","Ver detalles",1,"p-2","rounded-md","hover:bg-slate-700","transition",3,"click"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke-width","1.5","stroke","currentColor",1,"w-5","h-5","text-slate-400","hover:text-white","transition"],["stroke-linecap","round","stroke-linejoin","round","d","M2.036 12.322a1.012 1.012 0 010-.639C3.423 7.51 7.36 4.5 12 4.5c4.638 0 8.573 3.007 9.963 7.178.07.207.07.431 0 .639C20.577 16.49 16.64 19.5 12 19.5c-4.638 0-8.573-3.007-9.963-7.178z"],["stroke-linecap","round","stroke-linejoin","round","d","M15 12a3 3 0 11-6 0 3 3 0 016 0z"],["title","Editar usuario",1,"p-2","rounded-md","hover:bg-slate-700","transition",3,"click"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke-width","1.5","stroke","currentColor",1,"w-5","h-5","text-slate-400","hover:text-lime-400","transition"],["stroke-linecap","round","stroke-linejoin","round","d","M16.862 4.487l1.687-1.688a1.875 1.875 0 112.652 2.652L10.582 16.07a4.5 4.5 0 01-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 011.13-1.897l8.932-8.931zm0 0L19.5 7.125M18 14v4.75A2.25 2.25 0 0115.75 21H5.25A2.25 2.25 0 013 18.75V8.25A2.25 2.25 0 015.25 6H10"],["title","Eliminar usuario",1,"p-2","rounded-md","hover:bg-red-500/20","transition",3,"click"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke-width","1.5","stroke","currentColor",1,"w-5","h-5","text-red-400","hover:text-red-300","transition"],["stroke-linecap","round","stroke-linejoin","round","d","M14.74 9l-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 01-2.244 2.077H8.084a2.25 2.25 0 01-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 00-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 013.478-.397m7.5 0v-.916c0-1.18-.91-2.124-2.033-2.124H8.033C6.91 2.75 6 3.694 6 4.874v.916m7.5 0h-7.5"],[1,"px-4","py-2","rounded-lg","bg-slate-800","border","border-white/10","text-slate-400","hover:bg-slate-700","hover:text-white","disabled:opacity-50","disabled:cursor-not-allowed","transition",3,"click","disabled"],["fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"w-5","h-5"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M15 19l-7-7 7-7"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 5l7 7-7 7"],[1,"px-4","py-2","text-slate-500"],[3,"class"],[3,"click"]],template:function(e,a){e&1&&(i(0,"main",0)(1,"div",1)(2,"div",2)(3,"div")(4,"h1",3),o(5,"Gesti\xF3n de Usuarios"),n(),i(6,"p",4),o(7,"Administra, crea y edita los usuarios de la plataforma."),n()(),i(8,"button",5),h("click",function(){return a.openCreateModal()}),c(),i(9,"svg",6),d(10,"path",7),n(),o(11," Nuevo Usuario "),n()(),p(),i(12,"div",8)(13,"div",9)(14,"div",10)(15,"div")(16,"p",11),o(17,"Total Usuarios"),n(),i(18,"p",12),o(19),n()(),i(20,"div",13),c(),i(21,"svg",14),d(22,"path",15),n()()()(),p(),i(23,"div",9)(24,"div",10)(25,"div")(26,"p",11),o(27,"Estudiantes"),n(),i(28,"p",16),o(29),n()(),i(30,"div",17),c(),i(31,"svg",18),d(32,"path",19)(33,"path",20),n()()()(),p(),i(34,"div",9)(35,"div",10)(36,"div")(37,"p",11),o(38,"Instructores"),n(),i(39,"p",21),o(40),n()(),i(41,"div",13),c(),i(42,"svg",14),d(43,"path",22),n()()()(),p(),i(44,"div",9)(45,"div",10)(46,"div")(47,"p",11),o(48,"Activos"),n(),i(49,"p",21),o(50),n()(),i(51,"div",23),c(),i(52,"svg",24),d(53,"path",25),n()()()()(),p(),i(54,"div",26)(55,"div",27)(56,"input",28),h("input",function(m){return a.onSearch(m)}),n(),c(),i(57,"svg",29),d(58,"path",30),n()(),p(),i(59,"select",31),h("change",function(m){return a.onRoleFilter(m)}),i(60,"option",32),o(61,"Todos los roles"),n(),i(62,"option",33),o(63,"Administrador"),n(),i(64,"option",34),o(65,"Instructor"),n(),i(66,"option",35),o(67,"Cliente"),n()(),i(68,"select",31),h("change",function(m){return a.onStateFilter(m)}),i(69,"option",32),o(70,"Todos los estados"),n(),i(71,"option",36),o(72,"Activo"),n(),i(73,"option",37),o(74,"Inactivo"),n()()(),g(75,Ze,13,7,"div",38),i(76,"div",39)(77,"div",40)(78,"table",41)(79,"thead",42)(80,"tr")(81,"th",43),o(82,"Usuario"),n(),i(83,"th",43),o(84,"Rol"),n(),i(85,"th",43),o(86,"Estado"),n(),i(87,"th",43),o(88,"Fecha de Registro"),n(),i(89,"th",44),o(90,"Acciones"),n()()(),i(91,"tbody"),g(92,qe,7,0,"tr")(93,Je,3,0,"tr")(94,Ye,2,0),n()()()(),g(95,et,9,2,"div",45),n()(),i(96,"app-user-modal",46),h("close",function(){return a.closeUserModal()})("save",function(m){return a.handleSaveUser(m)}),n()),e&2&&(l(19),U(a.totalUsers()),l(10),U(a.totalStudents()),l(11),U(a.totalInstructors()),l(10),U(a.activeUsers()),l(25),x(a.users().length>0?75:-1),l(17),x(a.usersService.isLoading()?92:a.paginatedUsers().length===0?93:94),l(3),x(a.totalPages()>1?95:-1),l(),b("mode",a.modalMode())("user",a.currentUser())("isLoading",a.isLoading()))},dependencies:[D,ce,R,B,$,Z,N],encapsulation:2})};export{pe as a};
