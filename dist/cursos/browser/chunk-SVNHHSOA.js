import{a as m}from"./chunk-HLLCELQD.js";import{Jc as n,K as l,O as o,T as g,ec as s,ja as u}from"./chunk-6JS7X5LE.js";import{a,b as r}from"./chunk-I4MTPUBM.js";var p=class i{http=g(n);API_URL=`${m.url}carousel`;state=u({publicImages:[],allImages:[],isLoading:!1,error:null});publicImages=s(()=>this.state().publicImages);allImages=s(()=>this.state().allImages);isLoading=s(()=>this.state().isLoading);error=s(()=>this.state().error);constructor(){this.loadPublicImages().subscribe()}loadPublicImages(){return this.state.update(e=>r(a({},e),{isLoading:!0})),this.http.get(`${this.API_URL}/public_list`).pipe(l({next:e=>{this.state.update(t=>r(a({},t),{publicImages:e,isLoading:!1,error:null}))},error:e=>{this.state.update(t=>r(a({},t),{publicImages:[],isLoading:!1,error:e}))}}))}loadAllImages(){return this.state.update(e=>r(a({},e),{isLoading:!0})),this.http.get(`${this.API_URL}/list`).pipe(l({next:e=>this.state.update(t=>r(a({},t),{allImages:e,isLoading:!1,error:null})),error:e=>this.state.update(t=>r(a({},t),{allImages:[],isLoading:!1,error:e}))}))}register(e){return this.http.post(`${this.API_URL}/register`,e)}update(e,t){return this.http.put(`${this.API_URL}/update/${e}`,t)}remove(e){return this.http.delete(`${this.API_URL}/remove/${e}`)}updateOrder(e){return this.http.put(`${this.API_URL}/update-order`,{updates:e})}updateLocalOrder(e){this.state.update(t=>r(a({},t),{allImages:e}))}static \u0275fac=function(t){return new(t||i)};static \u0275prov=o({token:i,factory:i.\u0275fac,providedIn:"root"})};export{p as a};
