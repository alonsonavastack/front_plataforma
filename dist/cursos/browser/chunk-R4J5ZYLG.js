import{a as _}from"./chunk-JHQ3VRLX.js";import"./chunk-PPQNL6QW.js";import"./chunk-R5HHEV5R.js";import"./chunk-TGT7B6YH.js";import"./chunk-QZCYETEH.js";import"./chunk-7PJYU2DX.js";import"./chunk-GLGOWGEK.js";import{e as S,f as E}from"./chunk-UKUKXRH6.js";import"./chunk-TCGJFX72.js";import{b as L,c as g,d as F,h as R,m as T,x as V,y as D}from"./chunk-QA5A7GBQ.js";import{a as k}from"./chunk-F4KIANN2.js";import{$ as d,Ac as w,Eb as b,Gb as o,Hb as y,Jc as M,Ma as l,T as p,Xa as x,_ as m,hb as c,ib as u,ja as f,nb as v,ob as e,pb as t,qb as s,wb as h,yb as C}from"./chunk-6JS7X5LE.js";import"./chunk-I4MTPUBM.js";function H(n,a){if(n&1&&(e(0,"div",9)(1,"p",20),m(),e(2,"svg",21),s(3,"path",22),t(),d(),e(4,"span"),o(5),t()()()),n&2){let i=C();l(5),y(i.errorMessage())}}function N(n,a){n&1&&(e(0,"p",13),o(1,"Ingresa un correo v\xE1lido"),t())}function B(n,a){n&1&&(m(),e(0,"svg",23),s(1,"circle",24)(2,"path",25),t(),d(),e(3,"span"),o(4,"Enviando..."),t())}function j(n,a){n&1&&(e(0,"span"),o(1,"Enviarme C\xF3digo"),t(),m(),e(2,"svg",26),s(3,"path",27),t())}var I=class n{http=p(M);router=p(S);emailControl=new R("",[g.required,g.email]);isLoading=f(!1);errorMessage=f(null);onSubmit(){if(this.emailControl.invalid)return;this.isLoading.set(!0),this.errorMessage.set(null);let a=this.emailControl.value;this.http.post(`${k.url}users/resend-otp-by-email`,{email:a}).subscribe({next:i=>{this.isLoading.set(!1),this.router.navigate(["/verify-otp"],{queryParams:{userId:i.userId}})},error:i=>{this.isLoading.set(!1),i.status===404?this.errorMessage.set("No encontramos ninguna cuenta con este correo."):i.status===400&&i.error?.isVerified?(this.errorMessage.set("Esta cuenta ya est\xE1 verificada. Por favor inicia sesi\xF3n."),setTimeout(()=>this.router.navigate(["/login"]),2e3)):i.status===429?this.errorMessage.set(i.error?.message_text||"Demasiados intentos. Espera un momento."):this.errorMessage.set("Ocurri\xF3 un error. Intenta nuevamente m\xE1s tarde.")}})}static \u0275fac=function(i){return new(i||n)};static \u0275cmp=x({type:n,selectors:[["app-recover-code"]],decls:31,vars:7,consts:[[1,"min-h-screen","bg-slate-950","py-8","sm:py-12","px-4"],[1,"w-full","max-w-md","mx-auto"],[1,"bg-slate-800/50","backdrop-blur-lg","border","border-white/10","rounded-2xl","p-6","md:p-8","shadow-2xl"],[1,"text-center","mb-8"],[1,"w-16","h-16","bg-cyan-500/20","rounded-full","flex","items-center","justify-center","mx-auto","mb-4"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-8","h-8","text-cyan-400"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 4v1m6 11h2m-6 0h-2v4m0-11v3m0 0h.01M12 14.5V12m0 0V8.832c0-1.12 1.688-1.54 2.513-.67l2.422 2.525c.78.813.78 2.126 0 2.938L14.513 16.17c-.825.86-2.513.45-2.513-.67v-1z"],[1,"text-2xl","font-bold","text-white","mb-2"],[1,"text-slate-400","text-sm"],[1,"mb-6","p-4","bg-red-500/10","border","border-red-500/30","rounded-lg","animate-fade-in"],[1,"space-y-4"],["for","email",1,"block","mb-2","text-sm","font-medium","text-slate-300"],["type","email","placeholder","tu@correo.com",1,"w-full","bg-slate-900/70","border","border-slate-700","text-white","text-sm","rounded-lg","focus:ring-cyan-500","focus:border-cyan-500","block","p-3","transition-colors",3,"formControl"],[1,"text-red-400","text-xs","mt-1"],[1,"w-full","py-3","px-4","rounded-lg","font-medium","transition-all","bg-cyan-500","hover:bg-cyan-600","text-white","shadow-lg","shadow-cyan-500/20","focus:outline-none","focus:ring-2","focus:ring-cyan-400","focus:ring-offset-2","focus:ring-offset-slate-800","disabled:opacity-50","disabled:cursor-not-allowed","disabled:shadow-none","flex","justify-center","items-center","gap-2",3,"click","disabled"],[1,"mt-6","text-center","space-y-2"],["routerLink","/login",1,"block","text-sm","text-slate-400","hover:text-white","transition-colors"],[1,"text-cyan-400"],["routerLink","/register",1,"block","text-sm","text-slate-400","hover:text-white","transition-colors"],[1,"text-lime-400"],[1,"text-red-400","text-sm","flex","items-center","gap-2"],["fill","currentColor","viewBox","0 0 20 20",1,"w-5","h-5","flex-shrink-0"],["fill-rule","evenodd","d","M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule","evenodd"],["fill","none","viewBox","0 0 24 24",1,"animate-spin","h-5","w-5"],["cx","12","cy","12","r","10","stroke","currentColor","stroke-width","4",1,"opacity-25"],["fill","currentColor","d","M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z",1,"opacity-75"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M14 5l7 7m0 0l-7 7m7-7H3"]],template:function(i,r){i&1&&(s(0,"app-header"),e(1,"div",0)(2,"div",1)(3,"div",2)(4,"div",3)(5,"div",4),m(),e(6,"svg",5),s(7,"path",6),t()(),d(),e(8,"h1",7),o(9,"Recuperar C\xF3digo"),t(),e(10,"p",8),o(11," Ingresa tu correo electr\xF3nico para enviarte un nuevo c\xF3digo de verificaci\xF3n. "),t()(),c(12,H,6,1,"div",9),e(13,"div",10)(14,"div")(15,"label",11),o(16," Correo Electr\xF3nico "),t(),s(17,"input",12),c(18,N,2,0,"p",13),t(),e(19,"button",14),h("click",function(){return r.onSubmit()}),c(20,B,5,0)(21,j,4,0),t()(),e(22,"div",15)(23,"a",16),o(24," \xBFYa tienes cuenta verificada? "),e(25,"span",17),o(26,"Inicia sesi\xF3n"),t()(),e(27,"a",18),o(28," \xBFNo tienes cuenta? "),e(29,"span",19),o(30,"Reg\xEDstrate"),t()()()()()()),i&2&&(l(12),u(r.errorMessage()?12:-1),l(5),b("border-red-500",r.emailControl.invalid&&r.emailControl.touched),v("formControl",r.emailControl),l(),u(r.emailControl.invalid&&r.emailControl.touched?18:-1),l(),v("disabled",r.emailControl.invalid||r.isLoading()),l(),u(r.isLoading()?20:21))},dependencies:[w,V,L,F,D,T,E,_],encapsulation:2})};export{I as RecoverCodeComponent};
