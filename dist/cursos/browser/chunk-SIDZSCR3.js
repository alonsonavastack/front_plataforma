import{a as I}from"./chunk-ZWCXJPRW.js";import{a as R}from"./chunk-W7WAY7UL.js";import"./chunk-RN6YCK2E.js";import"./chunk-6Z75774O.js";import"./chunk-R5HHEV5R.js";import"./chunk-UD4Q7ATB.js";import"./chunk-EVEHFL4H.js";import"./chunk-6Y6Q55N7.js";import"./chunk-IGH6YUMB.js";import{b as N,c as z,f as F}from"./chunk-UKUKXRH6.js";import"./chunk-TCGJFX72.js";import"./chunk-HLLCELQD.js";import{$ as k,Eb as w,Gb as s,Hb as p,Ia as D,Ma as a,T as S,Xa as O,Y as _,Z as f,_ as C,ec as M,hb as g,ib as x,ja as h,ka as V,lb as L,mb as y,nb as $,ob as n,pb as o,qb as u,ub as b,wb as v,yb as m}from"./chunk-6JS7X5LE.js";import{a as E,b as T}from"./chunk-I4MTPUBM.js";var U=(i,e)=>e._id;function P(i,e){i&1&&(n(0,"div",1),u(1,"div",4),o())}function H(i,e){i&1&&u(0,"iframe",7),i&2&&$("src",e,D)}function A(i,e){i&1&&(n(0,"div",8)(1,"p"),s(2,"Selecciona una clase para comenzar a aprender."),o()())}function B(i,e){if(i&1){let t=b();n(0,"div",27),v("click",function(){_(t);let r=m(2);return f(r.toggleMenu())}),o()}}function G(i,e){i&1&&(n(0,"div",25),s(1,"No hay contenido en este curso."),o())}function q(i,e){if(i&1){let t=b();n(0,"button",35),v("click",function(){let r=_(t).$implicit,c=m(5);return f(c.selectClass(r))}),C(),n(1,"svg",36),u(2,"path",37),o(),k(),n(3,"span",38),s(4),o(),n(5,"span",39),s(6),o()()}if(i&2){let t,l,r,c=e.$implicit,d=m(5);w("bg-lime-400/10",((t=d.activeClass())==null?null:t._id)===c._id)("text-lime-300",((l=d.activeClass())==null?null:l._id)===c._id),a(),w("text-lime-400",((r=d.activeClass())==null?null:r._id)===c._id),a(3),p(c.title),a(2),p(d.formatDuration(c.time))}}function J(i,e){if(i&1&&(n(0,"div",33),L(1,q,7,8,"button",34,U),o()),i&2){let t=m().$implicit;a(),y(t.clases)}}function K(i,e){if(i&1){let t=b();n(0,"div",28)(1,"button",29),v("click",function(){let r=_(t).$implicit,c=m(3);return f(c.toggleSection(r._id))}),n(2,"span",30),s(3),o(),C(),n(4,"svg",31),u(5,"path",32),o()(),g(6,J,3,0,"div",33),o()}if(i&2){let t=e.$implicit,l=m(3);a(3),p(t.title),a(),w("rotate-180",l.isSectionOpen(t._id)),a(2),x(l.isSectionOpen(t._id)?6:-1)}}function Q(i,e){if(i&1&&(n(0,"div",26),L(1,K,7,4,"div",28,U),o()),i&2){let t=m(2);a(),y(t.curriculum())}}function W(i,e){if(i&1){let t=b();n(0,"div",2)(1,"main",5)(2,"div",6),g(3,H,1,1,"iframe",7)(4,A,3,0,"div",8),o(),n(5,"div",9)(6,"div")(7,"h1",10),s(8),o(),n(9,"p",11),s(10),o()(),n(11,"button",12),v("click",function(){_(t);let r=m();return f(r.toggleMenu())}),C(),n(12,"svg",13),u(13,"path",14),o(),k(),n(14,"span",15),s(15,"Abrir men\xFA del curso"),o()()()(),g(16,B,1,0,"div",16),n(17,"aside",17)(18,"div",18)(19,"h2",19),s(20),o(),n(21,"button",20),v("click",function(){_(t);let r=m();return f(r.toggleMenu())}),C(),n(22,"svg",13),u(23,"path",21),o(),k(),n(24,"span",15),s(25,"Cerrar men\xFA"),o()()(),n(26,"div",22)(27,"a",23),s(28,"\u2190 Volver a mi perfil"),o()(),n(29,"div",24),g(30,G,2,0,"div",25)(31,Q,3,0,"div",26),o()()()}if(i&2){let t,l,r,c=e,d=m();a(3),x((t=d.videoUrl())?3:4,t),a(5),p(((l=d.activeClass())==null?null:l.title)||c.title),a(2),p(((r=d.activeClass())==null?null:r.description)||"Bienvenido al curso"),a(6),x(d.isMenuOpen()?16:-1),a(),w("translate-x-0",d.isMenuOpen())("translate-x-full",!d.isMenuOpen()),a(3),p(c.title),a(10),x(d.curriculum().length===0?30:31)}}function X(i,e){i&1&&(n(0,"div",3)(1,"p"),s(2,"No se pudo cargar el curso o no tienes acceso."),o()())}var j=class i{route=S(z);api=S(I);sanitizer=S(N);slug=h("");courseDetail=this.api.coursePublicResource(()=>this.slug());isLoading=this.courseDetail.isLoading;activeClass=h(null);openSections=h({});isMenuOpen=h(!1);course=M(()=>{let e=this.courseDetail.value();return e?e.course:null});curriculum=M(()=>{let e=this.course();return e?.malla_curricular||e?.malla||[]});videoUrl=M(()=>{let e=this.activeClass();if(!e)return null;if(e.video_platform&&e.video_id){let t;if(e.video_platform==="youtube")t=`https://www.youtube.com/embed/${e.video_id}?rel=0&modestbranding=1&autohide=1&showinfo=0`;else if(e.video_platform==="vimeo")t=`https://player.vimeo.com/video/${e.video_id}?badge=0&autopause=0&player_id=0&app_id=58479`;else return null;return this.sanitizer.bypassSecurityTrustResourceUrl(t)}if(e.vimeo_id){let t=`https://player.vimeo.com/video/${e.vimeo_id}?badge=0&autopause=0&player_id=0&app_id=58479`;return this.sanitizer.bypassSecurityTrustResourceUrl(t)}return null});constructor(){V(()=>{let e=this.curriculum();if(e.length>0&&e[0].clases?.length>0&&!this.activeClass()){let t=e[0].clases[0];this.selectClass(t),this.toggleSection(e[0]._id)}})}ngOnInit(){let e=this.route.snapshot.paramMap.get("slug")??"";this.slug.set(e)}selectClass(e){this.activeClass.set(e)}toggleMenu(){this.isMenuOpen.update(e=>!e)}toggleSection(e){this.openSections.update(t=>T(E({},t),{[e]:!t[e]}))}isSectionOpen(e){return!!this.openSections()[e]}formatDuration(e){if(!e||e<=0)return"0m";let t=Math.floor(e/3600),l=Math.floor(e%3600/60);return t>0?`${t}h ${l}m`:`${l}m`}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=O({type:i,selectors:[["app-learning"]],decls:5,vars:1,consts:[[1,"bg-slate-950","text-white","min-h-[calc(100vh-4rem)]"],[1,"flex","items-center","justify-center","h-full"],[1,"grid","lg:grid-cols-[1fr_350px]","h-full"],[1,"p-6","text-center","text-red-400"],[1,"animate-spin","rounded-full","h-24","w-24","border-b-2","border-lime-400"],[1,"flex","flex-col","bg-black"],[1,"flex-grow","flex","items-center","justify-center"],["frameborder","0","allow","autoplay; fullscreen; picture-in-picture","allowfullscreen","",1,"w-full","aspect-video",3,"src"],[1,"text-center","text-slate-400"],[1,"p-4","md:p-6","border-t","border-white/10","bg-slate-900","flex","items-center","justify-between","gap-4"],[1,"text-lg","md:text-xl","font-bold"],[1,"text-sm","text-slate-400","mt-1","line-clamp-2"],[1,"lg:hidden","flex-shrink-0","p-2","rounded-md","hover:bg-slate-800","transition",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-6","h-6"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M4 6h16M4 12h16m-7 6h7"],[1,"sr-only"],[1,"fixed","inset-0","bg-black/60","z-40","lg:hidden"],[1,"fixed","top-0","right-0","h-full","w-80","bg-slate-900","z-50","transform","transition-transform","duration-300","ease-in-out","lg:static","lg:w-[350px]","lg:translate-x-0","flex","flex-col","border-l","border-white/10"],[1,"p-4","border-b","border-white/10","flex","items-center","justify-between"],[1,"font-semibold","text-lg"],[1,"lg:hidden","p-1","text-slate-400","hover:text-white",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M6 18L18 6M6 6l12 12"],[1,"p-4","border-b","border-white/10"],["routerLink","/profile-student",1,"text-xs","text-lime-400","hover:underline","mt-1"],[1,"flex-grow","overflow-y-auto"],[1,"p-4","text-slate-400"],[1,"space-y-2","p-2"],[1,"fixed","inset-0","bg-black/60","z-40","lg:hidden",3,"click"],[1,"rounded-lg","bg-slate-800/50","overflow-hidden"],[1,"w-full","text-left","px-3","py-3","flex","items-center","justify-between","hover:bg-slate-700/50","transition",3,"click"],[1,"font-semibold","text-sm"],["viewBox","0 0 24 24","fill","none","stroke","currentColor",1,"w-4","h-4","text-slate-400","transition-transform"],["stroke-width","2","d","M6 9l6 6 6-6"],[1,"border-t","border-slate-700"],[1,"w-full","text-left","px-3","py-2.5","flex","items-center","gap-3","text-sm","hover:bg-slate-700/50","transition",3,"bg-lime-400/10","text-lime-300"],[1,"w-full","text-left","px-3","py-2.5","flex","items-center","gap-3","text-sm","hover:bg-slate-700/50","transition",3,"click"],["viewBox","0 0 24 24","fill","none","stroke","currentColor",1,"w-4","h-4","flex-shrink-0"],["stroke-width","2","d","M8 5v14l11-7-11-7z"],[1,"flex-1","line-clamp-1"],[1,"text-xs","text-slate-500"]],template:function(t,l){if(t&1&&(u(0,"app-header"),n(1,"div",0),g(2,P,2,0,"div",1)(3,W,32,10,"div",2)(4,X,3,0,"div",3),o()),t&2){let r;a(2),x(l.isLoading()?2:(r=l.course())?3:4,r)}},dependencies:[F,R],encapsulation:2})};export{j as LearningComponent};
