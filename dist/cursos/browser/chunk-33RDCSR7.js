import{a as H}from"./chunk-PXJM6XBC.js";import{a as D}from"./chunk-W7WAY7UL.js";import"./chunk-RN6YCK2E.js";import"./chunk-6Z75774O.js";import"./chunk-R5HHEV5R.js";import"./chunk-UD4Q7ATB.js";import"./chunk-EVEHFL4H.js";import"./chunk-6Y6Q55N7.js";import{b as N}from"./chunk-IGH6YUMB.js";import{e as _,f as F}from"./chunk-UKUKXRH6.js";import"./chunk-TCGJFX72.js";import{b as R,c as o,d as L,e as T,f as q,h as m,j as A,l as P,n as V,o as G,u as I,x as z}from"./chunk-SDJWNAN2.js";import"./chunk-HLLCELQD.js";import{$ as p,Gb as r,Ib as M,Ma as d,T as w,Xa as k,_ as c,hb as f,ib as x,ja as g,nb as b,ob as e,pb as t,qb as n,wb as y,yb as E}from"./chunk-6JS7X5LE.js";import"./chunk-I4MTPUBM.js";function j(l,a){if(l&1&&(e(0,"div",49),r(1),t()),l&2){let s=E();d(),M(" ",s.errorMessage()," ")}}function B(l,a){if(l&1&&(e(0,"div",50),r(1),t()),l&2){let s=E();d(),M(" ",s.successMessage()," ")}}function O(l,a){l&1&&(c(),e(0,"svg",56),n(1,"circle",57)(2,"path",58),t(),r(3," Registrando... "))}function Y(l,a){l&1&&r(0," Crear Cuenta ")}var X=class l{authService=w(N);router=w(_);errorMessage=g(null);successMessage=g(null);isLoading=g(!1);selectedCountryCode=g("+52");onCountrySelected(a){this.selectedCountryCode.set(a.dialCode)}registerForm=new q({name:new m("",[o.required,o.minLength(2)]),surname:new m("",[o.required,o.minLength(2)]),email:new m("",[o.required,o.email]),password:new m("",[o.required,o.minLength(6)]),confirmPassword:new m("",[o.required]),rol:new m("cliente",[o.required]),profession:new m(""),phone:new m("",[o.required,o.minLength(10)])});onSubmit(){if(this.errorMessage.set(null),this.successMessage.set(null),this.registerForm.invalid){this.errorMessage.set("Por favor completa todos los campos requeridos");return}let{password:a,confirmPassword:s,phone:i}=this.registerForm.value;if(a!==s){this.errorMessage.set("Las contrase\xF1as no coinciden");return}let v=i?this.selectedCountryCode()+i:"";if(!i||i.length<10){this.errorMessage.set("El tel\xE9fono debe tener al menos 10 d\xEDgitos (formato: 52155XXXXXXX)");return}this.isLoading.set(!0);let h={name:this.registerForm.value.name,surname:this.registerForm.value.surname,email:this.registerForm.value.email,password:this.registerForm.value.password,rol:this.registerForm.value.rol,profession:this.registerForm.value.profession||"",phone:v};this.authService.register(h).subscribe({next:u=>{this.isLoading.set(!1),u.otpSent?(this.successMessage.set("\xA1Registro exitoso! Redirigiendo a verificaci\xF3n..."),setTimeout(()=>{this.router.navigate(["/verify-otp"],{queryParams:{userId:u.user._id,phone:i}})},1500)):(this.successMessage.set("Usuario creado. Redirigiendo a verificaci\xF3n..."),setTimeout(()=>{this.router.navigate(["/verify-otp"],{queryParams:{userId:u.user._id,phone:i,error:"otp_not_sent"}})},1500))},error:u=>{if(this.isLoading.set(!1),u.status===409){let C=u.error?.message_text||"El usuario ya existe.",S=C;C.includes("USUARIO INGRESADO YA EXISTE")?S="Ya existe una cuenta registrada con este correo electr\xF3nico.":C.includes("TEL\xC9FONO YA EST\xC1 REGISTRADO")&&(S="Este n\xFAmero de tel\xE9fono ya est\xE1 registrado en otra cuenta."),this.errorMessage.set(S)}else this.errorMessage.set(u.error?.message_text||u.error?.message||"Error al registrarse. Por favor intenta nuevamente.")}})}static \u0275fac=function(s){return new(s||l)};static \u0275cmp=k({type:l,selectors:[["app-register"]],decls:106,vars:6,consts:[[1,"min-h-screen","bg-slate-950","py-8","sm:py-12","px-4"],[1,"w-full","max-w-2xl","mx-auto"],[1,"bg-slate-800/50","backdrop-blur-lg","border","border-white/10","rounded-2xl","p-6","md:p-8","shadow-2xl"],[1,"text-center","mb-6"],[1,"text-3xl","font-extrabold","text-white"],[1,"text-slate-400","mt-2"],[1,"space-y-4",3,"ngSubmit","formGroup"],[1,"bg-slate-900/50","border","border-white/10","rounded-xl","p-4","mb-6"],[1,"block","mb-3","text-sm","font-medium","text-slate-300"],[1,"flex","items-center","gap-2"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","text-lime-300"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"],[1,"grid","grid-cols-1","sm:grid-cols-2","gap-3"],[1,"relative","cursor-pointer"],["type","radio","formControlName","rol","value","cliente",1,"peer","sr-only"],[1,"p-4","rounded-lg","border-2","border-slate-700","peer-checked:border-lime-400","peer-checked:bg-lime-400/10","transition-all","hover:border-lime-400/50"],[1,"flex","items-center","gap-3"],[1,"w-10","h-10","rounded-full","bg-cyan-500/20","flex","items-center","justify-center","flex-shrink-0"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-6","h-6","text-cyan-400"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"],[1,"font-semibold","text-white"],[1,"text-xs","text-slate-400"],["type","radio","formControlName","rol","value","instructor",1,"peer","sr-only"],[1,"w-10","h-10","rounded-full","bg-lime-500/20","flex","items-center","justify-center","flex-shrink-0"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-6","h-6","text-lime-400"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M21 13.255A23.931 23.931 0 0112 15c-3.183 0-6.22-.62-9-1.745M16 6V4a2 2 0 00-2-2h-4a2 2 0 00-2 2v2m4 6h.01M5 20h14a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"],[1,"grid","grid-cols-1","sm:grid-cols-2","gap-4"],["for","name",1,"block","mb-2","text-sm","font-medium","text-slate-300"],[1,"text-red-400"],["type","text","id","name","formControlName","name","placeholder","Juan","required","",1,"w-full","bg-slate-900/70","border","border-slate-700","text-white","text-sm","rounded-lg","focus:ring-lime-500","focus:border-lime-500","block","p-2.5"],["for","surname",1,"block","mb-2","text-sm","font-medium","text-slate-300"],["type","text","id","surname","formControlName","surname","placeholder","P\xE9rez","required","",1,"w-full","bg-slate-900/70","border","border-slate-700","text-white","text-sm","rounded-lg","focus:ring-lime-500","focus:border-lime-500","block","p-2.5"],["for","email",1,"block","mb-2","text-sm","font-medium","text-slate-300"],["type","email","id","email","formControlName","email","placeholder","tu@correo.com","required","",1,"w-full","bg-slate-900/70","border","border-slate-700","text-white","text-sm","rounded-lg","focus:ring-lime-500","focus:border-lime-500","block","p-2.5"],["for","phone",1,"block","mb-2","text-sm","font-medium","text-slate-300"],[1,"flex","gap-2"],[1,"w-32"],[3,"countrySelected","selectedDialCode"],["type","tel","id","phone","formControlName","phone","placeholder","N\xFAmero de tel\xE9fono","required","",1,"flex-1","bg-slate-900/70","border","border-slate-700","text-white","text-base","rounded-lg","focus:ring-lime-500","focus:border-lime-500","block","p-2.5"],[1,"text-xs","text-lime-400","mt-1","flex","items-center","gap-1"],["fill","currentColor","viewBox","0 0 20 20",1,"w-3","h-3"],["fill-rule","evenodd","d","M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z","clip-rule","evenodd"],["for","profession",1,"block","mb-2","text-sm","font-medium","text-slate-300"],["type","text","id","profession","formControlName","profession","placeholder","Desarrollador, Dise\xF1ador...",1,"w-full","bg-slate-900/70","border","border-slate-700","text-white","text-sm","rounded-lg","focus:ring-lime-500","focus:border-lime-500","block","p-2.5"],["for","password",1,"block","mb-2","text-sm","font-medium","text-slate-300"],["type","password","id","password","formControlName","password","placeholder","\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022","required","",1,"w-full","bg-slate-900/70","border","border-slate-700","text-white","text-sm","rounded-lg","focus:ring-lime-500","focus:border-lime-500","block","p-2.5"],[1,"text-xs","text-slate-500","mt-1"],["for","confirmPassword",1,"block","mb-2","text-sm","font-medium","text-slate-300"],["type","password","id","confirmPassword","formControlName","confirmPassword","placeholder","\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022","required","",1,"w-full","bg-slate-900/70","border","border-slate-700","text-white","text-sm","rounded-lg","focus:ring-lime-500","focus:border-lime-500","block","p-2.5"],[1,"bg-red-500/10","border","border-red-400/30","text-red-300","text-sm","rounded-lg","p-3"],[1,"bg-lime-500/10","border","border-lime-400/30","text-lime-300","text-sm","rounded-lg","p-3"],["type","submit",1,"w-full","h-11","rounded-xl","bg-lime-400","text-slate-900","font-bold","hover:bg-lime-300","transition","disabled:bg-slate-600","disabled:cursor-not-allowed","flex","items-center","justify-center","gap-2",3,"disabled"],[1,"text-sm","text-center","text-slate-400"],["routerLink","/login",1,"font-medium","text-lime-400","hover:underline"],[1,"text-center","mt-6"],["routerLink","/",1,"text-sm","text-slate-400","hover:text-lime-300","transition-colors","duration-300"],["fill","none","viewBox","0 0 24 24",1,"animate-spin","h-5","w-5"],["cx","12","cy","12","r","10","stroke","currentColor","stroke-width","4",1,"opacity-25"],["fill","currentColor","d","M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z",1,"opacity-75"]],template:function(s,i){s&1&&(n(0,"app-header"),e(1,"div",0)(2,"div",1)(3,"div",2)(4,"div",3)(5,"h1",4),r(6,"Crear Cuenta"),t(),e(7,"p",5),r(8,"\xDAnete a Dev-Sharks y empieza a aprender"),t()(),e(9,"form",6),y("ngSubmit",function(){return i.onSubmit()}),e(10,"div",7)(11,"label",8)(12,"span",9),c(),e(13,"svg",10),n(14,"path",11),t(),r(15," \xBFQu\xE9 tipo de cuenta deseas? "),t()(),p(),e(16,"div",12)(17,"label",13),n(18,"input",14),e(19,"div",15)(20,"div",16)(21,"div",17),c(),e(22,"svg",18),n(23,"path",19),t()(),p(),e(24,"div")(25,"div",20),r(26,"Estudiante"),t(),e(27,"div",21),r(28,"Aprende y crece"),t()()()()(),e(29,"label",13),n(30,"input",22),e(31,"div",15)(32,"div",16)(33,"div",23),c(),e(34,"svg",24),n(35,"path",25),t()(),p(),e(36,"div")(37,"div",20),r(38,"Instructor"),t(),e(39,"div",21),r(40,"Ense\xF1a y comparte"),t()()()()()()(),e(41,"div",26)(42,"div")(43,"label",27),r(44," Nombre "),e(45,"span",28),r(46,"*"),t()(),n(47,"input",29),t(),e(48,"div")(49,"label",30),r(50," Apellido "),e(51,"span",28),r(52,"*"),t()(),n(53,"input",31),t()(),e(54,"div")(55,"label",32),r(56," Correo Electr\xF3nico "),e(57,"span",28),r(58,"*"),t()(),n(59,"input",33),t(),e(60,"div")(61,"label",34)(62,"span",9),r(63," \u{1F4F1} Tel\xE9fono (Telegram) "),e(64,"span",28),r(65,"*"),t()()(),e(66,"div",35)(67,"div",36)(68,"app-country-code-selector",37),y("countrySelected",function(h){return i.onCountrySelected(h)}),t()(),n(69,"input",38),t(),e(70,"p",39),c(),e(71,"svg",40),n(72,"path",41),t(),p(),e(73,"span"),r(74,"Selecciona tu pa\xEDs y ingresa tu n\xFAmero de tel\xE9fono"),t()()(),e(75,"div")(76,"label",42),r(77," Profesi\xF3n (Opcional) "),t(),n(78,"input",43),t(),e(79,"div",26)(80,"div")(81,"label",44),r(82," Contrase\xF1a "),e(83,"span",28),r(84,"*"),t()(),n(85,"input",45),e(86,"p",46),r(87,"M\xEDnimo 6 caracteres"),t()(),e(88,"div")(89,"label",47),r(90," Confirmar Contrase\xF1a "),e(91,"span",28),r(92,"*"),t()(),n(93,"input",48),t()(),f(94,j,2,1,"div",49),f(95,B,2,1,"div",50),e(96,"button",51),f(97,O,4,0)(98,Y,1,0),t(),e(99,"div",52),r(100," \xBFYa tienes una cuenta? "),e(101,"a",53),r(102,"Inicia sesi\xF3n aqu\xED"),t()()(),e(103,"div",54)(104,"a",55),r(105," \u2190 Regresar a la p\xE1gina de inicio "),t()()()()()),s&2&&(d(9),b("formGroup",i.registerForm),d(59),b("selectedDialCode",i.selectedCountryCode()),d(26),x(i.errorMessage()?94:-1),d(),x(i.successMessage()?95:-1),d(),b("disabled",i.registerForm.invalid||i.isLoading()),d(),x(i.isLoading()?97:98))},dependencies:[F,z,A,R,P,L,T,I,G,V,D,H],encapsulation:2})};export{X as RegisterComponent};
